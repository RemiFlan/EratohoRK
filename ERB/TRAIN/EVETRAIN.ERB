<<<<<<< HEAD
・ｿ;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;・・宣幕蟋九・蜃ｦ逅・;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
@EVENTTRAIN
#DIM LCOUNT
#DIM 蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ

;(・・川梵蛻･)・・戦圈・伜刈邂・CFLAG:・・戦圈・・+

;・・宣幕蟋狗峩蜑阪↓・壱･豸郁ｲｻ蜃ｦ逅・ｒ縺ｯ縺輔・(・誤糖・菩侃縺ｮ縺ｿ縲∵欠螳壽凾)
SIF FLAG:・ｨ・・== 1 && FLAG:AI・川悛・・	CALL MANAGE_MP

FLAG:・ｰ・川､・= 1
;・們メ繧棚nitialize
TEQUIP:MASTER:・・┷・罹ｦｬ = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:・・┷・罹ｦｬ # 0
TEQUIP:MASTER:・・懍譜       = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:・・懍譜 # 0
TEQUIP:MASTER:﨑俯ｰ們侠・作亶 = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:﨑俯ｰ們侠・作亶 # 0
TEQUIP:MASTER:・・ｰ們侠・作亶 = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:・・ｰ們侠・作亶 # 0
TEQUIP:MASTER:﨑俯ｰ們侠・餓亶 = CFLAG:MASTER:・們メ < 1 ? EQUIP:MASTER:﨑俯ｰ們侠・餓亶 # 0
TEQUIP:MASTER:・・ｰ們侠・餓亶 = CFLAG:MASTER:・們メ < 1 ? EQUIP:MASTER:・・ｰ們侠・餓亶 # 0
TEQUIP:MASTER:・・侠・餓亶   = CFLAG:MASTER:・們メ < 1 ? EQUIP:MASTER:・・侠・餓亶 # 0
TEQUIP:MASTER:・肥侃嵓・・  = CFLAG:MASTER:・們メ == 3 ? EQUIP:MASTER:・肥侃嵓・・# 0

TEQUIP:MASTER:・ｸ・壱ｪｩ・ｸ・ｴ = EQUIP:MASTER:・ｸ・壱ｪｩ・ｸ・ｴ

TEQUIP:・・┷・罹ｦｬ = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:・・┷・罹ｦｬ # 0
TEQUIP:・・懍譜       = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:・・懍譜 # 0
TEQUIP:﨑俯ｰ們侠・作亶 = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:﨑俯ｰ們侠・作亶 # 0
TEQUIP:・・ｰ們侠・作亶 = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:・・ｰ們侠・作亶 # 0
TEQUIP:﨑俯ｰ們侠・餓亶 = CFLAG:TARGET:・們メ < 1 ? EQUIP:TARGET:﨑俯ｰ們侠・餓亶 # 0
TEQUIP:・・ｰ們侠・餓亶 = CFLAG:TARGET:・們メ < 1 ? EQUIP:TARGET:・・ｰ們侠・餓亶 # 0
TEQUIP:・・侠・餓亶   = CFLAG:TARGET:・們メ < 1 ? EQUIP:TARGET:・・侠・餓亶 # 0
TEQUIP:・肥侃嵓・・  = CFLAG:TARGET:・們メ == 3 ? EQUIP:TARGET:・肥侃嵓・・# 0

;-1縺ｫ蛻晄悄蛹悶☆繧亀FLAG繧偵Μ繧ｻ繝・ヨ
TFLAG:・БCT = -1
TFLAG:・СEACT・・･・= -1
TFLAG:ACT・・･們・・ｽ = -1
CVARSET TCVAR, GETNUM(TCVAR, "嵂雅徐・溢平"), -1
TCVAR:・溢攵・護｡ｱ・ｴ・溢侃 = -1

;・ｰ・川､代↓逕ｨ縺・ｋCFLAG繧偵Μ繧ｻ繝・ヨ
FOR LOCAL, 30, 34
	CVARSET CFLAG, LOCAL, 50
NEXT
FOR LOCAL, 250, 260
	CVARSET CFLAG, LOCAL
NEXT
TFLAG:・・･﨑廚OM・・= 0
;・溢暮未騾｣縺ｮ繝ｪ繧ｻ繝・ヨ
FOR LCOUNT, 0, CHARANUM
	VARSET EX:LCOUNT:0
	VARSET NOWEX:LCOUNT:0
	VARSET TCVAR:LCOUNT:0, 0, 70, 100
NEXT

;・川┷髢｢騾｣
CVARSET TCVAR, GETNUM(TCVAR,           "・川┷")
CVARSET TCVAR, GETNUM(TCVAR,     "・・嚮・們梵・ｸ")
CVARSET TCVAR, GETNUM(TCVAR,       "・・ｹ們・寇")
CVARSET TCVAR, GETNUM(TCVAR, "・・嚮・們怱・們・寇")
CVARSET TCVAR, GETNUM(TCVAR,       "・・ｹ們メ﨑・)
CVARSET TCVAR, GETNUM(TCVAR, "・・嚮・們怱・們メ﨑・)

;迴ｾ蝨ｨ縺ｮ・・攵・ｴ・俯巡=蟷ｳ譎ゎ符・ｼ・ｴ・俯巡
CFLAG:尞餓メ・・= LIMIT(CFLAG:尞餓メ・・ -999, 999)
CFLAG:・・攵・ｴ・俯巡 = CFLAG:尞餓メ・・/ 10
;・ｸ・壱ｪｩ・ｸ・ｴ陬・ｙ荳ｭ
SIF TEQUIP:MASTER:・ｸ・壱ｪｩ・ｸ・ｴ == 1
	CFLAG:・・攵・ｴ・俯巡 = -99

;髢句ｧ区凾縺ｮ・・川梵縺ｮ・ｬ・輔ご繝ｼ繧ｸ縺・縺ｫ縺ｪ縺｣縺ｦ縺・◆縺ｮ縺ｧ縲√％縺薙〒菫ｮ豁｣
BASE:・ｬ・・= MAXBASE:・ｬ・・;・誤ｳ繧ｲ繝ｼ繧ｸ縺ｮ險ｭ螳・BASE:MASTER:・誤ｳ = 0
MAXBASE:MASTER:・誤ｳ = 10000 - TALENT:MASTER:・ｰ・ｨ * 5000 + TALENT:MASTER:・ｫ・・* 5000
;縺ｾ縺隗｣豸医＠縺ｦ縺ｪ縺・半尞舌ｒ・・舌ヵ繧ｧ繝ｼ繧ｹ縺ｫ蜿榊ｿ・TFLAG:・ｰ・川梵・誤ｪｨ・・= CFLAG:・誤ｪｨ
TFLAG:・誤ｪｨ・・= CFLAG:MASTER:・誤ｪｨ

TCVAR:MASTER:・懋ｸｰ・・= 1000 * (BASE:MASTER:・ｬ・・+ 5000) * (MAXBASE:MASTER:・ｴ・ｱ - BASE:MASTER:・ｴ・ｱ) / ((MAXBASE:MASTER:・ｬ・・+ 5000) * MAXBASE:MASTER:・ｴ・ｱ)

;髟ｷ譛滔ｳｴ・募､逕ｨ蛻晄悄蛹門・逅・CALL ACT_M_RESEARCH_L(0)

CALLF _UNEXTRACTION(MASTER, 1, 0)	;・壱ｹｼ・・・・驕・ｻｶ蛻､螳夬伯・俾ｷｸ蛻晄悄蛹法revkoishi(14/07/15)

;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;莉雁屓縺ｮ・ｩ・ｨ
;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;・夋晏庄閭ｽ縺ｪ・・護｡ｱ・ｴ・溢侃縺後＞縺上▽縺ゅｋ縺・蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ = 0
FOR LCOUNT, 0, 12
	SIF SATISBONUS_ABLE(LCOUNT)
		蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ++
NEXT


;縺碑､堤ｾ弱′縺ゅ▲縺溘→縺阪・・ｩ・ｨ螟画峩繧帝｣帙・縺吶ｈ縺・↓
IF (!CFLAG:・護｡ｱ・ｴ && CFLAG:・誤ｪｨ <= 5 && CFLAG:MASTER:・誤ｪｨ <= 5 && CFLAG:・・尖壱ｲｨ > 4) || !蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ
	;縺雁ｰｻ繧偵＞縺倥ａ縺ｦ縺ｿ繧医≧縺九↑蜃ｦ逅・ｼ・	;縺ｪ繧薙□縺薙ｌ諢丞袖繧上°繧峨ｓ窶ｦ・｡・専ｰ∽ｸ翫′繧九⊇縺ｩ蜃ｺ縺ｫ縺上￥縺ｪ繧九・・・	;證ｫ螳壽ｮ九＠
	SELECTCASE ABL:MASTER:・｡・専ｰ・		CASE 0
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:3
		CASE 1
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:4
		CASE 2
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:6
		CASE 3
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:8
		CASE 4
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:12
	ENDSELECT
	;遒ｺ邇・〒縺・▽繧ゅ←縺翫ｊ縺ｧ縺ｪ縺・ｰｩ・ｨ繧偵→繧九ｈ縺・↓
	IF !RAND:5
		LOCAL = RAND:4
		IF BASE:MASTER:・ｴ・･ < 2 * MAXBASE:MASTER:・ｴ・･ / 3 && LOCAL == 0
			TFLAG:・溢攵・俯ｰｩ・ｨ = 4
		ELSEIF	BASE:MASTER:・ｬ・・< 9 * MAXBASE:MASTER:・ｴ・･ / 10 && LOCAL == 1
			TFLAG:・溢攵・俯ｰｩ・ｨ = 3
		ELSEIF ITEM:・罹ｪｩ・ｸ・ｴ  && LOCAL == 2
			TFLAG:・溢攵・俯ｰｩ・ｨ = 6
		;ELSEIF GETBIT(FLAG:60,0)  && LOCAL == 3
		;	TFLAG:・溢攵・俯ｰｩ・ｨ = 9
		;・母ｳ・・縺ｯ・俯ｰ應ｾ晏ｭ倥↓嵂壱共縺・′莉墓ｧ倥′縺輔□縺ｾ縺｣縺ｦ縺・↑縺・・縺ｧ蠕悟屓縺・		;ELSEIF RAND:((2 + MARK:・倆墳・・攤) * (TALENT:・壱糖 + 1)) > RAND:30
		;	TFLAG:・溢攵・俯ｰｩ・ｨ = 2
		ENDIF
	ENDIF
ENDIF

;・・宣幕蟋苦ｵｬ・・DRAWLINE
RESULT = 0
IF CFLAG:・誤ｪｨ > 5
	CALL KOJO_EVENT(11, 1)
ELSEIF CFLAG:MASTER:・誤ｪｨ > 5
	CALL KOJO_EVENT(11, 2)
ELSE
	CALL KOJO_EVENT(11)
ENDIF

LOCAL = 0
IF 蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ && CFLAG:・護｡ｱ・ｴ && CFLAG:嶸ｸ・・> 1000 && !TFLAG:・溢攵・俯ｰｩ・ｨ && CFLAG:・誤ｪｨ <= 5 && CFLAG:MASTER:・誤ｪｨ <= 5
	SKIPDISP 0
	PRINTL
	CALL PRINT_RAINBOW2W(@"笘・・%CALLNAME:TARGET%・・・・護｡ｱ ・ｴ・溢侃笘・・", 30)
	PRINTL
	;・､奝・ｨ・懊・髫帙・蜃ｦ逅・	IF FLAG:・､奝・ｨ・・> 0
		LOCAL = FLAG:・ｰ・・・護｡ｱ・ｴ・溢侃 % 100
		SIF LOCAL == 12
			LOCAL = RAND:12
		SIF !LOCAL:1 && LOCAL == 6
			LOCAL = FLAG:・ｰ・・・護｡ｱ・ｴ・溢侃 / 100
		SIF !LOCAL:2 && LOCAL == 7
			LOCAL = FLAG:・ｰ・・・護｡ｱ・ｴ・溢侃 / 100
		;驕ｸ繧薙□繧ゅ・縺悟ｮ溯｡後〒縺阪↑縺・ｴ蜷・		IF !SATISBONUS_ABLE(LOCAL)
			FOR LCOUNT, 0, 20
				SIF SATISBONUS_ABLE(LCOUNT)
					LOCAL = LCOUNT
			NEXT
		ENDIF
		PRINTFORMW %AUTO_SPLIT("・ｸ・罹ｘ・俯涵/﨑ｭ・ｸ・・ｴｴ・ｭ嶸/・母ｳ・紛/・ｩ・ｬ﨑俾ｲ・・卓・・・ｬ・・・晝ｰ・壱阜・護ｧ/・野乱・懦紛/・・侠﨑ｴ/・ｬ・・謚ｱ縺九ｌ縺溘＞/・餓ぎ﨑俾ｲ・縺九ｏ縺・′縺｣縺ｦ/繝ｩ繝ｳ繝繝", "/", LOCAL)%(・・・ｼ ・夋晨毎・ｵ・壱共
		RESULT = LOCAL
		LOCAL = 0
	;奝ｵ・√・蜃ｦ逅・	;OriginalString : (@"%HTMLBUTTON("[ 0] - ・ｸ・罹ｘ・俯涵", "0", "奝ｵ・・)%")
	;OriginalString : (@"%HTMLBUTTON("[ 1] - 﨑ｭ・ｸ・・・ｴ・ｭ嶸", "1", @"\@ 
	ELSE
		CALL KOJO_EVENT(16)
		PRINTFORMW %CALLNAME:TARGET%(・)・・・､・ｰ ・ｰ・・擽 ・駆捩 ・ｨ・ｵ・ｼ・・ ・､・們捩 ・ｴ・・揆 﨑俾ｳ ・ｶ・・ｧ ・壱ｬｸ嵂壱共
		PRINTL
		SIF SATISBONUS_ABLE(0)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 0] - ・ｸ・罹ｘ・俯涵", "0", "奝ｵ・・)%")
		SIF SATISBONUS_ABLE(1)
			{
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 1] - 﨑ｭ・ｸ・・・ｴ・ｭ嶸", "1", @"\@ 
			CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && (TALENT:TARGET:弡・ム・俯ｦｬ || ITEM:寬俯笈・､・ｴ・・ 
			? ・ｱ・・+ # ・・ｴ++ ・・ｵｬ++ ・﨑・ \@")%")
			}
		;OriginalString : (@"%HTMLBUTTON("[ 2] - ・母ｳ・紛", "2", "・母ｳ・・嵓誤椈・ｸ縺檎ｫ九▽")%")
		SIF SATISBONUS_ABLE(2)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 2] - ・母ｳ・紛", "2", "・母ｳ・・嵓誤椈・ｸ縺檎ｫ九▽")%")
		;OriginalString : (@"%HTMLBUTTON("[ 3] - ・ｩ・ｬ﨑俾ｲ・, "3", "・・ｵｬ+ ・餓ぎ+ ・﨑・+")%")
		SIF SATISBONUS_ABLE(3)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 3] - ・ｩ・ｬ﨑俾ｲ・, "3", "・・ｵｬ+ ・餓ぎ+ ・﨑・+")%")
		;OriginalString : (@"%HTMLBUTTON("[ 4] - ・卓・・・ｬ・・, "4", @"\@ 
		SIF SATISBONUS_ABLE(4)
			{
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 4] - ・卓・・・ｬ・・, "4", @"\@ 
			CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && ITEM:寬俯笈・､・ｴ・・&& !PENIS(MASTER) 
			? ・ｱ・・+ # ・・ｴ+ ・餓ぎ++ \@")%")
			}
		;OriginalString : (@"%HTMLBUTTON("[ 5] - ・晝ｰ・壱阜・護ｧ", "5", "・﨑・+ ・ｴ・・+")%")
		SIF SATISBONUS_ABLE(5)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 5] - ・晝ｰ・壱阜・護ｧ", "5", "・﨑・+ ・ｴ・・+")%")
;OriginalString : (@"%HTMLBUTTON("[ 6] - ・野乱・懦紛", "6", "・ｼ・ｸ嵓誤溢擽")%")
		SIF SATISBONUS_ABLE(6)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 6] - ・野乱・懦紛", "6", "・ｼ・ｸ嵓誤溢擽")%")
		;OriginalString : (@"%HTMLBUTTON(@"[ 7] - %CALLNAME%・們揆 ・・侠・懦う・・, "7", "・ｱ・・+")%")
		;OriginalString : (@"%HTMLBUTTON("[ 8] - ・ｬ・・, "8", "弴ｴ・昴↓繧医ｋ・・舌・繧ｹ繧ｭ繝・・")%")
		;OriginalString : (@"%HTMLBUTTON(@"[ 9] - %CALLNAME%・們乱・・・一ｸｰ・・, "9", "・ｱ・・+")%")
		;OriginalString : (@"%HTMLBUTTON(@"[10] - %CALLNAME%・們揆 ・餓ぎ﨑俾ｲ・, "10", "・餓ぎ++")%")
		;OriginalString : (@"%HTMLBUTTON(@"[11] - ・・ｬ・醐紛", "11", @"巐醐剩+ ・・ｴ++\@ 
		;嶸ｸ・・嶸ｸ・尖巡10000莉･荳翫・｣・川梵縺護桷・縺ｧ縺阪ｋ
		SIF SATISBONUS_ABLE(7)
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[ 7] - %CALLNAME%・們揆 ・・侠・懦う・・, "7", "・ｱ・・+")%")
		SIF SATISBONUS_ABLE(8)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 8] - ・ｬ・・, "8", "弴ｴ・昴↓繧医ｋ・・舌・繧ｹ繧ｭ繝・・")%")
		;嶸ｸ・・嶸ｸ・尖巡10000莉･荳・		SIF SATISBONUS_ABLE(9)
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[ 9] - %CALLNAME%・們乱・・・一ｸｰ・・, "9", "・ｱ・・+")%")
		;・倆墳・・攤縺ｪ縺励°縺､M嶸ｸ・・000莉･荳・		SIF SATISBONUS_ABLE(10)
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[10] - %CALLNAME%・們揆 ・餓ぎ﨑俾ｲ・, "10", "・餓ぎ++")%")
		;嶸ｸ・・000, M嶸ｸ・・000縺醐符・・		SIF SATISBONUS_ABLE(11)
			{
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[11] - ・・ｬ・醐紛", "11", @"巐醐剩+ ・・ｴ++\@ 
			!TALENT:MASTER:・ｨ・・?  ・ｱ・・ # \@")%")
			}
		REDRAW 0
		$INPUT_LOOP
		INPUT
		IF !SATISBONUS_ABLE(RESULT)
			CLEARLINE 1
			GOTO INPUT_LOOP
		ENDIF
		REDRAW 1
	ENDIF
	SELECTCASE RESULT
		;奝ｵ・・		CASE 0
		;﨑ｭ・ｸ
		CASE 1
		;・母ｳ・・
		CASE 2
			TFLAG:・母ｳ・・嵓誤椈・ｸ = 1
		;﨑俯糖
		CASE 3
		;繧､繝√Ε繧､繝√Ε
		CASE 4
		;・ｴ・・		CASE 5
		;・ｼ・ｸ
		CASE 6
			TEQUIP:・ｼ・ｸ嵓誤溢擽 = 1
		;・・誤豆・ｰ
		CASE 7
		;弴ｴ・・		CASE 8
		;謚ｱ縺・※
		CASE 9
		;縺罷ｴ餓ぎ
		CASE 10
		;・・ｬ・醐紛
		CASE 11
	ENDSELECT
	TFLAG:・溢攵・俯ｰｩ・ｨ = RESULT
	TCVAR:・溢攵・護｡ｱ・ｴ・溢侃 = RESULT
	;縺薙％縺ｧ繝ｪ繧ｻ繝・ヨ縺輔ｌ繧九→・溢攵・俯ｰｩ・ｨ邂・園縺ｧ縺ｮ蜿ら・縺ｫ菴ｿ縺医↑縺・・縺ｧ繧ｳ繝｡繝ｳ繝医い繧ｦ繝・	;CFLAG:・護｡ｱ・ｴ = 0
	PRINTL
	CALL KOJO_EVENT(16, 1)
	CALL VOIDLINE_IF(RESULT)
	SIF TFLAG:・溢攵・俯ｰｩ・ｨ != 8
		PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・・ｵ・・・､・ｼ・ｴ ・ｰ・川攪 ・・・･ｼ ・懍梠嵂壱共
	LOCAL = 1
	IF FLAG:・､奝・ｨ・・> 0 && FLAG:・､奝・ｨ・懦像・懍└・・== 1
		SKIPDISP 1
	ENDIF
ENDIF

IF !LOCAL && TFLAG:・溢攵・俯ｰｩ・ｨ
	CALL KOJO_EVENT(17)
	CALL VOIDLINE_IF(RESULT)
ENDIF

;・ｩ・ｨ豎ｺ螳壼ｾ後・蝨ｰ縺ｮ譁・SELECTCASE POLICY("・溢攵")
	CASE "奝ｵ・・
	CASE "﨑ｭ・ｸ"
		{
		PRINTFORMW ・ｴ・・CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・禄@ CFLAG:・護｡ｱ・ｴ 
		? 繝ｪ繧ｯ繧ｨ繧ｹ繝医↓蠢懊∴縲・# \@﨑ｭ・ｸ繧帝幕逋ｺ縺吶ｋ縺薙→縺ｫ豎ｺ繧√◆窶ｦ
		}
	CASE "・母ｳ・・"
		{
		PRINTFORMW %CALLNAME:TARGET%(・)・・%CALLNAME:MASTER%\@ CFLAG:・護｡ｱ・ｴ 
		? 縺ｮ繝ｪ繧ｯ繧ｨ繧ｹ繝医↓蠢懊∴縲・# 縺ｫ \@・母ｳ・・繧偵☆繧九％縺ｨ縺ｫ嵂壱共窶ｦ
		}
	CASE "﨑俯糖"
		{
		PRINTFORMW %CALLNAME:TARGET%(・)・・\@ CFLAG:・護｡ｱ・ｴ 
		? %CALLNAME:MASTER%・・繝ｪ繧ｯ繧ｨ繧ｹ繝医↓蠢懊∴縲・# \@縺・▽繧ゅｈ繧頑ｿ縺励￥・・舌☆繧九％縺ｨ縺ｫ嵂壱共窶ｦ
		}
	CASE "繧､繝√Ε繧､繝√Ε"
		PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・川ｧ・﨑ｴ, ・・Η﨑俾ｲ・・ｴ・溢葺・､窶ｦ 
	CASE "・ｴ・・     ;蝸懆剞縺ｨ・菩囎縺ｨ險縺｣縺ｦ繧りｦ√☆繧九↓・ｴ・∫ｳｻ縺ｨ縺・≧縺縺代↑繧薙〒蠕ｮ螯吶↑豌励・縺吶ｋ
		PRINTFORMW %CALLNAME:TARGET%(・)・・・ｰ﨑呟ｳｼ ・菩囎・・・ｸ・・・溢愍・・%CALLNAME:MASTER%(・・・ｼ ・卓亨﨑ｴ ・罷共窶ｦ
	CASE "・ｼ・ｸ"
		PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・ｩ・ｸ・ｴ・ｼ ・呷擽・・﨑俯ｩｴ, ・ｸ・懍攪 ・・・･ｼ ・懍梠嵂壱共窶ｦ
	;莉･荳九√＃隍堤ｾ弱〒縺励°蜃ｺ縺ｪ縺・	CASE "・・誤豆・ｰ"
		PRINTFORMW %CALLNAME:TARGET%(・)・・・・擽・ｼ ・ｴ・､ ・ｼ・罹株 ・・攪 ・ｰ・・罹ｶ奓ｰ%CALLNAME:MASTER%・・・肥ｧ・・､・・､・・・・罷共窶ｦ
	CASE "弴ｴ・・
		;弴ｴ・昴・NFO.ERB縺ｫ蜃ｦ逅・ｒ遘ｻ蜍・	CASE "謚ｱ縺・※"
		{
		PRINTFORMW %CALLNAME:TARGET%(・)・・・・壱ｶ奓ｰ ・一ｸｰ・・・・乱・・・ｰ・・・・・ｴ・ｼ ・ｨ・・ｳ ・・・・ｶ・・・・壱株 %CALLNAME:MASTER%(・・・ｼ\@ 
		!TALENT:・壱糖 ? 蜆ｪ縺励￥ # \@謚ｱ縺榊ｯ・○縺溪ｦ
		}
	CASE "縺罷ｴ餓ぎ"
		PRINTFORMW %CALLNAME:TARGET%(・)・・・ｰ孖ｹ﨑・・懍攪(・・ｭ)・・・護｡ｱ・ｸ ・ｸ・誤･ｼ ・・垈・ｴ・・ %CALLNAME:MASTER%(・・・ｼ ・壱洳 ・・ ・ｸ ・ｸ・ｬ・ｼ ・・Η﨑俾ｲ・・ｴ・ｨ・護｡誤共窶ｦ
	CASE "・・ｬ・醐紛"
		PRINTFORMW %CALLNAME:TARGET%(・)・・・ｸ・護ｧ・ｼ・ｴ・・%CALLNAME:MASTER%・・・・護寥・ｸ, ・｡・・・ｴ・ｸ・ｸ・・・・ｧ樌ｶ､嵂壱共窶ｦ
ENDSELECT

;・溢攵・俯ｰｩ・ｨ蝨ｰ縺ｮ譁・ｒ謚懊￠縺ｦ縺九ｉ繝ｪ繧ｻ繝・ヨ
CFLAG:・護｡ｱ・ｴ = 0

IF FLAG:・､奝・ｨ・・> 0 && FLAG:・､奝・ｨ・懦像・懍└・・== 1
	CALL SHOW_AUTOMODE_UPCHECK, 1
	SKIPDISP 0
	DRAWLINE
	PRINTFORML {FLAG:・ｰ・・1}・кFLAG:・ｼ・・1}・ｼ・ｸ(%GET_TIME()%) %GET_SEASON()% %GET_DAY()%・・嵂・縲・ｨ寬ｸ・假ｼ・CALLNAME:1%
	DRAWLINE
	SKIPDISP 1
ENDIF

;・・護｡ｱ・ｴ・溢侃縺ｮ蜿ｯ蜷ｦ
@SATISBONUS_ABLE(ARG)
#FUNCTION
;・・護｡ｱ・ｴ・溢侃閾ｪ菴薙′・餓攤縺輔ｌ縺ｦ縺・ｌ縺ｰ0繧定ｿ斐☆
SIF CFLAG:・・護｡ｱ・ｴ・溢侃・餓攤
	RETURNF 0
SELECTCASE ARG
	;・ｸ・罹ｘ・俯涵
	CASE 0
	;﨑ｭ・ｸ・・ｴｴ・ｭ嶸
	CASE 1
	;・母ｳ・紛
	CASE 2
	;・ｩ・ｬ﨑俾ｲ・	CASE 3
	;・卓・・・ｬ・・	CASE 4
	;・晝ｰ・壱阜・護ｧ
	CASE 5
	;・野乱・懦紛
	CASE 6
		SIF !ITEM:・罹ｪｩ・ｸ・ｴ
			RETURNF 0
	;・・侠﨑ｴ
	CASE 7
		SIF !(CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && !TALENT:・・侠 && FLAG:・・侠 && !TALENT:・ｨ・・&& PENIS(MASTER))
			RETURNF 0
	;・ｬ・・	CASE 8
	;・溢符・ｬ・ｼ・ｴ
	CASE 9
		SIF !(CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && !TALENT:MASTER:・ｨ・・&& (TALENT:弡・ム・俯ｦｬ || ITEM:寬俯笈・､・ｴ・・)
			RETURNF 0
	;・餓ぎ﨑俾ｲ・	CASE 10
		SIF !(!MARK:・倆墳・・攤 && CFLAG:M嶸ｸ・・>= 1000)
			RETURNF 0
	;縺九ｏ縺・′縺｣縺ｦ
	CASE 11
		SIF !(CFLAG:嶸ｸ・・>= 2000 && CFLAG:M嶸ｸ・・>= 1000)
			RETURNF 0
	[SKIPSTART]
	螳溯｣・☆繧句ｴ蜷医・繝壹ル繝舌Φ縺ｨ謗剃ｻ悶↓縺吶∋縺阪°・・	縺ｨ縺・≧縺倶ｻ頑峩蛻･譫縺ｧ繧・ｋ諢丞袖縺ｯ阮・＞縲ゅｄ繧九↑繧雅ｰｩ・ｨ[9]縺ｨ邨ｱ蜷医＠縺ｦ蜀・Κ縺ｧ蛻・￠繧区婿縺後＞縺・°縺ｪ
	;蟄輔∪縺帙※
	CASE 12
		SIF !(CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && !TALENT:MASTER:・・侠 && FLAG:・・尖劇・・桷・ && !TALENT:MASTER:・ｨ・・&& TALENT:弡・ム・俯ｦｬ)
			RETURN 0
	[SKIPEND]
	;譛ｪ螳夂ｾｩ
	CASEELSE
		RETURNF 0
ENDSELECT
;蛟句挨縺ｫ・餓攤縺輔ｌ縺ｦ縺・↑縺代ｌ縺ｰ
RETURNF !CFLAG:(1200+ARG)


;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;豎壹ｌ縺ｮ繝ｪ繧ｻ繝・ヨ
;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
@STAIN_RESET
RESET_STAIN MASTER
RESET_STAIN TARGET
SIF ASSI:1 >= 0
	RESET_STAIN ASSI:1
SIF ASSI:2 >= 0
	RESET_STAIN ASSI:2
SIF ASSI:3 >= 0
	RESET_STAIN ASSI:3
=======
・ｿ;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;・・宣幕蟋九・蜃ｦ逅・
;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
@EVENTTRAIN
#DIM LCOUNT
#DIM 蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ

;(・・川梵蛻･)・・戦圈・伜刈邂・
CFLAG:・・戦圈・・+

;・・宣幕蟋狗峩蜑阪↓・壱･豸郁ｲｻ蜃ｦ逅・ｒ縺ｯ縺輔・(・誤糖・菩侃縺ｮ縺ｿ縲∵欠螳壽凾)
SIF FLAG:・ｨ・・== 1 && FLAG:AI・川悛・・
	CALL MANAGE_MP

FLAG:・ｰ・川､・= 1
;・們メ繧棚nitialize
TEQUIP:MASTER:・・┷・罹ｦｬ = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:・・┷・罹ｦｬ # 0
TEQUIP:MASTER:・・懍譜       = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:・・懍譜 # 0
TEQUIP:MASTER:﨑俯ｰ們侠・作亶 = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:﨑俯ｰ們侠・作亶 # 0
TEQUIP:MASTER:・・ｰ們侠・作亶 = CFLAG:MASTER:・們メ < 2 ? EQUIP:MASTER:・・ｰ們侠・作亶 # 0
TEQUIP:MASTER:﨑俯ｰ們侠・餓亶 = CFLAG:MASTER:・們メ < 1 ? EQUIP:MASTER:﨑俯ｰ們侠・餓亶 # 0
TEQUIP:MASTER:・・ｰ們侠・餓亶 = CFLAG:MASTER:・們メ < 1 ? EQUIP:MASTER:・・ｰ們侠・餓亶 # 0
TEQUIP:MASTER:・・侠・餓亶   = CFLAG:MASTER:・們メ < 1 ? EQUIP:MASTER:・・侠・餓亶 # 0
TEQUIP:MASTER:・肥侃嵓・・  = CFLAG:MASTER:・們メ == 3 ? EQUIP:MASTER:・肥侃嵓・・# 0

TEQUIP:MASTER:・ｸ・壱ｪｩ・ｸ・ｴ = EQUIP:MASTER:・ｸ・壱ｪｩ・ｸ・ｴ

TEQUIP:・・┷・罹ｦｬ = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:・・┷・罹ｦｬ # 0
TEQUIP:・・懍譜       = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:・・懍譜 # 0
TEQUIP:﨑俯ｰ們侠・作亶 = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:﨑俯ｰ們侠・作亶 # 0
TEQUIP:・・ｰ們侠・作亶 = CFLAG:TARGET:・們メ < 2 ? EQUIP:TARGET:・・ｰ們侠・作亶 # 0
TEQUIP:﨑俯ｰ們侠・餓亶 = CFLAG:TARGET:・們メ < 1 ? EQUIP:TARGET:﨑俯ｰ們侠・餓亶 # 0
TEQUIP:・・ｰ們侠・餓亶 = CFLAG:TARGET:・們メ < 1 ? EQUIP:TARGET:・・ｰ們侠・餓亶 # 0
TEQUIP:・・侠・餓亶   = CFLAG:TARGET:・們メ < 1 ? EQUIP:TARGET:・・侠・餓亶 # 0
TEQUIP:・肥侃嵓・・  = CFLAG:TARGET:・們メ == 3 ? EQUIP:TARGET:・肥侃嵓・・# 0

;-1縺ｫ蛻晄悄蛹悶☆繧亀FLAG繧偵Μ繧ｻ繝・ヨ
TFLAG:・БCT = -1
TFLAG:・СEACT・・･・= -1
TFLAG:ACT・・･們・・ｽ = -1
CVARSET TCVAR, GETNUM(TCVAR, "嵂雅徐・溢平"), -1
TCVAR:・溢攵・護｡ｱ・ｴ・溢侃 = -1

;・ｰ・川､代↓逕ｨ縺・ｋCFLAG繧偵Μ繧ｻ繝・ヨ
FOR LOCAL, 30, 34
	CVARSET CFLAG, LOCAL, 50
NEXT
FOR LOCAL, 250, 260
	CVARSET CFLAG, LOCAL
NEXT
TFLAG:・・･﨑廚OM・・= 0
;・溢暮未騾｣縺ｮ繝ｪ繧ｻ繝・ヨ
FOR LCOUNT, 0, CHARANUM
	VARSET EX:LCOUNT:0
	VARSET NOWEX:LCOUNT:0
	VARSET TCVAR:LCOUNT:0, 0, 70, 100
NEXT

;・川┷髢｢騾｣
CVARSET TCVAR, GETNUM(TCVAR,           "・川┷")
CVARSET TCVAR, GETNUM(TCVAR,     "・・嚮・們梵・ｸ")
CVARSET TCVAR, GETNUM(TCVAR,       "・・ｹ們・寇")
CVARSET TCVAR, GETNUM(TCVAR, "・・嚮・們怱・們・寇")
CVARSET TCVAR, GETNUM(TCVAR,       "・・ｹ們メ﨑・)
CVARSET TCVAR, GETNUM(TCVAR, "・・嚮・們怱・們メ﨑・)

;迴ｾ蝨ｨ縺ｮ・・攵・ｴ・俯巡=蟷ｳ譎ゎ符・ｼ・ｴ・俯巡
CFLAG:尞餓メ・・= LIMIT(CFLAG:尞餓メ・・ -999, 999)
CFLAG:・・攵・ｴ・俯巡 = CFLAG:尞餓メ・・/ 10
;・ｸ・壱ｪｩ・ｸ・ｴ陬・ｙ荳ｭ
SIF TEQUIP:MASTER:・ｸ・壱ｪｩ・ｸ・ｴ == 1
	CFLAG:・・攵・ｴ・俯巡 = -99

;髢句ｧ区凾縺ｮ・・川梵縺ｮ・ｬ・輔ご繝ｼ繧ｸ縺・縺ｫ縺ｪ縺｣縺ｦ縺・◆縺ｮ縺ｧ縲√％縺薙〒菫ｮ豁｣
BASE:・ｬ・・= MAXBASE:・ｬ・・
;・誤ｳ繧ｲ繝ｼ繧ｸ縺ｮ險ｭ螳・
BASE:MASTER:・誤ｳ = 0
MAXBASE:MASTER:・誤ｳ = 10000 - TALENT:MASTER:・ｰ・ｨ * 5000 + TALENT:MASTER:・ｫ・・* 5000
;縺ｾ縺隗｣豸医＠縺ｦ縺ｪ縺・半尞舌ｒ・・舌ヵ繧ｧ繝ｼ繧ｹ縺ｫ蜿榊ｿ・
TFLAG:・ｰ・川梵・誤ｪｨ・・= CFLAG:・誤ｪｨ
TFLAG:・誤ｪｨ・・= CFLAG:MASTER:・誤ｪｨ

TCVAR:MASTER:・懋ｸｰ・・= 1000 * (BASE:MASTER:・ｬ・・+ 5000) * (MAXBASE:MASTER:・ｴ・ｱ - BASE:MASTER:・ｴ・ｱ) / ((MAXBASE:MASTER:・ｬ・・+ 5000) * MAXBASE:MASTER:・ｴ・ｱ)

;髟ｷ譛滔ｳｴ・募､逕ｨ蛻晄悄蛹門・逅・
CALL ACT_M_RESEARCH_L(0)

CALLF _UNEXTRACTION(MASTER, 1, 0)	;・壱ｹｼ・・・・驕・ｻｶ蛻､螳夬伯・俾ｷｸ蛻晄悄蛹法revkoishi(14/07/15)

;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;莉雁屓縺ｮ・ｩ・ｨ
;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;・夋晏庄閭ｽ縺ｪ・・護｡ｱ・ｴ・溢侃縺後＞縺上▽縺ゅｋ縺・
蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ = 0
FOR LCOUNT, 0, 12
	SIF SATISBONUS_ABLE(LCOUNT)
		蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ++
NEXT


;縺碑､堤ｾ弱′縺ゅ▲縺溘→縺阪・・ｩ・ｨ螟画峩繧帝｣帙・縺吶ｈ縺・↓
IF (!CFLAG:・護｡ｱ・ｴ && CFLAG:・誤ｪｨ <= 5 && CFLAG:MASTER:・誤ｪｨ <= 5 && CFLAG:・・尖壱ｲｨ > 4) || !蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ
	;縺雁ｰｻ繧偵＞縺倥ａ縺ｦ縺ｿ繧医≧縺九↑蜃ｦ逅・ｼ・
	;縺ｪ繧薙□縺薙ｌ諢丞袖繧上°繧峨ｓ窶ｦ・｡・専ｰ∽ｸ翫′繧九⊇縺ｩ蜃ｺ縺ｫ縺上￥縺ｪ繧九・・・
	;證ｫ螳壽ｮ九＠
	SELECTCASE ABL:MASTER:・｡・専ｰ・
		CASE 0
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:3
		CASE 1
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:4
		CASE 2
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:6
		CASE 3
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:8
		CASE 4
			TFLAG:・溢攵・俯ｰｩ・ｨ = !RAND:12
	ENDSELECT
	;遒ｺ邇・〒縺・▽繧ゅ←縺翫ｊ縺ｧ縺ｪ縺・ｰｩ・ｨ繧偵→繧九ｈ縺・↓
	IF !RAND:5
		LOCAL = RAND:4
		IF BASE:MASTER:・ｴ・･ < 2 * MAXBASE:MASTER:・ｴ・･ / 3 && LOCAL == 0
			TFLAG:・溢攵・俯ｰｩ・ｨ = 4
		ELSEIF	BASE:MASTER:・ｬ・・< 9 * MAXBASE:MASTER:・ｴ・･ / 10 && LOCAL == 1
			TFLAG:・溢攵・俯ｰｩ・ｨ = 3
		ELSEIF ITEM:・罹ｪｩ・ｸ・ｴ  && LOCAL == 2
			TFLAG:・溢攵・俯ｰｩ・ｨ = 6
		;ELSEIF GETBIT(FLAG:60,0)  && LOCAL == 3
		;	TFLAG:・溢攵・俯ｰｩ・ｨ = 9
		;・母ｳ・・縺ｯ・俯ｰ應ｾ晏ｭ倥↓嵂壱共縺・′莉墓ｧ倥′縺輔□縺ｾ縺｣縺ｦ縺・↑縺・・縺ｧ蠕悟屓縺・
		;ELSEIF RAND:((2 + MARK:・倆墳・・攤) * (TALENT:・壱糖 + 1)) > RAND:30
		;	TFLAG:・溢攵・俯ｰｩ・ｨ = 2
		ENDIF
	ENDIF
ENDIF

;・・宣幕蟋苦ｵｬ・・
DRAWLINE
RESULT = 0
IF CFLAG:・誤ｪｨ > 5
	CALL KOJO_EVENT(11, 1)
ELSEIF CFLAG:MASTER:・誤ｪｨ > 5
	CALL KOJO_EVENT(11, 2)
ELSE
	CALL KOJO_EVENT(11)
ENDIF

LOCAL = 0
IF 蜿ｯ閭ｽ・護｡ｱ・ｴ謨ｰ && CFLAG:・護｡ｱ・ｴ && CFLAG:嶸ｸ・・> 1000 && !TFLAG:・溢攵・俯ｰｩ・ｨ && CFLAG:・誤ｪｨ <= 5 && CFLAG:MASTER:・誤ｪｨ <= 5
	SKIPDISP 0
	PRINTL
	CALL PRINT_RAINBOW2W(@"笘・・%CALLNAME:TARGET%・・・・護｡ｱ ・ｴ・溢侃笘・・", 30)
	PRINTL
	;・､奝・ｨ・懊・髫帙・蜃ｦ逅・
	IF FLAG:・､奝・ｨ・・> 0
		LOCAL = FLAG:・ｰ・・・護｡ｱ・ｴ・溢侃 % 100
		SIF LOCAL == 12
			LOCAL = RAND:12
		SIF !LOCAL:1 && LOCAL == 6
			LOCAL = FLAG:・ｰ・・・護｡ｱ・ｴ・溢侃 / 100
		SIF !LOCAL:2 && LOCAL == 7
			LOCAL = FLAG:・ｰ・・・護｡ｱ・ｴ・溢侃 / 100
		;驕ｸ繧薙□繧ゅ・縺悟ｮ溯｡後〒縺阪↑縺・ｴ蜷・
		IF !SATISBONUS_ABLE(LOCAL)
			FOR LCOUNT, 0, 20
				SIF SATISBONUS_ABLE(LCOUNT)
					LOCAL = LCOUNT
			NEXT
		ENDIF
		PRINTFORMW %AUTO_SPLIT("・ｸ・罹ｘ・俯涵/﨑ｭ・ｸ・・ｴｴ・ｭ嶸/・母ｳ・紛/・ｩ・ｬ﨑俾ｲ・・卓・・・ｬ・・・晝ｰ・壱阜・護ｧ/・野乱・懦紛/・・侠﨑ｴ/・ｬ・・謚ｱ縺九ｌ縺溘＞/・餓ぎ﨑俾ｲ・縺九ｏ縺・′縺｣縺ｦ/繝ｩ繝ｳ繝繝", "/", LOCAL)%(・・・ｼ ・夋晨毎・ｵ・壱共
		RESULT = LOCAL
		LOCAL = 0
	;奝ｵ・√・蜃ｦ逅・
	;OriginalString : (@"%HTMLBUTTON("[ 0] - ・ｸ・罹ｘ・俯涵", "0", "奝ｵ・・)%")
	;OriginalString : (@"%HTMLBUTTON("[ 1] - 﨑ｭ・ｸ・・・ｴ・ｭ嶸", "1", @"\@ 
	ELSE
		CALL KOJO_EVENT(16)
		PRINTFORMW %CALLNAME:TARGET%(・)・・・､・ｰ ・ｰ・・擽 ・駆捩 ・ｨ・ｵ・ｼ・・ ・､・們捩 ・ｴ・・揆 﨑俾ｳ ・ｶ・・ｧ ・壱ｬｸ嵂壱共
		PRINTL
		SIF SATISBONUS_ABLE(0)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 0] - ・ｸ・罹ｘ・俯涵", "0", "奝ｵ・・)%")
		SIF SATISBONUS_ABLE(1)
			{
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 1] - 﨑ｭ・ｸ・・・ｴ・ｭ嶸", "1", @"\@ 
			CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && (TALENT:TARGET:弡・ム・俯ｦｬ || ITEM:寬俯笈・､・ｴ・・ 
			? ・ｱ・・+ # ・・ｴ++ ・・ｵｬ++ ・﨑・ \@")%")
			}
		;OriginalString : (@"%HTMLBUTTON("[ 2] - ・母ｳ・紛", "2", "・母ｳ・・嵓誤椈・ｸ縺檎ｫ九▽")%")
		SIF SATISBONUS_ABLE(2)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 2] - ・母ｳ・紛", "2", "・母ｳ・・嵓誤椈・ｸ縺檎ｫ九▽")%")
		;OriginalString : (@"%HTMLBUTTON("[ 3] - ・ｩ・ｬ﨑俾ｲ・, "3", "・・ｵｬ+ ・餓ぎ+ ・﨑・+")%")
		SIF SATISBONUS_ABLE(3)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 3] - ・ｩ・ｬ﨑俾ｲ・, "3", "・・ｵｬ+ ・餓ぎ+ ・﨑・+")%")
		;OriginalString : (@"%HTMLBUTTON("[ 4] - ・卓・・・ｬ・・, "4", @"\@ 
		SIF SATISBONUS_ABLE(4)
			{
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 4] - ・卓・・・ｬ・・, "4", @"\@ 
			CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && ITEM:寬俯笈・､・ｴ・・&& !PENIS(MASTER) 
			? ・ｱ・・+ # ・・ｴ+ ・餓ぎ++ \@")%")
			}
		;OriginalString : (@"%HTMLBUTTON("[ 5] - ・晝ｰ・壱阜・護ｧ", "5", "・﨑・+ ・ｴ・・+")%")
		SIF SATISBONUS_ABLE(5)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 5] - ・晝ｰ・壱阜・護ｧ", "5", "・﨑・+ ・ｴ・・+")%")
;OriginalString : (@"%HTMLBUTTON("[ 6] - ・野乱・懦紛", "6", "・ｼ・ｸ嵓誤溢擽")%")
		SIF SATISBONUS_ABLE(6)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 6] - ・野乱・懦紛", "6", "・ｼ・ｸ嵓誤溢擽")%")
		;OriginalString : (@"%HTMLBUTTON(@"[ 7] - %CALLNAME%・們揆 ・・侠・懦う・・, "7", "・ｱ・・+")%")
		;OriginalString : (@"%HTMLBUTTON("[ 8] - ・ｬ・・, "8", "弴ｴ・昴↓繧医ｋ・・舌・繧ｹ繧ｭ繝・・")%")
		;OriginalString : (@"%HTMLBUTTON(@"[ 9] - %CALLNAME%・們乱・・・一ｸｰ・・, "9", "・ｱ・・+")%")
		;OriginalString : (@"%HTMLBUTTON(@"[10] - %CALLNAME%・們揆 ・餓ぎ﨑俾ｲ・, "10", "・餓ぎ++")%")
		;OriginalString : (@"%HTMLBUTTON(@"[11] - ・・ｬ・醐紛", "11", @"巐醐剩+ ・・ｴ++\@ 
		;嶸ｸ・・嶸ｸ・尖巡10000莉･荳翫・｣・川梵縺護桷・縺ｧ縺阪ｋ
		SIF SATISBONUS_ABLE(7)
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[ 7] - %CALLNAME%・們揆 ・・侠・懦う・・, "7", "・ｱ・・+")%")
		SIF SATISBONUS_ABLE(8)
			CALL HTMLPRINTL(@"%HTMLBUTTON("[ 8] - ・ｬ・・, "8", "弴ｴ・昴↓繧医ｋ・・舌・繧ｹ繧ｭ繝・・")%")
		;嶸ｸ・・嶸ｸ・尖巡10000莉･荳・
		SIF SATISBONUS_ABLE(9)
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[ 9] - %CALLNAME%・們乱・・・一ｸｰ・・, "9", "・ｱ・・+")%")
		;・倆墳・・攤縺ｪ縺励°縺､M嶸ｸ・・000莉･荳・
		SIF SATISBONUS_ABLE(10)
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[10] - %CALLNAME%・們揆 ・餓ぎ﨑俾ｲ・, "10", "・餓ぎ++")%")
		;嶸ｸ・・000, M嶸ｸ・・000縺醐符・・
		SIF SATISBONUS_ABLE(11)
			{
			CALL HTMLPRINTL(@"%HTMLBUTTON(@"[11] - ・・ｬ・醐紛", "11", @"巐醐剩+ ・・ｴ++\@ 
			!TALENT:MASTER:・ｨ・・?  ・ｱ・・ # \@")%")
			}
		REDRAW 0
		$INPUT_LOOP
		INPUT
		IF !SATISBONUS_ABLE(RESULT)
			CLEARLINE 1
			GOTO INPUT_LOOP
		ENDIF
		REDRAW 1
	ENDIF
	SELECTCASE RESULT
		;奝ｵ・・
		CASE 0
		;﨑ｭ・ｸ
		CASE 1
		;・母ｳ・・
		CASE 2
			TFLAG:・母ｳ・・嵓誤椈・ｸ = 1
		;﨑俯糖
		CASE 3
		;繧､繝√Ε繧､繝√Ε
		CASE 4
		;・ｴ・・
		CASE 5
		;・ｼ・ｸ
		CASE 6
			TEQUIP:・ｼ・ｸ嵓誤溢擽 = 1
		;・・誤豆・ｰ
		CASE 7
		;弴ｴ・・
		CASE 8
		;謚ｱ縺・※
		CASE 9
		;縺罷ｴ餓ぎ
		CASE 10
		;・・ｬ・醐紛
		CASE 11
	ENDSELECT
	TFLAG:・溢攵・俯ｰｩ・ｨ = RESULT
	TCVAR:・溢攵・護｡ｱ・ｴ・溢侃 = RESULT
	;縺薙％縺ｧ繝ｪ繧ｻ繝・ヨ縺輔ｌ繧九→・溢攵・俯ｰｩ・ｨ邂・園縺ｧ縺ｮ蜿ら・縺ｫ菴ｿ縺医↑縺・・縺ｧ繧ｳ繝｡繝ｳ繝医い繧ｦ繝・
	;CFLAG:・護｡ｱ・ｴ = 0
	PRINTL
	CALL KOJO_EVENT(16, 1)
	CALL VOIDLINE_IF(RESULT)
	SIF TFLAG:・溢攵・俯ｰｩ・ｨ != 8
		PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・・ｵ・・・､・ｼ・ｴ ・ｰ・川攪 ・・・･ｼ ・懍梠嵂壱共
	LOCAL = 1
	IF FLAG:・､奝・ｨ・・> 0 && FLAG:・､奝・ｨ・懦像・懍└・・== 1
		SKIPDISP 1
	ENDIF
ENDIF

IF !LOCAL && TFLAG:・溢攵・俯ｰｩ・ｨ
	CALL KOJO_EVENT(17)
	CALL VOIDLINE_IF(RESULT)
ENDIF

;・ｩ・ｨ豎ｺ螳壼ｾ後・蝨ｰ縺ｮ譁・
SELECTCASE POLICY("・溢攵")
	CASE "奝ｵ・・
	CASE "﨑ｭ・ｸ"
		{
		PRINTFORMW ・ｴ・・CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・禄@ CFLAG:・護｡ｱ・ｴ 
		? 繝ｪ繧ｯ繧ｨ繧ｹ繝医↓蠢懊∴縲・# \@﨑ｭ・ｸ繧帝幕逋ｺ縺吶ｋ縺薙→縺ｫ豎ｺ繧√◆窶ｦ
		}
	CASE "・母ｳ・・"
		{
		PRINTFORMW %CALLNAME:TARGET%(・)・・%CALLNAME:MASTER%\@ CFLAG:・護｡ｱ・ｴ 
		? 縺ｮ繝ｪ繧ｯ繧ｨ繧ｹ繝医↓蠢懊∴縲・# 縺ｫ \@・母ｳ・・繧偵☆繧九％縺ｨ縺ｫ嵂壱共窶ｦ
		}
	CASE "﨑俯糖"
		{
		PRINTFORMW %CALLNAME:TARGET%(・)・・\@ CFLAG:・護｡ｱ・ｴ 
		? %CALLNAME:MASTER%・・繝ｪ繧ｯ繧ｨ繧ｹ繝医↓蠢懊∴縲・# \@縺・▽繧ゅｈ繧頑ｿ縺励￥・・舌☆繧九％縺ｨ縺ｫ嵂壱共窶ｦ
		}
	CASE "繧､繝√Ε繧､繝√Ε"
		PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・川ｧ・﨑ｴ, ・・Η﨑俾ｲ・・ｴ・溢葺・､窶ｦ 
	CASE "・ｴ・・     ;蝸懆剞縺ｨ・菩囎縺ｨ險縺｣縺ｦ繧りｦ√☆繧九↓・ｴ・∫ｳｻ縺ｨ縺・≧縺縺代↑繧薙〒蠕ｮ螯吶↑豌励・縺吶ｋ
		PRINTFORMW %CALLNAME:TARGET%(・)・・・ｰ﨑呟ｳｼ ・菩囎・・・ｸ・・・溢愍・・%CALLNAME:MASTER%(・・・ｼ ・卓亨﨑ｴ ・罷共窶ｦ
	CASE "・ｼ・ｸ"
		PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・ｩ・ｸ・ｴ・ｼ ・呷擽・・﨑俯ｩｴ(・・, ・ｸ・懍攪 ・・・･ｼ ・懍梠嵂壱共窶ｦ
	;莉･荳九√＃隍堤ｾ弱〒縺励°蜃ｺ縺ｪ縺・
	CASE "・・誤豆・ｰ"
		PRINTFORMW %CALLNAME:TARGET%(・)・・・・擽・ｼ ・ｴ・､ ・ｼ・罹株 ・・攪 ・ｰ・・罹ｶ奓ｰ%CALLNAME:MASTER%・・・肥ｧ・・､・・､・・・・罷共窶ｦ
	CASE "弴ｴ・・
		;弴ｴ・昴・NFO.ERB縺ｫ蜃ｦ逅・ｒ遘ｻ蜍・
	CASE "謚ｱ縺・※"
		{
		PRINTFORMW %CALLNAME:TARGET%(・)・・・・壱ｶ奓ｰ ・一ｸｰ・・・・乱・・・ｰ・・・・・ｴ・ｼ ・ｨ・・ｳ ・・・・ｶ・・・・壱共%CALLNAME:MASTER%(・・・ｼ\@ 
		!TALENT:・壱糖 ? 蜆ｪ縺励￥ # \@謚ｱ縺榊ｯ・○縺溪ｦ
		}
	CASE "縺罷ｴ餓ぎ"
		PRINTFORMW %CALLNAME:TARGET%(・)・・・ｰ孖ｹ﨑・・懍攪(・・ｭ)・・・護｡ｱ・ｸ ・ｸ・誤･ｼ ・・垈・ｴ・・%CALLNAME:MASTER%(・・・ｼ ・壱洳 ・・ ・ｸ ・ｸ・ｬ・ｼ ・・Η﨑俾ｲ・・ｴ・ｨ・護｡誤共窶ｦ
	CASE "・・ｬ・醐紛"
		PRINTFORMW %CALLNAME:TARGET%(・)・・・ｸ・護ｧ・ｼ・ｴ・・%CALLNAME:MASTER%・・・・護寥・ｸ, ・｡・・・ｴ・ｸ・ｸ・・・・ｧ樌ｶ､嵂壱共窶ｦ
ENDSELECT

;・溢攵・俯ｰｩ・ｨ蝨ｰ縺ｮ譁・ｒ謚懊￠縺ｦ縺九ｉ繝ｪ繧ｻ繝・ヨ
CFLAG:・護｡ｱ・ｴ = 0

IF FLAG:・､奝・ｨ・・> 0 && FLAG:・､奝・ｨ・懦像・懍└・・== 1
	CALL SHOW_AUTOMODE_UPCHECK, 1
	SKIPDISP 0
	DRAWLINE
	PRINTFORML {FLAG:・ｰ・・1}・кFLAG:・ｼ・・1}・ｼ・ｸ(%GET_TIME()%) %GET_SEASON()% %GET_DAY()%・・嵂・縲・ｨ寬ｸ・假ｼ・CALLNAME:1%
	DRAWLINE
	SKIPDISP 1
ENDIF

;・・護｡ｱ・ｴ・溢侃縺ｮ蜿ｯ蜷ｦ
@SATISBONUS_ABLE(ARG)
#FUNCTION
;・・護｡ｱ・ｴ・溢侃閾ｪ菴薙′・餓攤縺輔ｌ縺ｦ縺・ｌ縺ｰ0繧定ｿ斐☆
SIF CFLAG:・・護｡ｱ・ｴ・溢侃・餓攤
	RETURNF 0
SELECTCASE ARG
	;・ｸ・罹ｘ・俯涵
	CASE 0
	;﨑ｭ・ｸ・・ｴｴ・ｭ嶸
	CASE 1
	;・母ｳ・紛
	CASE 2
	;・ｩ・ｬ﨑俾ｲ・
	CASE 3
	;・卓・・・ｬ・・
	CASE 4
	;・晝ｰ・壱阜・護ｧ
	CASE 5
	;・野乱・懦紛
	CASE 6
		SIF !ITEM:・罹ｪｩ・ｸ・ｴ
			RETURNF 0
	;・・侠﨑ｴ
	CASE 7
		SIF !(CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && !TALENT:・・侠 && FLAG:・・侠 && !TALENT:・ｨ・・&& PENIS(MASTER))
			RETURNF 0
	;・ｬ・・
	CASE 8
	;・溢符・ｬ・ｼ・ｴ
	CASE 9
		SIF !(CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && !TALENT:MASTER:・ｨ・・&& (TALENT:弡・ム・俯ｦｬ || ITEM:寬俯笈・､・ｴ・・)
			RETURNF 0
	;・餓ぎ﨑俾ｲ・
	CASE 10
		SIF !(!MARK:・倆墳・・攤 && CFLAG:M嶸ｸ・・>= 1000)
			RETURNF 0
	;縺九ｏ縺・′縺｣縺ｦ
	CASE 11
		SIF !(CFLAG:嶸ｸ・・>= 2000 && CFLAG:M嶸ｸ・・>= 1000)
			RETURNF 0
	[SKIPSTART]
	螳溯｣・☆繧句ｴ蜷医・繝壹ル繝舌Φ縺ｨ謗剃ｻ悶↓縺吶∋縺阪°・・
	縺ｨ縺・≧縺倶ｻ頑峩蛻･譫縺ｧ繧・ｋ諢丞袖縺ｯ阮・＞縲ゅｄ繧九↑繧雅ｰｩ・ｨ[9]縺ｨ邨ｱ蜷医＠縺ｦ蜀・Κ縺ｧ蛻・￠繧区婿縺後＞縺・°縺ｪ
	;蟄輔∪縺帙※
	CASE 12
		SIF !(CFLAG:M嶸ｸ・・+ CFLAG:嶸ｸ・・>= 10000 && !TALENT:MASTER:・・侠 && FLAG:・・尖劇・・桷・ && !TALENT:MASTER:・ｨ・・&& TALENT:弡・ム・俯ｦｬ)
			RETURN 0
	[SKIPEND]
	;譛ｪ螳夂ｾｩ
	CASEELSE
		RETURNF 0
ENDSELECT
;蛟句挨縺ｫ・餓攤縺輔ｌ縺ｦ縺・↑縺代ｌ縺ｰ
RETURNF !CFLAG:(1200+ARG)


;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;豎壹ｌ縺ｮ繝ｪ繧ｻ繝・ヨ
;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
@STAIN_RESET
RESET_STAIN MASTER
RESET_STAIN TARGET
SIF ASSI:1 >= 0
	RESET_STAIN ASSI:1
SIF ASSI:2 >= 0
	RESET_STAIN ASSI:2
SIF ASSI:3 >= 0
	RESET_STAIN ASSI:3
>>>>>>> d29239f180aad384a1e39d65cf6a8a750783a09d
