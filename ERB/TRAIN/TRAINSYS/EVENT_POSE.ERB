<<<<<<< HEAD
・ｿ;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;・・ｴ縲・┳・千ｭ峨・邯咏ｶ壹∬ｧ｣髯､縲∝・逅・;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
@SHOW_TOUCH
FOR LOCAL, 1, CHARANUM
	SIF LOCAL != TARGET
		CONTINUE
	SELECTCASE TEQUIP:LOCAL:・卓ｴ会ｼｰ
		CASE 3
;OriginalString : ・們搆縺吶ｋ 
			PRINT ・川怱 﨑罹共 
		CASE 4
;OriginalString : 寬・ｼ縺吶ｋ 
			PRINT 寬俯攵﨑罹共 
		CASE 6
;OriginalString : ・ｭ・母ｰ・
			PRINT ・ｭ・母ｰ・
		CASE 7
;OriginalString : 騾・墳・ｸ 
			PRINT ・ｭ・ｴ・・
		CASE 8
;OriginalString : 峵駆棕﨑俾ｸｰ 
			PRINT ・､・ｬ ・被う 﨑罹共 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ会ｼ｣
		CASE 1
;OriginalString : ・､・逸ム 
			PRINT ・・卓擽 
		CASE 3
;OriginalString : 繧ｯ繝ｪ・・ｴ 
			PRINT ・ｬ・ｬ ・・ｴ 
		CASE 4
;OriginalString : 繧ｯ繝ｳ繝・
			PRINT ・､・尖ｧ・ｵｬ・､ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ餓・・・ｽ
		CASE 1
;OriginalString : ・們搆 
			PRINT ・川怱 
		CASE 5
;OriginalString : ・・ｴ謠峨∩縺ゅ＞ 
			PRINT ・・ｴ ・・ｹ・牟 ・ｬ・・
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ餓桿
		CASE 1
;OriginalString : 寬・ｼ 
			PRINT 寬俯攵 
		CASE 2
;OriginalString : 繧ｯ繝ｳ繝駆亨墲ｨ・､ 
			PRINT ・､・尖ｧ・ｵｬ・､・懦お・､ 
		CASE 4
;OriginalString : 墲､・､ 
			PRINT 墲､・､ 
		CASE 5
;OriginalString : 荵ｳ鬥門精縺・
			PRINT ・・・・､・ｴ・溢・ 
		CASE 7
;OriginalString : 﨑ｭ・ｸ・餓ぎ 
			PRINT ・ｴ・・・餓ぎ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ賀ｰ・ｴ
		CASE 1
;OriginalString : 甯護擽・壱ｦｬ 
			PRINT 甯護擽・壱ｦｬ 
		CASE 3
;OriginalString : ・・ｴ・・ｴ 
			PRINT ・・ｴ ・・ｴ 
		CASE 4
;OriginalString : ・・戦払・ｰ 
			PRINT ・・・・ｨ・ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ餓ｧ・		CASE 1
;OriginalString : ・ｱ・・
			PRINT ・ｱ・・
		CASE 3
;OriginalString : 謖・・繧・
			PRINT ・専ｰ・ｽ ・｣・ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ会ｼ｡
		CASE 1
;OriginalString : 﨑ｭ・ｸ・ｹ・､ 
			PRINT ・ｴ・・・ｹ・､ 
		CASE 3
;OriginalString : 﨑ｭ・ｸ・・ｴ 
			PRINT ・ｴ・・・・ｴ 
		CASE 4
;OriginalString : 﨑ｭ・ｸ寬・ｼ 
			PRINT ・ｴ・・・ｨ・ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ雅ｰ・		CASE 1
;OriginalString : ・懊さ繧ｭ 
			PRINT ・､・ｬ ・被う 
	ENDSELECT
	PRINTFORML (%CALLNAME:LOCAL%)
NEXT
PRINTL 


;------------------------------------------------------------------
;・卓ｴ画ュ蝣ｱ縺ｮ・ｨ・昴∝慍縺ｮ譁・｡ｨ遉ｺ
;------------------------------------------------------------------
@TOUCH_SUCCESSION
VARSET LOCAL

;・ｱ・川メ夋應ｿ晏ｭ・LOCAL:0 = TEQUIP:・ｱ・川､・LOCAL:1 = TEQUIP:・ｱ・尖ｴ餓ぎ・・;・｣菴ｿ逕ｨ・・・菫晏ｭ・LOCAL:2 = TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ

SELECTCASE TFLAG:ACT
	;巐醐剩邉ｻ迴ｾ迥ｶ邯ｭ謖・	CASE 0 TO 4, 9	
	;・・ｴ/・們搆縺吶ｋ
	CASE 10
		;・們搆
		IF TFLAG:ACT甯護・ == 1
			CALL TOUCH_SET("謖・, "・ｰ")
			;・・尖劇・・た・・ｒ隗｣髯､
			TEQUIP:・ｱ・尖ｴ餓ぎ・・= 0
		;・・ｴ
		ELSEIF !TFLAG:ACT甯護・
			CALL TOUCH_SET("謖・, "・｣")
		ENDIF
	;・・ｴ・・ｴ/荵ｳ鬥門精縺・荵ｳ縺ｮ謠峨∩蜷医＞
	CASE 11
		;荵ｳ鬥門精縺・		IF TFLAG:ACT甯護・ == 1
			CALL TOUCH_SET("・・, "・｢")
		;荵ｳ縺ｮ謠峨∩蜷医＞
		ELSEIF TFLAG:ACT甯護・ == 2
			CALL TOUCH_SET("謖・, "・｢")
			CALL TOUCH_SET("・｢", "謖・)
		;縺昴・莉・		ELSE
			CALL TOUCH_SET("謖・, "・｢")
		ENDIF
	;繧ｯ繝ｳ繝・寬・ｼ縺吶ｋ
	CASE 12
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・・, "・ｰ")
		ELSE
			CALL TOUCH_SET("・・, "・｣")
		ENDIF
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
		;・・ｴ
		TEQUIP:・卓ｴ賀ｰ・ｴ = TEQUIP:・卓ｴ賀ｰ・ｴ == 4 ? 0  # TEQUIP:・卓ｴ賀ｰ・ｴ
	;﨑ｭ・ｸ・・ｴ
	CASE 13
		CALL TOUCH_SET("謖・, "・｡")
	;﨑ｭ・ｸ寬・ｼ
	CASE 14
		CALL TOUCH_SET("・・, "・｡")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;墲､・､
	CASE 15
		CALL TOUCH_SET("・・, "・・)
	;雋昴≠繧上○/・､・逸ム縺吶ｋ
	CASE 16
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・｣", "・ｰ")
		ELSE
			CALL TOUCH_SET("・｣", "・｣")
		ENDIF
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;甯護擽・壱ｦｬ﨑罹共
	CASE 17
		CALL TOUCH_SET("・｢", "・ｰ")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;峵駆棕﨑俾ｸｰ
	CASE 18
		CALL TOUCH_SET("・・, "・ｰ")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・懦┣
	CASE 20
		IF PENIS(MASTER)
			CALL TOUCH_SET("謖・, "・ｰ")
		ELSE
			CALL TOUCH_SET("謖・, "・｣")
		ENDIF
		;・・尖劇・・た・・ｒ隗｣髯､
		TEQUIP:・ｱ・尖ｴ餓ぎ・・= 0
	;・ｱ・千ｳｻ縺ｯ謗剃ｻ冶ｨｭ螳壹↓縺ｪ繧・	;・菩メ・・	CASE 30
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;弡・ｰｰ・・	CASE 31
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;・ｰ・ｹ・・	CASE 32
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;・・ｴ・護怱
	CASE 33
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;・ｰ・ｴ・護怱
	CASE 34
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;﨑ｭ・ｸ
	CASE 35
		CALL TOUCH_SET("・ｰ", "・｡", 1)
	;・ｭ・母ｰ・	CASE 103
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;・們搆/・・ｴ蠑ｷ蛻ｶ
	CASE 50
		;・們搆
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・ｰ", "謖・)
			;・・川梵・ｽ・・ｒ隗｣髯､
			TEQUIP:・ｱ・川､・= 0
		;・・ｴ
		ELSE
			CALL TOUCH_SET("・｣", "謖・)
		ENDIF
	;寬・ｼ繝√が/繧ｯ繝ｳ繝句ｼｷ蛻ｶ
	CASE 51
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・ｰ", "・・)
		ELSE
			CALL TOUCH_SET("・｣", "・・)
		ENDIF
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;甯護擽・壱ｦｬ
	CASE 52
		;・舌↓繧医ｋ・｣・・ｴ繧定ｧ｣髯､
		CALL TOUCH_SET("・ｰ", "謖・, 2)
		CALL TOUCH_SET("・ｰ", "・｢")
		CALL TOUCH_SET("・ｰ", "・・)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・､・逸ム
	CASE 53
		;・・尖劇・√・﨑俯ｰ們侠・卓ｴ峨ｒ隗｣髯､
		CALL TOUCH_SET("・｣", , 2)
		CALL TOUCH_SET("・ｰ", , 2)
		CALL TOUCH_SET("・｡", , 2)
		CALL TOUCH_SET("・ｶ", , 2)
		CALL TOUCH_SET("・ｰ", "・｣")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・懊さ繧ｭ
	CASE 54
		CALL TOUCH_SET("・ｰ", "・・, 1)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・懦払・ｰ・菩・	CASE 55
		CALL TOUCH_SET("・・, "・・, 1)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・ｴ・ｼ・溢ｹ們丶
	CASE 56
		CALL TOUCH_SET("・ｰ", "・・, 1)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・・ｴ・・ｴ・菩・	CASE 57
		;・・川梵縺ｮ・・卓ｴ峨ｒ隗｣髯､
		CALL TOUCH_SET(, "・・, 2)
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・｢", "・・)
		ELSE
			CALL TOUCH_SET("・｢", "謖・)
		ENDIF
	;・､寬ｭ墲ｹ
	CASE 60
		;・・川梵縺ｮ・・卓ｴ峨ｒ隗｣髯､
		CALL TOUCH_SET(, "・・, 2)
	;・菩メ・・亨墲ｨ・､
	CASE 95
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;弡・ｰｰ・・亨墲ｨ・､
	CASE 96
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;・・ｴ・護怱・懦お・､
	CASE 97
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;・ｰ・ｴ・護怱・懦お・､
	CASE 98
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;﨑ｭ・ｸ・ｹ・､・懦お・､
	CASE 99
		CALL TOUCH_SET("・｡", "・ｰ", 1)
	CASEELSE
		CALL TOUCH_SET(, , 1)
ENDSELECT
IF TEQUIP:・壱ｩｴ・ｹ・・	IF TALENT:・ｨ・・		CALL TOUCH_SET("・ｰ", "・・)
	ELSE
		CALL TOUCH_SET("・｣", "・・)
	ENDIF
ELSEIF TEQUIP:・壱ｩｴ・ｹ・逸墳・ｸ
	CALL TOUCH_SET("・｡", "・・)
ENDIF

;・ｱ・舌・繧ｻ繝・ヨ
CALL SEX_SET(TOSTR(TFLAG:ACT))

IF TEQUIP:MASTER:・卓ｴ会ｼ｣ == 3 || TEQUIP:MASTER:・卓ｴ会ｼｰ == 3
	TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ = 1
ELSEIF TEQUIP:MASTER:・卓ｴ会ｼ｣ == 4 || TEQUIP:MASTER:・卓ｴ会ｼｰ == 4
	TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ = 2
ELSE
	TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ = 0
ENDIF

SIF !TEQUIP:・ｱ・川､・	TEQUIP:・卓ｴ会ｼｰ = 0
IF !TEQUIP:・ｱ・尖ｴ餓ぎ・・	TEQUIP:・卓ｴ餓ｧ・= 0
	TEQUIP:・卓ｴ会ｼ｡ = 0
ENDIF

;・ｱ・川メ夋懊′隗｣髯､・ｹ嵂壱共蝣ｴ蜷医∝慍縺ｮ譁・｡ｨ遉ｺ
IF LOCAL:1 > TEQUIP:・ｱ・尖ｴ餓ぎ・・&& !TEQUIP:・ｱ・尖ｴ餓ぎ・・	PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・禄@ TEQUIP:寬俯笈・､・ｴ・・? 蠑ｵ繧雁梛 # 寬俯笈・､ \@(・・・ｼ 﨑ｴ・ｩ嵂壱共窶ｦ
	PRINTL 
ELSEIF LOCAL:0 > TEQUIP:・ｱ・川､・&& !TEQUIP:・ｱ・川､・	PRINTFORMW %CALLNAME:TARGET%(・)・・%CALLNAME:MASTER%(・ｼ)・罹ｶ奓ｰ\@ TEQUIP:・・川梵寬俯笈・､・ｴ・・? 蠑ｵ繧雁梛 # 寬俯笈・､ \@(・・・ｼ ・卓符 ・壱共窶ｦ
	PRINTL 
ENDIF

;・｣菴ｿ逕ｨ・・・縺瑚ｧ｣髯､・ｹ嵂壱共蝣ｴ蜷医∝慍縺ｮ譁・｡ｨ遉ｺ
IF LOCAL:2 == 2 && !TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ
	PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・・・愍・罹ｶ奓ｰ ・・揆 ・ｼ・ｴ ・南符, ・ｼ・ｴ・・・ｬ・ｸ・､窶ｦ
	PRINTL 
ELSEIF LOCAL:2 == 1 && !TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ
	PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・\@ PENIS(MASTER) ? 寬俯笈・､ # 增ｴ・ｬ奝・ｬ・､ \@・罹ｶ奓ｰ ・川揆 ・ｼ・ｴ ・南葺・､窶ｦ
	PRINTL 
ENDIF


;-----------------------------------------------------------------------
;MASTER縺ｨTARGET縺ｮ・卓ｴ蛾Κ菴阪ｒ險ｭ螳壹☆繧・;-----------------------------------------------------------------------
@TOUCH_SET(ARGS:0, ARGS:1, ARG)
#DIM LCOUNT
#DIM T・卓ｴ・#DIM M・卓ｴ・#DIM 蜊譛蛾剞逡・#LOCALSIZE 1
;ARGS:0 TARGET縺ｮ・卓ｴ蛾Κ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ 8=・・
;ARGS:1 MASTER縺ｮ・卓ｴ蛾Κ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ 8=・・
;ARG 1縺ｪ繧峨Μ繧ｻ繝・ヨ縺励※謖・ｮ夬毎・､・卓ｴ峨ｒ霑ｽ蜉縺吶ｋ縲・縺ｪ繧画欠螳夬毎・､・卓ｴ峨ｒ隗｣髯､縺吶ｋ縲ゅ％縺ｮ縺ｨ縺阪、RGS:0繝ｻARGS:1繧堤怐逡･嵂壱共繧峨◎繧後◇繧後☆縺ｹ縺ｦ繧定ｧ｣髯､縺吶ｋ
T・卓ｴ・= TOUCH_PART(ARGS:0)
M・卓ｴ・= TOUCH_PART(ARGS:1)

;ARG縺・縺ｮ蝣ｴ蜷医∝・・卓ｴ欝EQUIP繝ｪ繧ｻ繝・ヨ
IF ARG == 1
	VARSET TEQUIP:MASTER:0, 0, 101, 109
	VARSET TEQUIP:TARGET:0, 0, 101, 109
ENDIF

;ARG縺・縺ｮ蝣ｴ蜷医∫怐逡･・ｹ嵂壱共TEQUIP縺ｮ繝ｪ繧ｻ繝・ヨ
;MASTER縺ｮ迚ｹ螳壹・驛ｨ菴阪→・卓ｴ峨＠縺ｦ縺・ｋTARGET縺ｮ・卓ｴ蛾Κ菴阪ｒ繝ｪ繧ｻ繝・ヨ
IF !T・卓ｴ・&& M・卓ｴ・&& ARG == 2
	FOR LCOUNT, 1, 8
		TEQUIP:(100 + LCOUNT) = TEQUIP:(100 + LCOUNT) == M・卓ｴ・? 0 # TEQUIP:(100 + LCOUNT)
	NEXT
	TEQUIP:MASTER:(M・卓ｴ・100) = 0
	RETURN 0
;TARGET縺ｮ迚ｹ螳壹・驛ｨ菴阪→・卓ｴ峨＠縺ｦ縺・ｋMASTER縺ｮ・卓ｴ蛾Κ菴阪ｒ繝ｪ繧ｻ繝・ヨ
ELSEIF T・卓ｴ・&& !M・卓ｴ・&& ARG == 2
	FOR LCOUNT, 1, 8
		TEQUIP:MASTER:(100 + LCOUNT) = TEQUIP:MASTER:(100 + LCOUNT) == T・卓ｴ・? 0 # TEQUIP:MASTER:(100 + LCOUNT)
	NEXT
	TEQUIP:(T・卓ｴ・100) = 0
	RETURN 0
ENDIF

;・懊・蜻ｼ縺ｰ繧後ｋ縺ｨ・ｨ・後☆繧・TEQUIP:・卓ｴ雅ｰ・= 0

;T・卓ｴ峨′荳肴ｭ｣縺ｪ繧牙・逅・ｸｭ譁ｭ
SIF T・卓ｴ・< 1
	RETURN 0

;謖・・・縺ｯ莠梧悽縺ゅｋ縺ｮ縺ｧ蜊譛蛾剞逡後ｒ2縺ｫ
IF M・卓ｴ・== 3
	蜊譛蛾剞逡・= 2
;縺昴・莉悶・蜊譛蛾剞逡後・1
ELSE
	蜊譛蛾剞逡・= 1
ENDIF

;蜈ｨ・卓ｴ欝EQUIP縺ｫ蟇ｾ縺励※蜃ｦ逅・FOR LCOUNT, 1, 8
	;・懊↑繧餓ｷｨ・後☆繧・	SIF TEQUIP:MASTER:(100 + LCOUNT) == 8
		TEQUIP:MASTER:(100 + LCOUNT) = 0
	;TARGET縺ｮ謖・ｮ夐Κ菴阪′譌｢縺ｫ菴ｿ逕ｨ縺輔ｌ縺ｦ縺・◆蝣ｴ蜷・	IF TEQUIP:MASTER:(100 + LCOUNT) == M・卓ｴ・		;隗｣髯､縺ｮ蝣ｴ蜷・		IF ARG == 2
			TEQUIP:MASTER:(100 + LCOUNT) = 0
		;繧ｻ繝・ヨ縺ｮ蝣ｴ蜷・		ELSE
			;蜊譛蛾剞逡後ｒ貂帷ｮ・			蜊譛蛾剞逡・--
			;譁ｰ縺溘↓蜉繧上ｋ謖・ｮ壹ｒ蜷ｫ繧√・剞逡梧悴貅縺ｪ繧餓卓ｴ芽ｧ｣髯､
			SIF 蜊譛蛾剞逡・< 1
				TEQUIP:MASTER:(100 + LCOUNT) = 0
		ENDIF
	ENDIF
NEXT

;隗｣髯､縺ｮ蝣ｴ蜷・IF ARG == 2
	TEQUIP:(T・卓ｴ・100) = TEQUIP:(T・卓ｴ・100) == M・卓ｴ・? 0 # TEQUIP:(T・卓ｴ・100)
;繧ｻ繝・ヨ縺ｮ蝣ｴ蜷・ELSE
	;譁ｰ縺溘↓・卓ｴ餓・・・ｽ螳壹ｒ蜉縺医ｋ
	TEQUIP:(T・卓ｴ・100) = M・卓ｴ・	TEQUIP:MASTER:(M・卓ｴ・100) = T・卓ｴ・ENDIF

@TOUCH(ARG, ARG:1, ARG:2)
;ARG MASTER縺ｮ驛ｨ菴阪ｒ蜊譛我ｸｭ縺ｮTARGET:X縺ｮ驛ｨ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ)
;ARG:1 MASTER縺ｮ驛ｨ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ)
;ARG:2 逵溘↑繧餓・╋縺ｮ螻･豁ｴ繧定ｦ九ｋ
;謌ｻ繧雁､ MASTER縺ｮ驛ｨ菴阪ｒ蜊譛我ｸｭ縺ｮTARGET:X縺後＞繧九↑繧峨◎縺ｮ繧ｭ繝｣繝ｩ・逸从繧定ｿ斐☆
;MASTER_POSE(4, 1, 1)縺ｪ繧餓・╋(隨ｬ3蠑墓焚)縺ｫ隱ｰ縺九′MASTER・・寬俯笈・､(隨ｬ2蠑墓焚)繧廷桿(隨ｬ1蠑墓焚)縺ｧ蜊譛峨＠縺ｦ縺・◆蝣ｴ蜷医√◎縺ｮ繧ｭ繝｣繝ｩ・逸从繧定ｿ斐☆
#FUNCTION
ARG:2 = ARG:2 ? 1 # 0
FOR LOCAL, 1, CHARANUM
	SIF TEQUIP:LOCAL:(100 + ARG + 10 * ARG:2) == ARG:1
		RETURNF LOCAL
NEXT


;-------------------------------------------------
;髢｢謨ｰ蜷・TOUCH_PART
;讎ゅ隕・・卓ｴ蛾Κ菴肴枚蟄怜・竊呈焚蛟､螟画鋤髢｢謨ｰ
;蠑輔謨ｰ:ARGS:0窶ｦ・卓ｴ蛾Κ菴阪ｒ陦ｨ縺呎枚蟄怜・(驛ｨ菴榊錐縺矩Κ菴鷺ｲ逸从)
;謌ｻ繧雁､:・卓ｴ蛾Κ菴阪ｒ陦ｨ縺呎焚蛟､
;蛯吶閠・蠑丈ｸｭ髢｢謨ｰ
;-------------------------------------------------
@TOUCH_PART(ARGS:0)
#FUNCTION
#LOCALSIZE 1
SELECTCASE ARGS:0
	CASE "・ｰ", "寬俯笈・､"
		LOCAL:0 = 1
	CASE "・｣", "增ｴ・ｬ奝・ｬ・､"
		LOCAL:0 = 2
	CASE "謖・, "・・
		LOCAL:0 = 3
	CASE "・・, "闊・
		LOCAL:0 = 4
	CASE "・｢", "・・ｴ"
		LOCAL:0 = 5
	CASE "・ｶ", "閹｣"
		LOCAL:0 = 6
	CASE "・｡", "﨑ｭ・ｸ"
		LOCAL:0 = 7
	CASE "・・
		LOCAL:0 = 8
	CASEELSE
		LOCAL:0 = TOINT(ARGS:0)
		LOCAL:0 = INRANGE(LOCAL:0, 1, 8) ? LOCAL:0 # 0
ENDSELECT
RETURNF LOCAL:0
=======
・ｿ;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
;・・ｴ縲・┳・千ｭ峨・邯咏ｶ壹∬ｧ｣髯､縲∝・逅・
;笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏
@SHOW_TOUCH
FOR LOCAL, 1, CHARANUM
	SIF LOCAL != TARGET
		CONTINUE
	SELECTCASE TEQUIP:LOCAL:・卓ｴ会ｼｰ
		CASE 3
;OriginalString : ・們搆縺吶ｋ 
			PRINT ・川怱 﨑罹共 
		CASE 4
;OriginalString : 寬・ｼ縺吶ｋ 
			PRINT 寬俯攵﨑罹共 
		CASE 6
;OriginalString : ・ｭ・母ｰ・
			PRINT ・ｭ・母ｰ・
		CASE 7
;OriginalString : 騾・墳・ｸ 
			PRINT ・ｭ・ｴ・・
		CASE 8
;OriginalString : 峵駆棕﨑俾ｸｰ 
			PRINT ・､・ｬ ・被う 﨑罹共 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ会ｼ｣
		CASE 1
;OriginalString : ・､・逸ム 
			PRINT ・・卓擽 
		CASE 3
;OriginalString : 繧ｯ繝ｪ・・ｴ 
			PRINT ・ｬ・ｬ ・・ｴ 
		CASE 4
;OriginalString : 繧ｯ繝ｳ繝・
			PRINT ・､・尖ｧ・ｵｬ・､ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ餓・・・ｽ
		CASE 1
;OriginalString : ・們搆 
			PRINT ・川怱 
		CASE 5
;OriginalString : ・・ｴ謠峨∩縺ゅ＞ 
			PRINT ・・ｴ ・・ｹ・牟 ・ｬ・・
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ餓桿
		CASE 1
;OriginalString : 寬・ｼ 
			PRINT 寬俯攵 
		CASE 2
;OriginalString : 繧ｯ繝ｳ繝駆亨墲ｨ・､ 
			PRINT ・､・尖ｧ・ｵｬ・､・懦お・､ 
		CASE 4
;OriginalString : 墲､・､ 
			PRINT 墲､・､ 
		CASE 5
;OriginalString : 荵ｳ鬥門精縺・
			PRINT ・・・・､・ｴ・溢・ 
		CASE 7
;OriginalString : 﨑ｭ・ｸ・餓ぎ 
			PRINT ・ｴ・・・餓ぎ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ賀ｰ・ｴ
		CASE 1
;OriginalString : 甯護擽・壱ｦｬ 
			PRINT 甯護擽・壱ｦｬ 
		CASE 3
;OriginalString : ・・ｴ・・ｴ 
			PRINT ・・ｴ ・・ｴ 
		CASE 4
;OriginalString : ・・戦払・ｰ 
			PRINT ・・・・ｨ・ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ餓ｧ・
		CASE 1
;OriginalString : ・ｱ・・
			PRINT ・ｱ・・
		CASE 3
;OriginalString : 謖・・繧・
			PRINT ・専ｰ・ｽ ・｣・ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ会ｼ｡
		CASE 1
;OriginalString : 﨑ｭ・ｸ・ｹ・､ 
			PRINT ・ｴ・・・ｹ・､ 
		CASE 3
;OriginalString : 﨑ｭ・ｸ・・ｴ 
			PRINT ・ｴ・・・・ｴ 
		CASE 4
;OriginalString : 﨑ｭ・ｸ寬・ｼ 
			PRINT ・ｴ・・・ｨ・ 
	ENDSELECT
	SELECTCASE TEQUIP:LOCAL:・卓ｴ雅ｰ・
		CASE 1
;OriginalString : ・懊さ繧ｭ 
			PRINT ・､・ｬ ・被う 
	ENDSELECT
	PRINTFORML (%CALLNAME:LOCAL%)
NEXT
PRINTL 


;------------------------------------------------------------------
;・卓ｴ画ュ蝣ｱ縺ｮ・ｨ・昴∝慍縺ｮ譁・｡ｨ遉ｺ
;------------------------------------------------------------------
@TOUCH_SUCCESSION
VARSET LOCAL

;・ｱ・川メ夋應ｿ晏ｭ・
LOCAL:0 = TEQUIP:・ｱ・川､・
LOCAL:1 = TEQUIP:・ｱ・尖ｴ餓ぎ・・
;・｣菴ｿ逕ｨ・・・菫晏ｭ・
LOCAL:2 = TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ

SELECTCASE TFLAG:ACT
	;巐醐剩邉ｻ迴ｾ迥ｶ邯ｭ謖・
	CASE 0 TO 4, 9	
	;・・ｴ/・們搆縺吶ｋ
	CASE 10
		;・們搆
		IF TFLAG:ACT甯護・ == 1
			CALL TOUCH_SET("謖・, "・ｰ")
			;・・尖劇・・た・・ｒ隗｣髯､
			TEQUIP:・ｱ・尖ｴ餓ぎ・・= 0
		;・・ｴ
		ELSEIF !TFLAG:ACT甯護・
			CALL TOUCH_SET("謖・, "・｣")
		ENDIF
	;・・ｴ・・ｴ/荵ｳ鬥門精縺・荵ｳ縺ｮ謠峨∩蜷医＞
	CASE 11
		;荵ｳ鬥門精縺・
		IF TFLAG:ACT甯護・ == 1
			CALL TOUCH_SET("・・, "・｢")
		;荵ｳ縺ｮ謠峨∩蜷医＞
		ELSEIF TFLAG:ACT甯護・ == 2
			CALL TOUCH_SET("謖・, "・｢")
			CALL TOUCH_SET("・｢", "謖・)
		;縺昴・莉・
		ELSE
			CALL TOUCH_SET("謖・, "・｢")
		ENDIF
	;繧ｯ繝ｳ繝・寬・ｼ縺吶ｋ
	CASE 12
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・・, "・ｰ")
		ELSE
			CALL TOUCH_SET("・・, "・｣")
		ENDIF
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
		;・・ｴ
		TEQUIP:・卓ｴ賀ｰ・ｴ = TEQUIP:・卓ｴ賀ｰ・ｴ == 4 ? 0  # TEQUIP:・卓ｴ賀ｰ・ｴ
	;﨑ｭ・ｸ・・ｴ
	CASE 13
		CALL TOUCH_SET("謖・, "・｡")
	;﨑ｭ・ｸ寬・ｼ
	CASE 14
		CALL TOUCH_SET("・・, "・｡")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;墲､・､
	CASE 15
		CALL TOUCH_SET("・・, "・・)
	;雋昴≠繧上○/・､・逸ム縺吶ｋ
	CASE 16
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・｣", "・ｰ")
		ELSE
			CALL TOUCH_SET("・｣", "・｣")
		ENDIF
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;甯護擽・壱ｦｬ﨑罹共
	CASE 17
		CALL TOUCH_SET("・｢", "・ｰ")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;峵駆棕﨑俾ｸｰ
	CASE 18
		CALL TOUCH_SET("・・, "・ｰ")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・懦┣
	CASE 20
		IF PENIS(MASTER)
			CALL TOUCH_SET("謖・, "・ｰ")
		ELSE
			CALL TOUCH_SET("謖・, "・｣")
		ENDIF
		;・・尖劇・・た・・ｒ隗｣髯､
		TEQUIP:・ｱ・尖ｴ餓ぎ・・= 0
	;・ｱ・千ｳｻ縺ｯ謗剃ｻ冶ｨｭ螳壹↓縺ｪ繧・
	;・菩メ・・
	CASE 30
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;弡・ｰｰ・・
	CASE 31
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;・ｰ・ｹ・・
	CASE 32
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;・・ｴ・護怱
	CASE 33
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;・ｰ・ｴ・護怱
	CASE 34
		CALL TOUCH_SET("・ｰ", "・ｶ", 1)
	;﨑ｭ・ｸ
	CASE 35
		CALL TOUCH_SET("・ｰ", "・｡", 1)
	;・ｭ・母ｰ・
	CASE 103
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;・們搆/・・ｴ蠑ｷ蛻ｶ
	CASE 50
		;・們搆
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・ｰ", "謖・)
			;・・川梵・ｽ・・ｒ隗｣髯､
			TEQUIP:・ｱ・川､・= 0
		;・・ｴ
		ELSE
			CALL TOUCH_SET("・｣", "謖・)
		ENDIF
	;寬・ｼ繝√が/繧ｯ繝ｳ繝句ｼｷ蛻ｶ
	CASE 51
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・ｰ", "・・)
		ELSE
			CALL TOUCH_SET("・｣", "・・)
		ENDIF
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;甯護擽・壱ｦｬ
	CASE 52
		;・舌↓繧医ｋ・｣・・ｴ繧定ｧ｣髯､
		CALL TOUCH_SET("・ｰ", "謖・, 2)
		CALL TOUCH_SET("・ｰ", "・｢")
		CALL TOUCH_SET("・ｰ", "・・)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・､・逸ム
	CASE 53
		;・・尖劇・√・﨑俯ｰ們侠・卓ｴ峨ｒ隗｣髯､
		CALL TOUCH_SET("・｣", , 2)
		CALL TOUCH_SET("・ｰ", , 2)
		CALL TOUCH_SET("・｡", , 2)
		CALL TOUCH_SET("・ｶ", , 2)
		CALL TOUCH_SET("・ｰ", "・｣")
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・懊さ繧ｭ
	CASE 54
		CALL TOUCH_SET("・ｰ", "・・, 1)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・懦払・ｰ・菩・
	CASE 55
		CALL TOUCH_SET("・・, "・・, 1)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・ｴ・ｼ・溢ｹ們丶
	CASE 56
		CALL TOUCH_SET("・ｰ", "・・, 1)
		;・ｽ・・ｧ｣髯､
		CALL SEX_SET()
	;・・ｴ・・ｴ・菩・
	CASE 57
		;・・川梵縺ｮ・・卓ｴ峨ｒ隗｣髯､
		CALL TOUCH_SET(, "・・, 2)
		IF TFLAG:ACT甯護・
			CALL TOUCH_SET("・｢", "・・)
		ELSE
			CALL TOUCH_SET("・｢", "謖・)
		ENDIF
	;・､寬ｭ墲ｹ
	CASE 60
		;・・川梵縺ｮ・・卓ｴ峨ｒ隗｣髯､
		CALL TOUCH_SET(, "・・, 2)
	;・菩メ・・亨墲ｨ・､
	CASE 95
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;弡・ｰｰ・・亨墲ｨ・､
	CASE 96
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;・・ｴ・護怱・懦お・､
	CASE 97
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;・ｰ・ｴ・護怱・懦お・､
	CASE 98
		CALL TOUCH_SET("・ｶ", "・ｰ", 1)
	;﨑ｭ・ｸ・ｹ・､・懦お・､
	CASE 99
		CALL TOUCH_SET("・｡", "・ｰ", 1)
	CASEELSE
		CALL TOUCH_SET(, , 1)
ENDSELECT
IF TEQUIP:・壱ｩｴ・ｹ・・
	IF TALENT:・ｨ・・
		CALL TOUCH_SET("・ｰ", "・・)
	ELSE
		CALL TOUCH_SET("・｣", "・・)
	ENDIF
ELSEIF TEQUIP:・壱ｩｴ・ｹ・逸墳・ｸ
	CALL TOUCH_SET("・｡", "・・)
ENDIF

;・ｱ・舌・繧ｻ繝・ヨ
CALL SEX_SET(TOSTR(TFLAG:ACT))

IF TEQUIP:MASTER:・卓ｴ会ｼ｣ == 3 || TEQUIP:MASTER:・卓ｴ会ｼｰ == 3
	TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ = 1
ELSEIF TEQUIP:MASTER:・卓ｴ会ｼ｣ == 4 || TEQUIP:MASTER:・卓ｴ会ｼｰ == 4
	TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ = 2
ELSE
	TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ = 0
ENDIF

SIF !TEQUIP:・ｱ・川､・
	TEQUIP:・卓ｴ会ｼｰ = 0
IF !TEQUIP:・ｱ・尖ｴ餓ぎ・・
	TEQUIP:・卓ｴ餓ｧ・= 0
	TEQUIP:・卓ｴ会ｼ｡ = 0
ENDIF

;・ｱ・川メ夋懊′隗｣髯､・ｹ嵂壱共蝣ｴ蜷医∝慍縺ｮ譁・｡ｨ遉ｺ
IF LOCAL:1 > TEQUIP:・ｱ・尖ｴ餓ぎ・・&& !TEQUIP:・ｱ・尖ｴ餓ぎ・・
	PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・禄@ TEQUIP:寬俯笈・､・ｴ・・? 蠑ｵ繧雁梛 # 寬俯笈・､ \@(・・・ｼ 﨑ｴ・ｩ嵂壱共窶ｦ
	PRINTL 
ELSEIF LOCAL:0 > TEQUIP:・ｱ・川､・&& !TEQUIP:・ｱ・川､・
	PRINTFORMW %CALLNAME:TARGET%(・)・・%CALLNAME:MASTER%(・ｼ)・罹ｶ奓ｰ\@ TEQUIP:・・川梵寬俯笈・､・ｴ・・? 蠑ｵ繧雁梛 # 寬俯笈・､ \@(・・・ｼ ・卓符 ・壱共窶ｦ
	PRINTL 
ENDIF

;・｣菴ｿ逕ｨ・・・縺瑚ｧ｣髯､・ｹ嵂壱共蝣ｴ蜷医∝慍縺ｮ譁・｡ｨ遉ｺ
IF LOCAL:2 == 2 && !TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ
	PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・・・・・愍・罹ｶ奓ｰ ・・揆 ・ｼ・ｴ ・南符, ・ｼ・ｴ・・・ｬ・ｸ・､窶ｦ
	PRINTL 
ELSEIF LOCAL:2 == 1 && !TEQUIP:・・尖劇・・ｼ｣・ｬ・ｩ
	PRINTFORMW %CALLNAME:TARGET%・(・・ %CALLNAME:MASTER%・禄@ PENIS(MASTER) ? 寬俯笈・､ # 增ｴ・ｬ奝・ｬ・､ \@(・ｼ)・罹ｶ奓ｰ ・川揆 ・ｼ・ｴ ・南葺・､窶ｦ
	PRINTL 
ENDIF


;-----------------------------------------------------------------------
;MASTER縺ｨTARGET縺ｮ・卓ｴ蛾Κ菴阪ｒ險ｭ螳壹☆繧・
;-----------------------------------------------------------------------
@TOUCH_SET(ARGS:0, ARGS:1, ARG)
#DIM LCOUNT
#DIM T・卓ｴ・
#DIM M・卓ｴ・
#DIM 蜊譛蛾剞逡・
#LOCALSIZE 1
;ARGS:0 TARGET縺ｮ・卓ｴ蛾Κ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ 8=・・
;ARGS:1 MASTER縺ｮ・卓ｴ蛾Κ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ 8=・・
;ARG 1縺ｪ繧峨Μ繧ｻ繝・ヨ縺励※謖・ｮ夬毎・､・卓ｴ峨ｒ霑ｽ蜉縺吶ｋ縲・縺ｪ繧画欠螳夬毎・､・卓ｴ峨ｒ隗｣髯､縺吶ｋ縲ゅ％縺ｮ縺ｨ縺阪、RGS:0繝ｻARGS:1繧堤怐逡･嵂壱共繧峨◎繧後◇繧後☆縺ｹ縺ｦ繧定ｧ｣髯､縺吶ｋ
T・卓ｴ・= TOUCH_PART(ARGS:0)
M・卓ｴ・= TOUCH_PART(ARGS:1)

;ARG縺・縺ｮ蝣ｴ蜷医∝・・卓ｴ欝EQUIP繝ｪ繧ｻ繝・ヨ
IF ARG == 1
	VARSET TEQUIP:MASTER:0, 0, 101, 109
	VARSET TEQUIP:TARGET:0, 0, 101, 109
ENDIF

;ARG縺・縺ｮ蝣ｴ蜷医∫怐逡･・ｹ嵂壱共TEQUIP縺ｮ繝ｪ繧ｻ繝・ヨ
;MASTER縺ｮ迚ｹ螳壹・驛ｨ菴阪→・卓ｴ峨＠縺ｦ縺・ｋTARGET縺ｮ・卓ｴ蛾Κ菴阪ｒ繝ｪ繧ｻ繝・ヨ
IF !T・卓ｴ・&& M・卓ｴ・&& ARG == 2
	FOR LCOUNT, 1, 8
		TEQUIP:(100 + LCOUNT) = TEQUIP:(100 + LCOUNT) == M・卓ｴ・? 0 # TEQUIP:(100 + LCOUNT)
	NEXT
	TEQUIP:MASTER:(M・卓ｴ・100) = 0
	RETURN 0
;TARGET縺ｮ迚ｹ螳壹・驛ｨ菴阪→・卓ｴ峨＠縺ｦ縺・ｋMASTER縺ｮ・卓ｴ蛾Κ菴阪ｒ繝ｪ繧ｻ繝・ヨ
ELSEIF T・卓ｴ・&& !M・卓ｴ・&& ARG == 2
	FOR LCOUNT, 1, 8
		TEQUIP:MASTER:(100 + LCOUNT) = TEQUIP:MASTER:(100 + LCOUNT) == T・卓ｴ・? 0 # TEQUIP:MASTER:(100 + LCOUNT)
	NEXT
	TEQUIP:(T・卓ｴ・100) = 0
	RETURN 0
ENDIF

;・懊・蜻ｼ縺ｰ繧後ｋ縺ｨ・ｨ・後☆繧・
TEQUIP:・卓ｴ雅ｰ・= 0

;T・卓ｴ峨′荳肴ｭ｣縺ｪ繧牙・逅・ｸｭ譁ｭ
SIF T・卓ｴ・< 1
	RETURN 0

;謖・・・縺ｯ莠梧悽縺ゅｋ縺ｮ縺ｧ蜊譛蛾剞逡後ｒ2縺ｫ
IF M・卓ｴ・== 3
	蜊譛蛾剞逡・= 2
;縺昴・莉悶・蜊譛蛾剞逡後・1
ELSE
	蜊譛蛾剞逡・= 1
ENDIF

;蜈ｨ・卓ｴ欝EQUIP縺ｫ蟇ｾ縺励※蜃ｦ逅・
FOR LCOUNT, 1, 8
	;・懊↑繧餓ｷｨ・後☆繧・
	SIF TEQUIP:MASTER:(100 + LCOUNT) == 8
		TEQUIP:MASTER:(100 + LCOUNT) = 0
	;TARGET縺ｮ謖・ｮ夐Κ菴阪′譌｢縺ｫ菴ｿ逕ｨ縺輔ｌ縺ｦ縺・◆蝣ｴ蜷・
	IF TEQUIP:MASTER:(100 + LCOUNT) == M・卓ｴ・
		;隗｣髯､縺ｮ蝣ｴ蜷・
		IF ARG == 2
			TEQUIP:MASTER:(100 + LCOUNT) = 0
		;繧ｻ繝・ヨ縺ｮ蝣ｴ蜷・
		ELSE
			;蜊譛蛾剞逡後ｒ貂帷ｮ・
			蜊譛蛾剞逡・--
			;譁ｰ縺溘↓蜉繧上ｋ謖・ｮ壹ｒ蜷ｫ繧√・剞逡梧悴貅縺ｪ繧餓卓ｴ芽ｧ｣髯､
			SIF 蜊譛蛾剞逡・< 1
				TEQUIP:MASTER:(100 + LCOUNT) = 0
		ENDIF
	ENDIF
NEXT

;隗｣髯､縺ｮ蝣ｴ蜷・
IF ARG == 2
	TEQUIP:(T・卓ｴ・100) = TEQUIP:(T・卓ｴ・100) == M・卓ｴ・? 0 # TEQUIP:(T・卓ｴ・100)
;繧ｻ繝・ヨ縺ｮ蝣ｴ蜷・
ELSE
	;譁ｰ縺溘↓・卓ｴ餓・・・ｽ螳壹ｒ蜉縺医ｋ
	TEQUIP:(T・卓ｴ・100) = M・卓ｴ・
	TEQUIP:MASTER:(M・卓ｴ・100) = T・卓ｴ・
ENDIF

@TOUCH(ARG, ARG:1, ARG:2)
;ARG MASTER縺ｮ驛ｨ菴阪ｒ蜊譛我ｸｭ縺ｮTARGET:X縺ｮ驛ｨ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ)
;ARG:1 MASTER縺ｮ驛ｨ菴・1=寬俯笈・､ 2=增ｴ・ｬ奝・ｬ・､ 3=謖・4=・・5=・・ｴ 6=閹｣ 7=﨑ｭ・ｸ)
;ARG:2 逵溘↑繧餓・╋縺ｮ螻･豁ｴ繧定ｦ九ｋ
;謌ｻ繧雁､ MASTER縺ｮ驛ｨ菴阪ｒ蜊譛我ｸｭ縺ｮTARGET:X縺後＞繧九↑繧峨◎縺ｮ繧ｭ繝｣繝ｩ・逸从繧定ｿ斐☆
;MASTER_POSE(4, 1, 1)縺ｪ繧餓・╋(隨ｬ3蠑墓焚)縺ｫ隱ｰ縺九′MASTER・・寬俯笈・､(隨ｬ2蠑墓焚)繧廷桿(隨ｬ1蠑墓焚)縺ｧ蜊譛峨＠縺ｦ縺・◆蝣ｴ蜷医√◎縺ｮ繧ｭ繝｣繝ｩ・逸从繧定ｿ斐☆
#FUNCTION
ARG:2 = ARG:2 ? 1 # 0
FOR LOCAL, 1, CHARANUM
	SIF TEQUIP:LOCAL:(100 + ARG + 10 * ARG:2) == ARG:1
		RETURNF LOCAL
NEXT


;-------------------------------------------------
;髢｢謨ｰ蜷・TOUCH_PART
;讎ゅ隕・・卓ｴ蛾Κ菴肴枚蟄怜・竊呈焚蛟､螟画鋤髢｢謨ｰ
;蠑輔謨ｰ:ARGS:0窶ｦ・卓ｴ蛾Κ菴阪ｒ陦ｨ縺呎枚蟄怜・(驛ｨ菴榊錐縺矩Κ菴鷺ｲ逸从)
;謌ｻ繧雁､:・卓ｴ蛾Κ菴阪ｒ陦ｨ縺呎焚蛟､
;蛯吶閠・蠑丈ｸｭ髢｢謨ｰ
;-------------------------------------------------
@TOUCH_PART(ARGS:0)
#FUNCTION
#LOCALSIZE 1
SELECTCASE ARGS:0
	CASE "・ｰ", "寬俯笈・､"
		LOCAL:0 = 1
	CASE "・｣", "增ｴ・ｬ奝・ｬ・､"
		LOCAL:0 = 2
	CASE "謖・, "・・
		LOCAL:0 = 3
	CASE "・・, "闊・
		LOCAL:0 = 4
	CASE "・｢", "・・ｴ"
		LOCAL:0 = 5
	CASE "・ｶ", "閹｣"
		LOCAL:0 = 6
	CASE "・｡", "﨑ｭ・ｸ"
		LOCAL:0 = 7
	CASE "・・
		LOCAL:0 = 8
	CASEELSE
		LOCAL:0 = TOINT(ARGS:0)
		LOCAL:0 = INRANGE(LOCAL:0, 1, 8) ? LOCAL:0 # 0
ENDSELECT
RETURNF LOCAL:0
>>>>>>> d29239f180aad384a1e39d65cf6a8a750783a09d
