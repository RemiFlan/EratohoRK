;────────────────────────────────────
;봉사 (손で50/입で51/가슴で52/스마타53/발舐55/イラ56/騎乗32/가슴を57)
;────────────────────────────────────
@ACT_M5(ARG = 0)
;1以上なら判定を行わない
#DIM LCOUNT, 1

;関数初期化
CALL ACT_M_INIT(5)

;処理開始

LOCALS = ACT_ACTM5

CALL CHA_CRI_VAR, "基準値"
CALLFORM %LOCALS%_REFERENCE

CALL CHA_CRI_VAR, @"今回の방침(%POLICY("今")%)"
CALLFORM %LOCALS%_COURCE

CALL CHA_CRI_VAR, "죠교자の素質"
CALLFORM %LOCALS%_TALENT_T

CALL CHA_CRI_VAR, "죠교대상の素質"
CALLFORM %LOCALS%_TALENT_M

CALL CHA_CRI_VAR, "죠교자の性別意識"
CALLFORM %LOCALS%_GENDER_T

CALL CHA_CRI_VAR, "죠교자の能力"
CALLFORM %LOCALS%_ABL_T

CALL CHA_CRI_VAR, "죠교대상の能力"
CALLFORM %LOCALS%_ABL_M

CALL CHA_CRI_VAR, "죠교자の죄책감"
CALLFORM %LOCALS%_SIN_T

CALL CHA_CRI_VAR, "죠교자のALI"
CALLFORM %LOCALS%_ALI_T

CALL CHA_CRI_VAR, "죠교자の사정値"
CALLFORM %LOCALS%_EJACULATION_T

CALL CHA_CRI_VAR, "죠교자の快B"
CALLFORM %LOCALS%_PREASURE_B_T

CALL CHA_CRI_VAR, "죠교대상の체력"
CALLFORM %LOCALS%_PHYSICAL_M

CALL CHA_CRI_VAR, "죠교대상の기력"
CALLFORM %LOCALS%_MENTAL_M

CALL CHA_CRI_VAR, @"죠교자の상태(%CONDITION(TCVAR:상태변화)%)"
CALLFORM %LOCALS%_CONDITION_T

CALL CHA_CRI_VAR, "シックスナイン誘発"
CALLFORM %LOCALS%_69

CALL CHA_CRI_VAR, "죠교대상の汚れ"
CALLFORM %LOCALS%_STAIN_M

CALL CHA_CRI_VAR, "밧줄"
CALLFORM %LOCALS%_ROPE

CALL CHA_CRI_VAR, "눈가리개"
CALLFORM %LOCALS%_EYEMASK

CALL CHA_CRI_VAR, "죠교대상자위중"
CALLFORM %LOCALS%_MASTURBATION_M

CALL CHA_CRI_VAR, "삽입보정"
CALLFORM %LOCALS%_INSERT

CALL CHA_CRI_VAR, "죠교대상の衣服"
CALLFORM %LOCALS%_CLOTH_M

CALL CHA_CRI_VAR, "용서를 빌다"
CALLFORM %LOCALS%_PLEASE_HELP

CALL CHA_CRI_VAR, "体位"
CALLFORM %LOCALS%_S_POSITION

CALL CHA_CRI_VAR, "연속행동보정"
CALLFORM %LOCALS%_PREV

CALL CHA_CRI_VAR, "구상보정値"
CALL ACT_ACTM_KOJO_CORRECTION_T, 5

CALL CHA_CRI_VAR, "ACT보정値"
CALLFORM %LOCALS%_CORRECTION(ARG)

;ARGが1以上なら処理中断
SIF ARG
	RETURN RESULT

CALL CHA_CRI_VAR, "実行判定"
CALLFORM %LOCALS%_ABLE

;────────────────────────────────────
;最終判定
;────────────────────────────────────
CALL DEF_CRI_VAR("最大前者")
LOCAL = GET_CRI_VAR("決定")
IF LOCAL == -1
	SIF FLAG:디버그
;OriginalString : (봉사ACT분류に実行可能なACTが存在しません)
		PRINTL (봉사ACT분류에 실행 가능한ACT하지만 존재하지 않습니다)
	TFLAG:ACT = -1
	CALL ACT_MENU_RESULT(2, "봉사")
ELSE
	TFLAG:ACT = GET_ACTNUM(RESULTS)
ENDIF
CALL ANA_CRI_VAR()

;-------------------------------------------------------------------------
;基準値
;-------------------------------------------------------------------------
@ACT_ACTM5_REFERENCE

;要らないかもと思ったので試しに無効化@これみ
[SKIPSTART]
CALL ADD_CRI_VAR("손으로 애무를 강요", 10)
CALL ADD_CRI_VAR("입으로 애무를 강요", 10)
CALL ADD_CRI_VAR("파이즈리", 10)
CALL ADD_CRI_VAR("스마타", 10)
CALL ADD_CRI_VAR("발핥기강제", 2)
CALL ADD_CRI_VAR("이라마치오", 0)
CALL ADD_CRI_VAR("기승위", 5)
CALL ADD_CRI_VAR("가슴애무강제", 10)
[SKIPEND]

;------------------------------------------
;今回の죠교방침
;------------------------------------------
@ACT_ACTM5_COURCE
;턴방침(1=휴식/2=소프트/3=노멀/4=하드/5=이상)
SELECTCASE POLICY("今")
	CASE "소프트"
		CALL ADD_CRI_VAR("가슴애무강제", IS_POLICY("금일", "노닥노닥")? 15 # 3)
	CASE "노멀"
		CALL ADD_CRI_VAR("손으로 애무를 강요", IS_POLICY("금일", "ご봉사")?  5 # 2)
		CALL ADD_CRI_VAR("입으로 애무를 강요", IS_POLICY("금일", "ご봉사")? 15 # 3)
		CALL ADD_CRI_VAR("가슴애무강제"    , IS_POLICY("금일", "ご봉사")?  4 # 2)
	CASE "하드"
		CALL ADD_CRI_VAR("손으로 애무를 강요", -5)
		CALL ADD_CRI_VAR("입으로 애무를 강요", -3)
		CALL ADD_CRI_VAR("파이즈리"      ,  3)
		CALL ADD_CRI_VAR("스마타"          ,  2)
		CALL ADD_CRI_VAR("발핥기강제"    ,  5)
		CALL ADD_CRI_VAR("이라마치오"    , 10)
	CASE "이상"
		CALL ADD_CRI_VAR("발핥기강제", 15)
		CALL ADD_CRI_VAR("이라마치오",  5)
ENDSELECT

;-------------------------------------------------------------------------
;죠교자の素質を参照
;-------------------------------------------------------------------------
@ACT_ACTM5_TALENT_T
;죠교자が겁쟁이/굳셈
IF TALENT:겁쟁이
	CALL ADD_CRI_VAR("이라마치오", -3)
ELSEIF TALENT:굳셈
	CALL ADD_CRI_VAR("이라마치오", , 4)
ENDIF

;죠교자が얌전한/건방짐
IF TALENT:얌전한
	CALL ADD_CRI_VAR("발핥기강제", -2, -2)
ELSEIF TALENT:건방짐
	CALL ADD_CRI_VAR("발핥기강제", 2, 2)
ENDIF

;죠교자が프라이드높음/低い
IF TALENT:프라이드높음
	CALL ADD_CRI_VAR("발핥기강제", 1, 6)
	CALL ADD_CRI_VAR("기승위"    , , -2)
ELSEIF TALENT:프라이드낮음
	CALL ADD_CRI_VAR("발핥기강제", -5)
	CALL ADD_CRI_VAR("기승위", , 2)
ENDIF

;죠교자が일선을넘지않음
SIF TALENT:일선을넘지않음
	CALL ADD_CRI_VAR("발핥기강제", -3)

;죠교자が튀고싶어함
SIF TALENT:튀고싶어함
	CALL ADD_CRI_VAR("발핥기강제", 3)

;죠교자が억압/해방
IF TALENT:억압
	CALL ADD_CRI_VAR("손으로 애무를 강요", , 4)
	CALL ADD_CRI_VAR("발핥기강제", -3)
	CALL ADD_CRI_VAR("이라마치오", -3)
ELSEIF TALENT:해방
	CALL ADD_CRI_VAR("파이즈리"  , , 4)
	CALL ADD_CRI_VAR("스마타"      , , 4)
	CALL ADD_CRI_VAR("발핥기강제", , 4)
	CALL ADD_CRI_VAR("기승위"    , , 4)
ENDIF

;죠교자が수동적
IF TALENT:수동적
	CALL ADD_CRI_VAR("기승위"        , , 5)
	CALL ADD_CRI_VAR("손으로 애무를 강요", , 4)
	CALL ADD_CRI_VAR("입으로 애무를 강요", , 3)
	CALL ADD_CRI_VAR("가슴애무강제"    , , 4)
ENDIF

;죠교자が쾌감을부정
SIF TALENT:쾌감을부정
	CALL ADD_CRI_VAR("발핥기강제", , 5)

;죠교자が새드
IF TALENT:새드
	CALL ADD_CRI_VAR("발핥기강제", ,  4)
	CALL ADD_CRI_VAR("이라마치오", ,  4)
	CALL ADD_CRI_VAR("가슴애무강제", , -4)
ENDIF

;죠교자が심술궂음/마음씨착한
IF TALENT:심술궂음
	CALL ADD_CRI_VAR("발핥기강제", ,  4)
	CALL ADD_CRI_VAR("가슴애무강제", , -2)
	CALL ADD_CRI_VAR("기승위"    , , 4)
ELSEIF TALENT:마음씨착한
	CALL ADD_CRI_VAR("발핥기강제", -3)
	CALL ADD_CRI_VAR("가슴애무강제",  3)
	CALL ADD_CRI_VAR("기승위"    , -3)
ENDIF

;죠교자が유치
IF TALENT:유치
	CALL ADD_CRI_VAR("파이즈리"  ,  5)
	CALL ADD_CRI_VAR("가슴애무강제", -5)
ENDIF

;죠교자が광기
SIF TALENT:유치
	CALL ADD_CRI_VAR("발핥기강제", 5)

;죠교자がＣ민감
SIF TALENT:Ｃ민감
	CALL ADD_CRI_VAR("발핥기강제", , -8)

;죠교자が작은체형体型
SIF TALENT:작은체형
	CALL ADD_CRI_VAR("기승위", -2, -4)

;죠교자が빈유
SIF TALENT:빈유
	CALL ADD_CRI_VAR("가슴애무강제", -5)

;죠교자が거유
SIF TALENT:거유
	CALL ADD_CRI_VAR("가슴애무강제", 5)

;죠교자が모유체질
SIF TALENT:모유체질
	CALL ADD_CRI_VAR("가슴애무강제", 8)

;죠교자が각선미
SIF TALENT:각선미
	CALL ADD_CRI_VAR("발핥기강제", , 4)

;-------------------------------------------------------------------------
;죠교대상の素質を参照
;-------------------------------------------------------------------------
@ACT_ACTM5_TALENT_M
;죠교대상が거친혀
SIF TALENT:MASTER:거친혀
	CALL ADD_CRI_VAR("입으로 애무를 강요", -10 + TALENT:변태적 * 2 - TALENT:도Ｍ * 5)

;죠교대상が혀기술
SIF TALENT:MASTER:혀기술
	CALL ADD_CRI_VAR("입으로 애무를 강요", 3, 4)

;죠교대상が손가락기술
SIF TALENT:MASTER:손가락기술
	CALL ADD_CRI_VAR("손으로 애무를 강요", 3, 4)

;죠교대상が허리기술
SIF TALENT:MASTER:허리기술
	CALL ADD_CRI_VAR("기승위", 5)

;죠교대상が음호
SIF TALENT:MASTER:음호
	CALL ADD_CRI_VAR("기승위", 3, 4)

;죠교대상が음유
SIF TALENT:MASTER:음유
	CALL ADD_CRI_VAR("파이즈리", 3, 4)

;죠교대상が빈유
SIF TALENT:MASTER:빈유
	CALL ADD_CRI_VAR("파이즈리", -5)

;죠교대상が거유
SIF TALENT:MASTER:거유
	CALL ADD_CRI_VAR("파이즈리", 5)

;-------------------------------------------------------------------------
;죠교자の性別の好みを参照
;-------------------------------------------------------------------------
@ACT_ACTM5_GENDER_T
;죠교자に바이が無く、여자同士
IF !TALENT:남자 && !TALENT:MASTER:남자 && !TALENT:바이
	;죠교자の레즈끼が[0→-2, 2→2]を加算(-2～2)
	CALL ADD_CRI_VAR("손으로 애무를 강요", LINE_CALC(ABL:레즈끼, "0→-2,2→2,LIMIT/-2～2"))
	CALL ADD_CRI_VAR("발핥기강제", LINE_CALC(ABL:레즈끼, "0→-2,2→0,LIMIT/-2～0"))
	;죠교자の레즈끼が[0→-4, 4→0]を加算(-4～0)
	CALL ADD_CRI_VAR("스마타", LINE_CALC(ABL:레즈끼, "0→-4,4→0,LIMIT/-4～0"))
	;죠교자の레즈끼が[0→-5, 5→3]を加算(-5～3)
	CALL ADD_CRI_VAR("입으로 애무를 강요", LINE_CALC(ABL:레즈끼, "0→-5,5→3,LIMIT/-5～3"))
	CALL ADD_CRI_VAR("파이즈리", LINE_CALC(ABL:레즈끼, "0→-5,5→0,LIMIT/-5～0"))
	CALL ADD_CRI_VAR("이라마치오", LINE_CALC(ABL:레즈끼, "0→-5,5→0,LIMIT/-5～0"))
	CALL ADD_CRI_VAR("기승위", LINE_CALC(ABL:레즈끼, "0→-5,5→0,LIMIT/-5～0"))
	
	;죠교자の레즈중독が[0→0, 5→8]を加算(0～8)
	CALL ADD_CRI_VAR("입으로 애무를 강요", , LINE_CALC(ABL:레즈중독, "0→0,5→8,LIMIT/0～8"))
	CALL ADD_CRI_VAR("파이즈리", , LINE_CALC(ABL:레즈중독, "0→0,5→8,LIMIT/0～8"))
	CALL ADD_CRI_VAR("스마타", , LINE_CALC(ABL:레즈중독, "0→0,5→8,LIMIT/0～8"))
ENDIF

;죠교자に바이が無く、남자同士
IF TALENT:남자 && TALENT:MASTER:남자 && !TALENT:바이
	;죠교자のＢＬ끼が[0→-3, 3→0]を加算(-3～0)
	CALL ADD_CRI_VAR("손으로 애무를 강요", LINE_CALC(ABL:ＢＬ끼, "0→-3,3→0,LIMIT/-3～0"))
	CALL ADD_CRI_VAR("발핥기강제", LINE_CALC(ABL:ＢＬ끼, "0→-3,3→0,LIMIT/-3～0"))
	;죠교자のＢＬ끼が[0→-4, 4→0]を加算(-4～0)
	CALL ADD_CRI_VAR("이라마치오", LINE_CALC(ABL:ＢＬ끼, "0→-4,4→0,LIMIT/-4～0"))
	;죠교자のＢＬ끼が[0→-5, 5→0]を加算(-5～0)
	CALL ADD_CRI_VAR("입으로 애무를 강요", LINE_CALC(ABL:ＢＬ끼, "0→-5,5→0,LIMIT/-5～0"))
ENDIF

;죠교자が남성혐오で죠교대상이남자。進展度に応じて緩和するように
IF TALENT:남성혐오 && TALENT:MASTER:남자
	CALL ADD_CRI_VAR("손으로 애무를 강요", CFLAG:M호의 + CFLAG:호의 >= 10000 ? -1 # -3)
	CALL ADD_CRI_VAR("입으로 애무를 강요", CFLAG:M호의 + CFLAG:호의 >= 10000 ? -3 # -5)
	CALL ADD_CRI_VAR("발핥기강제", , CFLAG:M호의 + CFLAG:호의 >= 10000 ? 1 # 4)
ENDIF

;────────────────────────────────────
;能力、パラメーターによる変動
;────────────────────────────────────
;-------------------------------------------------------------------------
;죠교자の能力を参照
;-------------------------------------------------------------------------
@ACT_ACTM5_ABL_T

;죠교자のＣ감각が[0→0, 3→4, 6→7]を加算(0～4)
CALL ADD_CRI_VAR("입으로 애무를 강요", LINE_CALC(ABL:Ｃ감각, "0→0,3→4,6→7,LIMIT/0～7"))
;죠교자のＣ감각が[1→0, 5→4]を加算(0～4)
CALL ADD_CRI_VAR("파이즈리", LINE_CALC(ABL:Ｃ감각, "1→0,5→4,LIMIT/0～4"))
CALL ADD_CRI_VAR("스마타", LINE_CALC(ABL:Ｃ감각, "1→0,5→4,LIMIT/0～4"))
;죠교자のＣ감각が[2→0, 5→3～5]を加算(0～5)
CALL ADD_CRI_VAR("이라마치오", LINE_CALC(ABL:Ｃ감각, "2→0,5→3,LIMIT/0～3"), LINE_CALC(ABL:Ｃ감각, "2→0,5→2,LIMIT/0～2"))
CALL ADD_CRI_VAR("기승위", LINE_CALC(ABL:Ｃ감각, "2→0,5→3,LIMIT/0～3"), LINE_CALC(ABL:Ｃ감각, "2→0,5→2,LIMIT/0～2"))
;죠교자のＣ감각が[0→0, 2→3, 5→5]を加算(0～5)
CALL ADD_CRI_VAR("손으로 애무를 강요", LINE_CALC(ABL:Ｃ감각, "0→0,2→3,5→5,LIMIT/0～5"))

;죠교자の성교が[0→0, 5→3～5]を加算(0～5)
CALL ADD_CRI_VAR("기승위", LINE_CALC(ABL:성교, "0→0,5→3,LIMIT/0～3"), LINE_CALC(ABL:성교, "0→0,5→2,LIMIT/0～2"))

;-------------------------------------------------------------------------
;죠교대상の能力を参照
;-------------------------------------------------------------------------
@ACT_ACTM5_ABL_M

;죠교대상のＶ감각が[0→0, 5→2～8]を加算(0～8)
CALL ADD_CRI_VAR("기승위", LINE_CALC(ABL:MASTER:Ｖ감각, "0→0,5→2,LIMIT/0～2"), LINE_CALC(ABL:MASTER:Ｖ감각, "0→0,5→6,LIMIT/0～6"))

;-------------------------------------
;죠교자の죄책감
;-------------------------------------
@ACT_ACTM5_SIN_T

;죄책감が[60→0, 100→-2]を加算(-2～0)
CALL ADD_CRI_VAR("발コキ", LINE_CALC(CFLAG:죄책감, "60→0,100→-2,LIMIT/-2～0"))
;죄책감が[40→0, 100→-3]を加算(-3～0)
CALL ADD_CRI_VAR("발핥기강제", LINE_CALC(CFLAG:죄책감, "40→0,100→-3,LIMIT/-3～0"))
;죄책감が[0→0, 100→-5]を加算(-5～0)
CALL ADD_CRI_VAR("이라마치오", LINE_CALC(CFLAG:죄책감, "0→0,100→-5,LIMIT/-5～0"))

;-------------------------------------
;죠교자のALI
;-------------------------------------
@ACT_ACTM5_ALI_T

;아라이멘도が[-50→-3, 50→3]を加算(-3～3)
CALL ADD_CRI_VAR("손으로 애무를 강요", LINE_CALC(CFLAG:아라이멘도, "-50→-3,50→3,LIMIT/-3～3"))
;아라이멘도が[-50→3, 50→-3]を加算(-3～3)
CALL ADD_CRI_VAR("이라마치오", LINE_CALC(CFLAG:아라이멘도, "-50→3,50→-3,LIMIT/-3～3"))
;아라이멘도が[-50→-6, 0→0]を加算(-6～0)
CALL ADD_CRI_VAR("가슴애무강제", LINE_CALC(CFLAG:아라이멘도, "-50→-6,0→0,LIMIT/-6～0"))

;────────────────────────────────────
;ゲージや상태による変動
;────────────────────────────────────
;-------------------------------------
;죠교자の사정値
;-------------------------------------
@ACT_ACTM5_EJACULATION_T

;죠교자の사정値が[4000→0, 8000→3]を加算(0～3)
CALL ADD_CRI_VAR("손으로 애무를 강요", LINE_CALC(BASE:사정, "4000→0,8000→3,LIMIT/0～3"))
CALL ADD_CRI_VAR("파이즈리", LINE_CALC(BASE:사정, "4000→0,8000→3,LIMIT/0～3"))
CALL ADD_CRI_VAR("스마타", LINE_CALC(BASE:사정, "4000→0,8000→3,LIMIT/0～3"))
CALL ADD_CRI_VAR("기승위", LINE_CALC(BASE:사정, "4000→0,8000→3,LIMIT/0～3"))
;죠교자の사정値が[4000→0, 8000→5]を加算(0～5)
CALL ADD_CRI_VAR("입으로 애무를 강요", LINE_CALC(BASE:사정, "4000→0,8000→5,LIMIT/0～5"))
CALL ADD_CRI_VAR("이라마치오", LINE_CALC(BASE:사정, "4000→0,8000→5,LIMIT/0～5"))

;----------------------------------
;죠교자の快B
;---------------------------------
@ACT_ACTM5_PREASURE_B_T

;죠교자の快Bが[0→0, 5000→3]を加算(0～3)
CALL ADD_CRI_VAR("가슴애무강제", LINE_CALC(PALAM:쾌Ｂ, "0→0,5000→3,LIMIT/0～3"))

;-------------------------------------
;죠교대상の체력
;-------------------------------------
@ACT_ACTM5_PHYSICAL_M

;죠교대상の체력が[0→-3, 1000→0]を加算(-3～0)
CALL ADD_CRI_VAR("파이즈리", LINE_CALC(BASE:MASTER:체력, "0→-3,1000→0,LIMIT/-3～0"))
;죠교대상の체력が[0→-5, 1500→0]を加算(-5～0)
CALL ADD_CRI_VAR("이라마치오", LINE_CALC(BASE:MASTER:체력, "0→-5,1500→0,LIMIT/-5～0"))
CALL ADD_CRI_VAR("기승위", LINE_CALC(BASE:MASTER:체력, "0→-5,1500→0,LIMIT/-5～0"))

;-------------------------------------
;죠교대상の기력
;-------------------------------------
@ACT_ACTM5_MENTAL_M

;죠교대상の기력が[0→-3, 500→0]を加算(-3～0)
CALL ADD_CRI_VAR("입으로 애무를 강요", LINE_CALC(BASE:MASTER:기력, "0→-3,500→0,LIMIT/-3～0"))
;죠교대상の기력が[0→-5, 750→0]を加算(-5～0)
CALL ADD_CRI_VAR("발핥기강제", LINE_CALC(BASE:MASTER:기력, "0→-5,750→0,LIMIT/-5～0"))

;-------------------------------------
;죠교자の상태
;-------------------------------------
@ACT_ACTM5_CONDITION_T

;죠교자の상태(0=통상/1=피폐/2=쇠약/3=무기력/4=몽롱/5=정욕/6=분노/7=싫증/8=울굴)
SELECTCASE GET_CONDITION(TARGET)
	CASE "피폐", "쇠약"
		CALL ADD_CRI_VAR("손으로 애무를 강요", -1 - TFLAG:조교자소모도 / 2)
		CALL ADD_CRI_VAR("입으로 애무를 강요", -2 - TFLAG:조교자소모도 / 2)
		CALL ADD_CRI_VAR("파이즈리", -2 - TFLAG:조교자소모도)
		CALL ADD_CRI_VAR("스마타", -3 - TFLAG:조교자소모도)
		CALL ADD_CRI_VAR("이라마치오", -3 - TFLAG:조교자소모도 * 2)
		CALL ADD_CRI_VAR("기승위", -1 - TFLAG:조교자소모도 * 2)
	CASE "정욕"
		CALL ADD_CRI_VAR("입으로 애무를 강요", 3, 6)
		CALL ADD_CRI_VAR("가슴애무강제", 2, 4)
	CASE "분노"
		CALL ADD_CRI_VAR("이라마치오", 3, 6)
	CASE "싫증"
		CALL ADD_CRI_VAR("스마타", , 2)
		CALL ADD_CRI_VAR("발핥기강제", , 4)
	CASE "울굴"
		CALL ADD_CRI_VAR("발핥기강제", 1, 4)
		CALL ADD_CRI_VAR("이라마치오", 1, 4)
ENDSELECT

;────────────────────────────────────
;전회의행동や状況による変動
;────────────────────────────────────
;シックスナインへの경향
@ACT_ACTM5_69

IF TEQUIP:안면승마 || TEQUIP:안면승마항문
	CALL ADD_CRI_VAR("스마타", -5)
	CALL ADD_CRI_VAR("발핥기강제", -5)
	CALL ADD_CRI_VAR("기승위", -5)
ENDIF
IF TEQUIP:죠교대상Ｃ사용 == 2
	CALL ADD_CRI_VAR("입으로 애무를 강요", 5)
ENDIF

;汚れなどの処理(죠교자に더러움무시が無い場合)
@ACT_ACTM5_STAIN_M

IF !TALENT:더러움무시
	;죠교대상の입
	;<精><Ａ>のいずれかの汚れがある
	IF STAIN:MASTER:입 & 0b00001100
		CALL ADD_CRI_VAR("입으로 애무를 강요", -2)
		CALL ADD_CRI_VAR("발핥기강제", -1)
		CALL ADD_CRI_VAR("이라마치오", -2)
	ENDIF
	;<血><粘液>のいずれかの汚れがある
	IF STAIN:MASTER:입 & 0b01100000
		CALL ADD_CRI_VAR("입으로 애무를 강요", -5)
		CALL ADD_CRI_VAR("발핥기강제", -3)
		CALL ADD_CRI_VAR("이라마치오", -5)
	ENDIF
	;죠교대상の손
	;<精><Ａ>のいずれかの汚れがある
	SIF STAIN:MASTER:손 & 0b00001100
		CALL ADD_CRI_VAR("손으로 애무를 강요", -2)
	;<血><粘液>のいずれかの汚れがある
	SIF STAIN:MASTER:손 & 0b01100000
		CALL ADD_CRI_VAR("손으로 애무를 강요", -5)
	;죠교대상のＶ
	;<血><粘液>のいずれかの汚れがある
	IF STAIN:MASTER:바기나 & 0b01100000
		CALL ADD_CRI_VAR("파이즈리", -5)
		CALL ADD_CRI_VAR("기승위", -3)
	ENDIF
	;죠교대상のＢ
	;<精><Ａ>のいずれかの汚れがある
	SIF STAIN:MASTER:가슴 & 0b00001100
		CALL ADD_CRI_VAR("스마타", -2)
	;<血><粘液>のいずれかの汚れがある
	SIF STAIN:MASTER:가슴 & 0b01100000
		CALL ADD_CRI_VAR("스마타", -5)
	;관장
	SIF TEQUIP:관장그릇＋플러그
		CALL ADD_CRI_VAR("스마타", -3, -4)
ENDIF

;-------------------------------------
;밧줄
;-------------------------------------
@ACT_ACTM5_ROPE

IF TEQUIP:밧줄
	CALL ADD_CRI_VAR("입으로 애무를 강요", -5)
	CALL ADD_CRI_VAR("스마타", -5)
	CALL ADD_CRI_VAR("이라마치오", 10)
	CALL ADD_CRI_VAR("가슴애무강제", -5)
ENDIF

;-------------------------------------
;눈가리개
;-------------------------------------
@ACT_ACTM5_EYEMASK

IF TEQUIP:눈가리개
	CALL ADD_CRI_VAR("손으로 애무를 강요", -3)
	CALL ADD_CRI_VAR("입으로 애무를 강요", -2)
	CALL ADD_CRI_VAR("파이즈리", -5)
	CALL ADD_CRI_VAR("스마타", -5)
	CALL ADD_CRI_VAR("기승위", -7)
	CALL ADD_CRI_VAR("가슴애무강제", -3)
ENDIF

;-------------------------------------
;죠교대상자위중
;-------------------------------------
@ACT_ACTM5_MASTURBATION_M

SIF GETBIT(TEQUIP:자위중, 0)
	CALL ADD_CRI_VAR("입으로 애무를 강요", 5)

;-------------------------------------
;삽입
;-------------------------------------
@ACT_ACTM5_INSERT

IF TEQUIP:성교중
	CALL ADD_CRI_VAR("기승위", 10)
	CALL ADD_CRI_VAR("가슴애무강제", 10)
ELSEIF TEQUIP:성교봉사중
	CALL ADD_CRI_VAR("가슴애무강제", 10)
ENDIF

;-------------------------------------
;죠교대상の衣服
;-------------------------------------
@ACT_ACTM5_CLOTH_M

;죠교대상が악세서리に장갑を身につけているとき
SIF TEQUIP:MASTER:악세서리 == 1
	CALL ADD_CRI_VAR("손으로 애무를 강요", 1, 2)

;죠교대상が하반신속옷を着ているとき
IF CLOTHESTYPE(1, 0)
	CALL ADD_CRI_VAR("스마타", -5)
	CALL ADD_CRI_VAR("기승위", -5)
ENDIF

;죠교대상が상반신속옷を着ているとき
SIF CLOTHESTYPE(1, 2)
	CALL ADD_CRI_VAR("파이즈리", -5)

;죠교대상の하반신겉옷に妨害されるとき
SIF CLOTHESTYPE(1, 1) == 2
	CALL ADD_CRI_VAR("스마타", -3)

;-------------------------------------
;용서를 빌다
;-------------------------------------
@ACT_ACTM5_PLEASE_HELP

;許しを乞ったかつ、죠교자の상태が울굴以外
SIF IS_NOWCOMNAME("용서를 빌다") && TCVAR:상태변화 < 8
	CALL ADD_CRI_VAR("이라마치오", -5)

;────────────────────────────────────
;体位関連
;────────────────────────────────────
@ACT_ACTM5_S_POSITION

;体位変更の하드ル
SIF IS_PREVACTNAME("기승위")
	CALL ADD_CRI_VAR(GET_ACTNAME(TFLAG:전ACT), 5, 4)

;────────────────────────────────────
;同じ행동연속실행の確率をダウンします
;────────────────────────────────────
@ACT_ACTM5_PREV

SIF INRANGE(TFLAG:ACT, 50, 57)
	CALL ADD_CRI_VAR(GET_ACTNAME(TFLAG:전ACT), -3 * TFLAG:동일행동보너스, -4 * TFLAG:동일행동보너스)

;────────────────────────────────────
;보정値計算
;────────────────────────────────────
@ACT_ACTM5_CORRECTION(ARG)
#DIM LCOUNT

;ARGが0以外なら보정値を計算し、以後の処理を行わない
IF ARG
	;32に関してはここで計算しない
	FOR LCOUNT, 50, 58
		CALL ACT_M_RES_CALC(LCOUNT, GET_CRI_VAR(GET_ACTNAME(LCOUNT) + "累計"))
	NEXT
ELSE
	;보정値を判定値に加算する
	CALL ACT_ACTM_CORRECTION(5)
ENDIF

;────────────────────────────────────
;その他変動や実行不可能の判定
;────────────────────────────────────
@ACT_ACTM5_ABLE
#DIM LCOUNT

;不可能判定
CALL ACT_ACTM_ABLE(5)

;봉사系기승위を一旦実行不可に。
;성교系보정を考慮することが至難だったため
;ACTM_NUMもついでに殺してる
CALL DIM_CRI_VAR("기승위", -999)

