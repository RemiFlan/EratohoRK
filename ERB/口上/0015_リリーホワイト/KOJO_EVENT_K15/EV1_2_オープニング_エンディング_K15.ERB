;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	[릴리 화이트]구상 オープニング、エンディング구상ファイル
;
;	オープニング, エンディング이벤트구상のファイル
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;========================================================================
;EV1, オープニング구상
;========================================================================
;・구상主(TARGET)が主人である場合にのみ表示される
;・戻り値を2と했다場合はOP後の本体側のタイトルロゴは表示されない
;・노멀모드以外の場合、죠교대상がNO:MASTER == 0(いわるゆる당신)でない可能性あり
;-------------------------------------------------
;関連変数…
;FLAG:모드(0=통상/1=샌드박스/9=엑스트라)
;-------------------------------------------------
@KOJO_EVENT_K15_1(ARG)
;-------------------------------------------------
;CNAMEやCSTR:소환가능조수、その他各種代入に向いた箇所の一つです
;コマンド봉인も個別に可能ですが、本体側の意向として(一応)隠し機能に했다いという事情もあり
;判る人はどうぞ、という事で解説はしない方向で
;-------------------------------------------------
;구상を表示했다上で、終端をRETURN 0とする事で本体側の汎用OPに渡す事も可能だったりします
;汎用OPに飛ば했다際はタイトルロゴが表示されます
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;노멀모드時
;RESULT値(1,OPを表示했다後本体のタイトルロゴを表示/2, 本体のタイトルロゴを表示しない)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 구상記入チェック(0) && !FLAG:모드
	;-------------------------------------------------
	;とりあえず필요そうなものを例として置いておきます
	;実際にどのように扱うかは、既存の구상を見てもらえば分かるかと
	
	;소환가능조수代入		以下の例の場合、레이무と마리사のみ마력使用で呼ぶ事が出来る
	;CSTR:소환가능조수 = 레이무/마리사/
	
	;MASTERの呼び名代入		以下の例の場合、MASTERの呼び名は貴方となる
	;CSTR:(TARGET):호칭목록 = %NAME:MASTER%_貴方/%CSTR:(TARGET):호칭목록%
	;他の箇所(例えばEVENT11)等で条件式を組んでINPUTを絡ませて代入、という事も可能
	
	;キャラカットイン CSVで定義당했다ものが呼ばれる。CSVCSTRで任意のキャラのカットインを呼ぶ事も可能
	;CALL CHARA_CUTIN(CSTR:두명, CSTR:등장명, CSTR:로마자)
	
	;ＢＧＭカットイン(CSTR:곡１, CSTR:곡２でキャラCSVで定義당했다ものを呼び、直接記述する事で任意の内容に変更する事も出来る)
	;CALL BGM_CUTIN(CSTR:곡１)
	;-------------------------------------------------
	PRINTFORMW ………
	PRINTFORMW ……
	PRINTFORMW …
	PRINTFORMW 
	PRINTL  
	PRINTL  
	;相손が大ちゃん
	IF NO:TARGET == 4
		PRINTFORMW 「응, 대……이것, 무엇이지요？」
		PRINTL  
		PRINTFORMDW 두 사람이 호수의 논두렁에서 찾아낸 것은, 1권이 오래된 일기였다
		PRINTFORMDW 더러움이 심하고 읽을 수 없는 개소도 많았지만, 일기의 소유자가 무엇을 하고 있었는지는 막연히 이해할 수가 있었다
		PRINTL  
		PRINTFORMDW 그것은, 「당신」과 「소녀」의 이야기……
		PRINTFORMDW 두 사람의 다음의 놀이가 정해진 순간, 운명의 톱니바퀴가 미치기 시작했다……
		PRINTL  
		PRINTFORMW 「대……으응, 「당신」일까？」
		PRINTFORMW 「그렇게, 「당신」과 「릴리」의 이야기……」
		PRINTL  
		PRINTFORMDW 시작할까요……
		RETURN 1
	ENDIF
	
	;オープニング시나리오
	$INPUT_LOOP3
	PRINTFORMDL 오프닝을 봅니까
	PRINTFORMDL [1]본다
	PRINTFORMDL [2]날린다
	INPUT
	IF RESULT == 1
		PRINTL  
		PRINTFORMDW ………
		PRINTL  
		PRINTFORMDW ……
		PRINTL  
		PRINTFORMDW …
		PRINTL  
	ELSEIF RESULT == 2
		GOTO SKIP_OPENING
	ELSE
		GOTO INPUT_LOOP3
	ENDIF
	;↓ＯＰ구상開始
	PRINTL  	
	PRINTFORMDW 　오프닝 플롯（예정）
	PRINTL  	
	PRINTFORMDW 　당신은 보아서 익숙하지 않는 방에서 눈을 뜹니다.
	PRINTFORMDW 　다다미 4장 반정도의 작은 방에는 들창의 작은 소창이 1개, 당신이 자고 있던 침대 외에 특히 두드러 것은 눈에 띄지 않습니다.
	PRINTFORMDW 　몸 하나만 달랑, 짐은 모두 침대 옆의 테이블 위에 놓여져 있습니다.
	PRINTFORMDW 　당신은 자신이 왜 여기에 있는지 생각해 낼 수 없습니다.
	PRINTFORMDW 　당신이 집주인에 이야기를 들으려고 방을 나오면(자), 어린 소녀가 웃는 얼굴로 달려 왔습니다.
	PRINTFORMDW 　순백의 로브에 갖춤의 삼각 모자, 금발의 긴 염발에 물들여진 사랑스러운 작은 얼굴, 그 등에 희미하게 빛나는 요정의 날개.
	PRINTFORMW 「아…좋았다, 깨어났습니다？」
	PRINTFORMW 「갑자기 넘어지기 때문에 걱정했어요」
	PRINTFORMDW 　그녀의 얼굴을 본 순간, 당신은 어제밤 일어난 일을 생각해 냈습니다.
	PRINTFORMDW 　산채 뽑아에 나간 돌아가는 길, 당신은 이 요정에 만났습니다.
	PRINTFORMDW 　요정 싫어 알려진 아구여사로 해 「그 모습을 보기 시작하는 것은 길조이다」라고 말하게 하는만큼으로,
	PRINTFORMDW 　붙임성이 있고, 특히 꽃집에는 야생 동물을 길들이는 일을 하시는 만큼 귀여워해지고 있는 요정――릴리 화이트.
	PRINTFORMDW 　그 릴리가 나무의 그늘에 몸을 숨기도록(듯이) 해 들어앉아, 양손으로 자신의 어깨를 안아 덜컹덜컹떨고 있었습니다.
	PRINTFORMDW 　
	PRINTL  
	;↑ＯＰ구상終了（구상チェック忘れずに）
	$SKIP_OPENING
	RETURN 1
ENDIF

;将来的に他の모드が追加당했다場合はFLAG:모드を決めうち했다方が良いかも知れません
;━━━━━━━━━━━━━━━━━━━━━━━━
;노멀모드以外の場合
;RESULT値(1,OPを表示했다後本体のタイトルロゴを表示/2, 本体のタイトルロゴを表示しない)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 구상記入チェック(0) && FLAG:모드 > 0
	PRINTFORMW 
	RETURN 1
ENDIF

;========================================================================
;EV2, エンディング이벤트구상
;========================================================================
;・開始30日以降、日時の更新時にシステム側からEVENT2が呼び出される
;・戻り値1以上が返ると本体側でFLAG:END달성が立ち、以降はシステム側から呼び出される事はない
;・以前は戻り値1以外はFLAG:END달성が立たない仕様で했다が、現在はRESULT > 0なら플래그が立つようになっています
;・필요に応じてFIRSTEVENTを使っておくと万が一の保険にはなりますし、仕様変更にも強いです
;-------------------------------------------------
;　최단で呼び出されるのが30日というだけなので、その他の部分では구상側で任意に条件設定が可能です
;　IF 구상記入チェック() &&で条件で区切るなり、IF 구상記入チェック()で大分岐に했다上で、小分岐内で個別に条件設定も出来ます
;　階層이벤트形式にして表示시켰다上でRETURN 0。最後にRETURN 1で。なんて事も可能ではあったり
;　可能性は無限にあるので、条件設定は各구상作者に委ねたいと思います
;-------------------------------------------------
@KOJO_EVENT_K15_2(ARG)
;-------------------------------------------------
;将来的にはCFLAG:의존도による本体側のED分岐なんていう代物の構想もあったり
;その際には、本体側の処理を呼ぶ/殺すも구상側で任意に設定が可能という方向性
;とはいえ、いつになるのか、実現するかも定かではないので、現状は各自頑張って下さいということで
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;エンディング
;━━━━━━━━━━━━━━━━━━━━━━━━
;IF 구상記入チェック(0) && KFLAG:3 == 0 && FLAG:오토모드표시설정 == 0 && FIRSTEVENT(0)
;왜엔딩안나오지? 수정중
IF 구상記入チェック(100) && KFLAG:3 == 0 && FLAG:오토모드표시설정 == 0 && FIRSTEVENT(0)
		PRINTFORMW ………
		PRINTFORMW ……
		PRINTFORMW …
		PRINTFORMW 
	$INPUT_LOOP5
		PRINTFORMDL 엔딩을 봅니까
		PRINTFORMDL [1]본다
		PRINTFORMDL [2]날린다（속행 분기와 등가）
		INPUT
	IF RESULT == 1
		PRINTL  
		PRINTFORMDW ………
		PRINTL  
		PRINTFORMDW ……
		PRINTL  
		PRINTFORMDW …
		PRINTL  
	ELSEIF RESULT == 2
		GOTO SKIP_ENDING
	ELSE
		GOTO INPUT_LOOP5
	ENDIF

	;-------------------------------------------------
	;大リリエンド（ＥＸ）
	;-------------------------------------------------
	IF NO:MASTER == 4
		PRINTFORMW 「응 대, 오늘이 무슨일인가 압니까？」
		PRINTFORMW 「약속이었다, 마지막 날……」
		PRINTFORMW 「즉, 대를 자유롭게 될 수 있는 날입니다！！」
		PRINTFORMW 「이라고 말해도……태양이 뜰 때까지는, 아직 릴리의 노예이지만요♪」
		PRINTL  
		PRINTFORMW 「밤은……어둡고, 차갑고, 외로워서……훨씬 무서웠습니다……」
		PRINTFORMW 「릴리 혼자라면……참을 수 없어서 울어버릴까, 이불에 기어들어 떨리고 있었던이라고 생각합니다」
		PRINTFORMW 「 그렇지만 최근에는 밤의 시간도 즐거워서……내일은 무엇을 해 주자, 대는 어떤 반응을 할까는,
		PRINTFORMW 　그런 일을 생각하면서, 어느새인가 자 버려서라고……일어나면(자) 옆에 대가 있어 줘……」
		PRINTFORMW 「………응, 매우 즐거웠습니다」
		PRINTL  
		PRINTFORMW 「……하늘, 조금 희어졌어요」
		PRINTFORMW 「이런 시간까지 일어나고 처음으로이니까, 어쩐지 신선한 느낌입니다♪」
		PRINTFORMW 「대는 어떻습니까？　역시 처음의 광경입니까？」
		PRINTFORMW 「……신체가 아파서 일어난 일이 있는, 입니까……」
		PRINTFORMW 「……엉뚱한 일도 가득 했습니다……미안합니다……」
		PRINTFORMW 「……그래, 군요……」
		PRINTL  
		PRINTFORMW 「오렌지색의 빛……릴리들의 정말 좋아하는, 태양의 빛이군요……」
		PRINTFORMW 「이제 곧, 날이 새버린다……」
		PRINTL  
		PRINTFORMW 「그……부탁이 있습니다만, 아침이 오면(자) 가르쳐 받을 수 있습니까？」
		PRINTFORMW 「밤은 역시 무서워서……이불에 기어들어 아픈 기분입니다……」
		PRINTL  
		PRINTFORMW 「……응, 대……하늘을 봐 받을 수 있습니까？」
		PRINTFORMW 「 아직, 밤입니까？　그렇지 않으면, 이제 아침이 되어 버렸습니까？」
		PRINTL  
		PRINTFORMW 「……응, 대……아직, 거기에 있습니까？」
		PRINTL  
		PRINTFORMW 「대는……릴리의……에,…(이)라고……인가……？」
		PRINTL  
		PRINTFORMDW 나는……
		PRINTL  
		PRINTFORMDW ………
		PRINTFORMDW ……
		PRINTFORMDW …
		PRINTL  
		PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．ＥＸ
		PRINTFORMDW 　　――「아득한와 함께」――
;OriginalString :  
		PRINTW  
		PRINTL  
		PRINTL  

	;-------------------------------------------------
	;조수＆상사상애エンド（三・四）
	;（호의3000以上・호감도3000以上）
	;-------------------------------------------------
	ELSEIF FAVOR(3000, 3000) && !TALENT:TARGET:주인님
		PRINTFORMW 「」
		;당신に선택を迫る
		$ENDING_LOOP1
		PRINTFORMDL [1]%CNAME((FLAG:주인님), TARGET)%
		PRINTFORMDL [2]릴리
		INPUT
		IF RESULT != 1 && RESULT != 2
			GOTO ENDING_LOOP1
		;本来の주인님と生きていく
		ELSEIF RESULT == 1
			PRINTFORMDW %CALLNAME:MASTER%(은)는,%CNAME((FLAG:주인님), TARGET)%(을)를 선택했다…
			PRINTFORMW 「무엇을 하면 좋은 것인지……알겠지요？」
			PRINTL  
			PRINTFORMDW %CALLNAME:MASTER%(은)는, 그녀가 말하고 있는 일이, 자주(잘) 모른다
			;ナンバー
			PRINTL  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．３　「릴리의 반려」
;OriginalString :  
			PRINTW  
			PRINTL  
			PRINTL  
		;リリーを選ぶ
		ELSE
			PRINTFORMDW %CALLNAME:MASTER%(은)는, 릴리를 선택했다.
			;ナンバー
;OriginalString :  
			PRINTW  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．４　「릴리의 신부」
;OriginalString :  
			PRINTW  
			PRINTL  
			PRINTL  
		ENDIF

	;-------------------------------------------------
	;주인님＆상사상애エンド（一、二）
	;（호의3000以上・호감도3000以上）
	;-------------------------------------------------
	ELSEIF FAVOR(3000, 3000) && TALENT:TARGET:주인님
		PRINTFORMDW 아침, %CALLNAME:MASTER%(은)는 눈을 뜨면(자) 릴리의 모습이 눈에 비쳤다.
		PRINTFORMDW 그것은 보아서 익숙한, 사랑스러운 청초인 자형에 몸을 싼,
		PRINTFORMDW %CALLNAME:MASTER%(은)는 ……
		;당신に선택を迫る
		$ENDING_LOOP2
		PRINTFORMDL [1]이대로 릴리의 물건이 되고 싶다
		PRINTFORMDL [2]빨리 릴리로부터 해방되고 싶다
		INPUT
		IF RESULT != 1 && RESULT != 2
			GOTO ENDING_LOOP2
		;リリーと生きていく
		ELSEIF RESULT == 1
			PRINTL  
			PRINTFORMDW %CALLNAME:MASTER%(은)는, 릴리에의 예속을 바랐다.
			PRINTFORMW 「앞으로도……잘 부탁드릴게요……%CNAME(MASTER)%♪」
			;ナンバー
;OriginalString :  
			PRINTW  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．３　「요정씨가 사는 목적」
;OriginalString :  
			PRINTW  
			PRINTL  
			PRINTL  
		;자유を望む
		ELSE
			PRINTL  
			PRINTFORMDW %CALLNAME:MASTER%(은)는, 릴리로부터의 해방을 바랐다.
			PRINTFORMW 「행복하게……될 수 있으면 좋다,%CNAME(MASTER)%♪」
			;ナンバー
;OriginalString :  
			PRINTW  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．４　「요정씨가 살 방법」
;OriginalString :  
			PRINTW  
			PRINTL  
			PRINTL  
			PRINTFORMDW 종료합니다
			QUIT
		ENDIF
		;書いたら구상チェック忘れずに
	;-------------------------------------------------
	ENDIF
	$SKIP_ENDING
	KFLAG:3 = 1


	;戻り値は1で決めうちしておきます
	RETURN 1
ENDIF


