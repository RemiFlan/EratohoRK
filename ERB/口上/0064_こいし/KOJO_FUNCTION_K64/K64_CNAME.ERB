;-------------------------------------------------
;関数名:K64_CNAME
;概　要:呼び名취득関数
;引　数:ARG:0…[省略可]キャラ등록번호。省略했다場合はMASTER
;　　　 ARG:1…[省略可]パターン번호。省略했다場合は0
;　　　        0.ARG:0のと회화中の二人称的な呼び方(youとかお前とか)
;　　　        1.ARG:0のいる前で、ARG:0以外と회화中などの状況で三人称的な呼び方(itとかこいつとか)
;　　　        2.ARG:0のいない場所で、独り言等での三人称的な呼び方(thatとかあの子とか)
;戻り値:呼び名(文字列)
;備　考:式中関数
;코이시が誰かの名を呼ぶ際に使用。どうしてこうなった…
;呼び名に関しての異論は認める
;
;とりあえず面倒だったの最小限だけ作る。考えるのはやめた。
;後から気分で増やすかも
;호감도分岐とか入れると泣きそうかも。やっぱ小分けにしようかな…
;-------------------------------------------------
@K64_CNAME(ARG:0 = -2, ARG:1)
#FUNCTIONS
ARG:0 = ARG:0 == -2 ? MASTER # ARG:0	;ARG:0省略時の対応
SIF !INRANGE(ARG:0, 0, CHARANUM - 1)	;不正な引数のガード(ARG:0)
	THROW @K64_CNAMEで例外が発生しま했다。範囲外のキャラ등록번호です（{ARG:0}）
SIF !INRANGE(ARG:1, 0, 2)				;不正な引数のガード(ARG:1)
	THROW @K64_CNAMEで例外が発生しま했다。範囲外のパターン번호です（{ARG:1}）

;3*4の12パターンに分岐して、毎度毎度分割して拾う。実際面倒
IF ARG:0 == MASTER				;코이시が노예の名を呼ぶ場合(0, 1, 2)
	ARG:1 += 0
ELSEIF TALENT:(ARG:0):주인님	;코이시が[주인님]の名を呼ぶ場合(3, 4, 5)
	ARG:1 += 3
ELSEIF NO:(FLAG:2) == 64		;코이시が주인님で、죠교자や조수の名を呼ぶ場合(6, 7, 8)
	ARG:1 += 6
ELSE							;코이시が주인님でなく、죠교자や조수の名を呼ぶ場合(9, 10, 11)
	ARG:1 += 9
ENDIF

;キャラ毎の定義
SELECTCASE NO:(ARG:0)
	CASE 0	;당신。状況に応じていろいろ呼び分けられるけど…まだそこまでは至らず
		;デフォルト名とそれ以外で処理を分けないと気持ち悪いことになりそうな気が했다。「それ以外」は文章組み立て上でそもそも厄介だが
		IF CALLNAME:(ARG:0) == "당신"
			LOCALS = 貴方/この子/あの子/ご主人さま/ご主人さま/ご主人さま/貴方/この子/あの子/貴方/この子/あの子
		ELSE
			LOCALS = 貴方/この子/あの子/%CALLNAME:(ARG:0)%さま/%CALLNAME:(ARG:0)%さま/%CALLNAME:(ARG:0)%さま/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%
		ENDIF
	CASE 1	;레이무。あるいは레이무様。主人公その１
		LOCALS = 레이무/레이무/레이무/레이무様/레이무様/레이무様/레이무/레이무/레이무/레이무/레이무/레이무
	CASE 2	;마리사。主人公その２
		RETURNF "마리사"
	CASE 11	;플랑드르。플랑ちゃんはあまり出てこないから接点がちょっとアレだけど…なんとなく플랑ちゃんと코이시ちゃんと누에ちゃんはセットですよね
		LOCALS = 플랑/플랑/플랑ちゃん/플랑ちゃん/플랑ちゃん/플랑ちゃん/플랑ちゃん/플랑ちゃん/플랑ちゃん/플랑ちゃん/플랑ちゃん/플랑ちゃん
	CASE 23	;스이카。地底繋がり。鬼には一応の敬意を。죠교が進んだ段階で変えるというのも손
		LOCALS = 스이카さん/스이카さん/스이카さん/스이카さん/ご主人さま/스이카さん/스이카さん/스이카さん/스이카さん/스이카さん/스이카さん/스이카さん
	CASE 32	;文。取材受けたので面識があるけどよく知らないので微妙な扱い。天狗は警戒대상。毎度おなじみ射命丸、なので名前を覚えない
		;※新聞屋さんがいっぱいいる場合、話がややこしくなるので変える。新聞屋さん→文, はたて
		IF K64_GETCHARABYNAME("はたて") >= 0
			LOCALS = 貴方/この子/あの子/射命丸さん/ご主人さま/射命丸さん/射命丸さん/射命丸さん/射命丸さん/射命丸さん/射命丸さん/射命丸さん
		ELSE
			LOCALS = 貴方/この子/あの子/射命丸さん/ご主人さま/射命丸さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん
		ENDIF
	CASE 36	;四季映姫。地獄관리繋がりというよりは、きっと幻想郷の有名人
		RETURNF "閻魔様"
	CASE 40	;니토리。東方心綺楼繋がり。河童は地底にもいるらしい。なら格下扱いでいい
		LOCALS = 니토리/니토리/니토리/니토리/니토리/니토리/雑貨屋さん/雑貨屋さん/雑貨屋さん/雑貨屋さん/雑貨屋さん/雑貨屋さん
	CASE 42	;早苗。あるいは早苗様。東方地霊殿繋がり
		LOCALS = 早苗/早苗/早苗/早苗様/早苗様/早苗様/早苗/早苗/早苗/早苗/早苗/早苗
	CASE 43	;神奈子。東方地霊殿で話に出てきただけ
		;※神様がいっぱいいる場合、話がややこしくなるので変える。神様→静葉, 穣子, 히나, 神奈子, 스와코
		IF K64_GETCHARACOUNT("静葉/히나/神奈子/스와코")
			LOCALS = 神奈子ちゃん/神奈子ちゃん/神奈子ちゃん/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま
		ELSE
			LOCALS = 神奈子ちゃん/神奈子ちゃん/神奈子ちゃん/神様/神様/神様/神様/神様/神様/神様/神様/神様
		ENDIF
	CASE 44	;스와코。東方地霊殿繋がり。何故か魔法少女っぽくなる
		;※神様がいっぱいいる場合、話がややこしくなるので変える。神様→静葉, 穣子, 히나, 神奈子, 스와코
		IF K64_GETCHARACOUNT("穣子/静葉/히나/神奈子")
			LOCALS = ケロちゃん/ケロちゃん/ケロちゃん/스와코さま/스와코さま/스와코さま/스와코さま/스와코さま/스와코さま/스와코さま/스와코さま/스와코さま
		ELSE
			LOCALS = ケロちゃん/ケロちゃん/ケロちゃん/神様/神様/神様/神様/神様/神様/神様/神様/神様
		ENDIF
	CASE 57	;키스メ。地底繋がり。地底で古明地を恐れないのは鬼くらいということにしておく
		RETURNF "키스メ"
	CASE 58	;ヤマメ。地底繋がり
		RETURNF "ヤマメ"
	CASE 59	;파르시。地底繋がり。주인님のとき調子に乗るタイプ
		LOCALS = 파르시/파르시/파르시/파르시さま/ご主人さま/파르시さま/파르시/파르시/파르시/파르시/파르시/파르시
	CASE 60	;勇儀。地底繋がり。鬼
		LOCALS = 勇儀さん/勇儀さん/勇儀さん/勇儀さん/ご主人さま/勇儀さん/勇儀さん/勇儀さん/勇儀さん/勇儀さん/勇儀さん/勇儀さん
	CASE 61	;さとり
		RETURNF "お姉ちゃん"
	CASE 62	;燐
		RETURNF "お燐"
	CASE 63	;空
		RETURNF "おくう"
	CASE 64	;코이시。この分岐は주인님の名前を取るのにFLAG:2を渡했다ときに生きる…かも
		RETURNF "私"
	CASE 66	;코가사。さでずむ
		RETURNF "코가사"
	CASE 67	;一輪。地底繋がり
		RETURNF "一輪"
	CASE 67	;ムラサ。地底繋がり
		RETURNF "미나미츠"
	CASE 70	;白蓮。東方求聞입授で勧誘당했다繋がり
		LOCALS = 白蓮/白蓮/白蓮/聖/聖/聖/和尚さん/和尚さん/和尚さん/和尚さん/和尚さん/和尚さん
	CASE 71	;누에。地底繋がり。なんとなく플랑ちゃんと코이시ちゃんと누에ちゃんはセット
		LOCALS = 누에/누에/누에ちゃん/누에ちゃん/누에ちゃん/누에ちゃん/누에ちゃん/누에ちゃん/누에ちゃん/누에ちゃん/누에ちゃん/누에ちゃん
	CASE 72	;はたて。取材受けたので面識があるけどよく知らないので微妙な扱い。天狗は警戒대상
		;※新聞屋さんがいっぱいいる場合、話がややこしくなるので変える。新聞屋さん→文, はたて
		IF K64_GETCHARABYNAME("文") >= 0
			LOCALS = 貴方/この子/あの子/はたてさん/ご主人さま/はたてさん/はたてさん/はたてさん/はたてさん/はたてさん/はたてさん/はたてさん
		ELSE
			LOCALS = 貴方/この子/あの子/新聞屋さん/ご主人さま/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん
		ENDIF
	CASE 73	;華扇。鬼
		LOCALS = 華扇さん/華扇さん/華扇さん/お師匠さま/お師匠さま/お師匠さま/華扇さん/華扇さん/華扇さん/華扇さん/華扇さん/華扇さん
	CASE 78	;布都。東方心綺楼繋がり。ぺどい
		LOCALS = 布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/ご主人さま/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん
	CASE 79	;神子。東方心綺楼繋がり
		LOCALS = 神子/神子/神子/太子様/太子様/太子様/神子/神子/神子/神子/神子/神子
	CASE 80	;마미조。東方心綺楼繋がり。ただものではない雰囲気
		LOCALS = 마미조/마미조/마미조/마미조さん/마미조さん/마미조さん/タヌキさん/タヌキさん/タヌキさん/タヌキさん/タヌキさん/タヌキさん
	;その他の方々
	;支障が出そうな方々から順次独立시킨다方向で。主に格が違った方々を分ける
	CASEELSE
		LOCALS = %CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%さん/ご主人さま/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん
ENDSELECT
RETURNF AUTO_SPLIT(LOCALS, "/", ARG:1)
