;플래그説明
;KFLAG:1	関数間貫通汎用플래그。主に行為と反応のランダム文合わせ。
;KFLAG:2	대요정の本気度。素質변화이벤트用の플래그。
;KFLAG:3	エンディング플래그。


@INITIATION_K4
;죠교開始時に初期化する為に呼び出される関数。主に一時変数の初期化が行われる。
;지금 기분을 묻다
KFLAG:100 = 8
CFLAG:1000 = 0
;자신에게의 마음을 묻다
KFLAG:101 = 8
CFLAG:1001 = 0
;성에 관한 이야기를 하다
KFLAG:102 = 8
CFLAG:1002 = 0
;키스
KFLAG:115 = 8
CFLAG:1015 = 0

@CLOSETRAIN_K4
;죠교終了時に呼び出される。
CFLAG:1000 = 0
CFLAG:1001 = 0
CFLAG:1002 = 0
CFLAG:1015 = 0

TALENT:겁쟁이 = 1
TALENT:얌전한 = 1

@DECIDEACTCHECK_K4
;죠교主の행동決定後に呼び出される関数。죠교主の行為に応じて、행동ごとに指定당했다変数を操作し、행동禁止플래그をON/OFFする。

;지금 기분을 묻다の빈도をチェック
IF TFLAG:90 == 0
	KFLAG:100 -= 5
ELSEIF TFLAG:80 == 0 && CFLAG:1000 == 0
	KFLAG:100 -= 2
ELSEIF KFLAG:100 < 8
	IF FAVOR(0, 2000)
		KFLAG:100 += (RAND:3 > 0)
	ELSE
		KFLAG:100 += 1 + RAND:2
	ENDIF
ENDIF
IF KFLAG:100 > 7
	CFLAG:1000 = 0
ELSEIF KFLAG:100 < 1
	CFLAG:1000 = 100
ENDIF

;자신에게의 마음을 묻다の빈도をチェック
IF TFLAG:90 == 1
	KFLAG:101 -= 5
ELSEIF TFLAG:80 == 0 && CFLAG:1000 == 0
	KFLAG:101 -= 2
ELSEIF KFLAG:101 < 8
	IF FAVOR(0, 2000)
		KFLAG:101 += (RAND:3 > 0)
	ELSE
		KFLAG:101 += 1 + RAND:2
	ENDIF
ENDIF
IF KFLAG:101 > 7
	CFLAG:1001 = 0
ELSEIF KFLAG:101 < 1
	CFLAG:1001 = 100
ENDIF

;성에 관한 이야기를 하다の빈도をチェック
IF TFLAG:90 == 2
	KFLAG:102 -= 5
ELSEIF TFLAG:80 == 0 && CFLAG:1000 == 0
	KFLAG:102 -= 2
ELSEIF KFLAG:102 < 8
	IF FAVOR(0, 2000)
		KFLAG:102 += (RAND:3 > 0)
	ELSE
		KFLAG:102 += 1 + RAND:2
	ENDIF
ENDIF
IF KFLAG:102 > 7
	CFLAG:1002 = 0
ELSEIF KFLAG:102 < 1
	CFLAG:1002 = 100
ENDIF

;키스の빈도チェック
IF TFLAG:90 == 15
	;호감도2000未満での키스は割と貴重
	IF FAVOR(0, 2000)
		KFLAG:115 -= 5
	ENDIF
ELSEIF KFLAG:115 < 8
	KFLAG:115 += 1
ENDIF
IF KFLAG:115 > 7
	CFLAG:1015 = 0
ELSEIF KFLAG:115 < 1
	CFLAG:1015 = 100
ENDIF

@ACTIVATION_K4
;十分な체력と기력が노예죠교자共に保証されているときに、素質[겁쟁이][얌전한]を失う
PRINTL  
IF RAND:3 == 0
	PRINTFORMDW 대요정은 의욕에 넘쳐 있다……
ELSEIF RAND:2
	IF FAVOR(0, 2000)
		PRINTFORMDW 대요정은 즐거운 듯 하다……
	ELSE
		PRINTFORMDW 대요정은 각오를 결정한 것 같은 시선으로 %CALLNAME:MASTER%(을)를 응시한다……
	ENDIF
ELSE
	IF FAVOR(0, 2000)
		PRINTFORMDW 대요정은 희들로 한 표정으로 못된 장난을 계속한다……
	ELSE
		PRINTFORMDW 대요정은 견디지 못할 못된 장난에의 욕망으로부터 몸도 글자도 글자와 진동시키고 있다……
	ENDIF
ENDIF
IF FIRSTTIME(1000)
	PRINTL  
	PRINTFORMDW ※일시적으로 조교자가 소질[겁장이][얌전하다](을)를 잃습니다（이후 이 문장은 표시되지 않습니다）
ENDIF
TALENT:겁쟁이 = 0
TALENT:얌전한 = 0
PRINTL  

@CALMING_K4
;お互いの内どちらかでも체력、기력がヤバくなってきたら、[겁쟁이][얌전한]を得て省エネ모드に入る
PRINTL  
IF (BASE:0 * 100) / MAXBASE:0 < 25
	PRINTFORMDW 대요정은 소모하고 있다……조금 침착하기로 한 것 같다……
ELSEIF RAND:3 == 0
	PRINTFORMDW 대요정은 조금은 사례품 지나 버렸다고 생각했는지 자제를 걸치고 있다……
ELSEIF RAND:2
	IF FAVOR(0, 2000)
		PRINTFORMDW 대요정은 %CALLNAME:MASTER%(을)를 노 깨어, 상냥하고 살그머니 몸을 어루만지고 켜기 시작했다……
	ELSE
		PRINTFORMDW 대요정은 %CALLNAME:MASTER%(을)를 노 깨기로 한 것 같다……
	ENDIF
ELSE
	IF FAVOR(0, 2000)
		PRINTFORMDW 대요정은 %CALLNAME:MASTER%의 소모상을 봐 자신의 행동을 맹성해, 자애의 표정을 띄워 심신을 달래려 하고 있다……
	ELSE
		PRINTFORMDW 대요정은 %CALLNAME:MASTER%(으)로 하고 온 처사를 다시 생각해, 조금 반성한 것 같다……
	ENDIF
ENDIF
IF FIRSTTIME(1001)
	PRINTL  
	PRINTFORMDW ※일시적으로 잃고 있던 조교자의 소질,[겁장이][얌전하다]하지만 복귀합니다（이후 이 문장은 표시되지 않습니다）
ENDIF
TALENT:겁쟁이 = 1
TALENT:얌전한 = 1
PRINTL  

@FADEIO(ARG = 4, ARGS = "VOID", ARGS:1 = "VOID", ARGS:2 = "VOID", ARGS:3 = "VOID", ARGS:4 = "VOID", ARGS:5 = "VOID", ARGS:6 = "VOID", ARGS:7 = "VOID", ARGS:8 = "VOID", ARGS:9 = "VOID", ARGS:10 = "VOID", ARGS:11 = "VOID", ARGS:12 = "VOID", ARGS:13 = "VOID", ARGS:14 = "VOID", ARGS:15 = "VOID", ARGS:16 = "VOID", ARGS:17 = "VOID", ARGS:18 = "VOID", ARGS:19 = "VOID", ARGS:20 = "VOID", ARGS:21 = "VOID", ARGS:22 = "VOID", ARGS:23 = "VOID", ARGS:24 = "VOID", ARGS:25 = "VOID", ARGS:26 = "VOID", ARGS:27 = "VOID", ARGS:28 = "VOID", ARGS:29 = "VOID")
;指定당했다文字列をフェードインしてフェードアウトし、行を削除する。
;色は設定당했다ものを用いる
;引数はフェードインと一緒
;OriginalString : 인ARG, ARGS, ARGS:1, ARGS:2, ARGS:3, ARGS:4, ARGS:5, ARGS:6, ARGS:7, ARGS:8, ARGS:9, ARGS:10, ARGS:11, ARGS:12, ARGS:13, ARGS:14, ARGS:15, ARGS:16, ARGS:17, ARGS:18, ARGS:19, ARGS:20, ARGS:21, ARGS:22, ARGS:23, ARGS:24, ARGS:25, ARGS:26, ARGS:27, ARGS:28, ARGS:29)
CALL FADEIN(ARG, ARGS, ARGS:1, ARGS:2, ARGS:3, ARGS:4, ARGS:5, ARGS:6, ARGS:7, ARGS:8, ARGS:9, ARGS:10, ARGS:11, ARGS:12, ARGS:13, ARGS:14, ARGS:15, ARGS:16, ARGS:17, ARGS:18, ARGS:19, ARGS:20, ARGS:21, ARGS:22, ARGS:23, ARGS:24, ARGS:25, ARGS:26, ARGS:27, ARGS:28, ARGS:29)
CLEARLINE 1
;OriginalString : 아웃ARG, ARGS, ARGS:1, ARGS:2, ARGS:3, ARGS:4, ARGS:5, ARGS:6, ARGS:7, ARGS:8, ARGS:9, ARGS:10, ARGS:11, ARGS:12, ARGS:13, ARGS:14, ARGS:15, ARGS:16, ARGS:17, ARGS:18, ARGS:19, ARGS:20, ARGS:21, ARGS:22, ARGS:23, ARGS:24, ARGS:25, ARGS:26, ARGS:27, ARGS:28, ARGS:29)
CALL FADEOUT(ARG, ARGS, ARGS:1, ARGS:2, ARGS:3, ARGS:4, ARGS:5, ARGS:6, ARGS:7, ARGS:8, ARGS:9, ARGS:10, ARGS:11, ARGS:12, ARGS:13, ARGS:14, ARGS:15, ARGS:16, ARGS:17, ARGS:18, ARGS:19, ARGS:20, ARGS:21, ARGS:22, ARGS:23, ARGS:24, ARGS:25, ARGS:26, ARGS:27, ARGS:28, ARGS:29)
CLEARLINE 1

@FADEIOD(ARG = 4, ARGS = "VOID", ARGS:1 = "VOID", ARGS:2 = "VOID", ARGS:3 = "VOID", ARGS:4 = "VOID", ARGS:5 = "VOID", ARGS:6 = "VOID", ARGS:7 = "VOID", ARGS:8 = "VOID", ARGS:9 = "VOID", ARGS:10 = "VOID", ARGS:11 = "VOID", ARGS:12 = "VOID", ARGS:13 = "VOID", ARGS:14 = "VOID", ARGS:15 = "VOID", ARGS:16 = "VOID", ARGS:17 = "VOID", ARGS:18 = "VOID", ARGS:19 = "VOID", ARGS:20 = "VOID", ARGS:21 = "VOID", ARGS:22 = "VOID", ARGS:23 = "VOID", ARGS:24 = "VOID", ARGS:25 = "VOID", ARGS:26 = "VOID", ARGS:27 = "VOID", ARGS:28 = "VOID", ARGS:29 = "VOID")
;設定당했다文字列をフェードインしてフェードアウトし、行を削除する。
;色はデフォルトの色を用いる
;引数はフェードインと一緒
LOCAL = GETCOLOR()
SETCOLOR GETDEFCOLOR()
CALL FADEIO(ARG, ARGS, ARGS:1, ARGS:2, ARGS:3, ARGS:4, ARGS:5, ARGS:6, ARGS:7, ARGS:8, ARGS:9, ARGS:10, ARGS:11, ARGS:12, ARGS:13, ARGS:14, ARGS:15, ARGS:16, ARGS:17, ARGS:18, ARGS:19, ARGS:20, ARGS:21, ARGS:22, ARGS:23, ARGS:24, ARGS:25, ARGS:26, ARGS:27, ARGS:28, ARGS:29)
SETCOLOR LOCAL

@FADEIND(ARG = 4, ARGS = "VOID", ARGS:1 = "VOID", ARGS:2 = "VOID", ARGS:3 = "VOID", ARGS:4 = "VOID", ARGS:5 = "VOID", ARGS:6 = "VOID", ARGS:7 = "VOID", ARGS:8 = "VOID", ARGS:9 = "VOID", ARGS:10 = "VOID", ARGS:11 = "VOID", ARGS:12 = "VOID", ARGS:13 = "VOID", ARGS:14 = "VOID", ARGS:15 = "VOID", ARGS:16 = "VOID", ARGS:17 = "VOID", ARGS:18 = "VOID", ARGS:19 = "VOID", ARGS:20 = "VOID", ARGS:21 = "VOID", ARGS:22 = "VOID", ARGS:23 = "VOID", ARGS:24 = "VOID", ARGS:25 = "VOID", ARGS:26 = "VOID", ARGS:27 = "VOID", ARGS:28 = "VOID", ARGS:29 = "VOID")
;設定당했다文字列をフェードインする。
;色はデフォルトの色を用いる
;引数はフェードインと一緒
LOCAL = GETCOLOR()
SETCOLOR GETDEFCOLOR()
;OriginalString : 인ARG, ARGS, ARGS:1, ARGS:2, ARGS:3, ARGS:4, ARGS:5, ARGS:6, ARGS:7, ARGS:8, ARGS:9, ARGS:10, ARGS:11, ARGS:12, ARGS:13, ARGS:14, ARGS:15, ARGS:16, ARGS:17, ARGS:18, ARGS:19, ARGS:20, ARGS:21, ARGS:22, ARGS:23, ARGS:24, ARGS:25, ARGS:26, ARGS:27, ARGS:28, ARGS:29)
CALL FADEIN(ARG, ARGS, ARGS:1, ARGS:2, ARGS:3, ARGS:4, ARGS:5, ARGS:6, ARGS:7, ARGS:8, ARGS:9, ARGS:10, ARGS:11, ARGS:12, ARGS:13, ARGS:14, ARGS:15, ARGS:16, ARGS:17, ARGS:18, ARGS:19, ARGS:20, ARGS:21, ARGS:22, ARGS:23, ARGS:24, ARGS:25, ARGS:26, ARGS:27, ARGS:28, ARGS:29)
SETCOLOR LOCAL
