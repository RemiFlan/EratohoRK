;==================================================
;
;	汎用関数置き場＠参照編
;		参照に用い、特定の数値や名称などを返すもの
;		あるいは、状況に応じた接頭語などを返すもの
;
;		구상向けのものもあったりなかったり。
;
;==================================================


;==================================================
;
;	TALENT、その他キャラクター関連の参照
;
;==================================================

;-------------------------------------------------
;キャラ間呼び名취득関数@CNAME
;式中で使用する関数です。TARGETが引数0のキャラを呼ぶ呼び名を表示します。省略するとMASTER
;引数1を入れるとTARGET以外からも参照できます。
;頻繁に呼ばれるのでRESULTを保護します。
;こんなゴツい処理を名前呼ぶたびに行う是非についてはとりあえず知らない。まあ重くなんてならないと信じる
;-------------------------------------------------
@CNAME(ARG = -2, ARG:1 = -2)
#FUNCTIONS
#LOCALSIZE 1
#LOCALSSIZE 1
#DIM LCOUNT, 1
#DIMS DYNAMIC 경칭대상, 100
#DIMS DYNAMIC 경칭내역, 100
#DIMS DYNAMIC 통칭대상, 100
#DIMS DYNAMIC 통칭내역, 100

;引数省略の処理
ARG = ARG != -2 ? ARG # MASTER
ARG:1 = ARG:1 != -2 ? ARG:1 # TARGET

;기본경칭の処理
SPLIT CSTR:(ARG:1):기본경칭, "/", 경칭대상, LOCAL
FOR LCOUNT, 0, LOCAL
	경칭내역:LCOUNT = %REPLACE(REPLACE(SUBSTRING(경칭대상:LCOUNT, STRFIND(경칭대상:LCOUNT, "_")+1), "名前", NAME:ARG), "呼び名", CALLNAME:ARG)%
	경칭대상:LCOUNT = %SUBSTRING(경칭대상:LCOUNT,0, STRFIND(경칭대상:LCOUNT, "_")-1)%
NEXT

;呼び名の分類
SPLIT CSTR:(ARG:1):호칭목록, "/", 통칭대상, LOCAL
FOR LCOUNT, 0, LOCAL
	통칭내역:LCOUNT = %REPLACE(REPLACE(SUBSTRING(통칭대상:LCOUNT, STRFIND(통칭대상:LCOUNT, "_")+1), "名前", NAME:ARG), "呼び名", CALLNAME:ARG)%
	통칭대상:LCOUNT = %SUBSTRING(통칭대상:LCOUNT,0, STRFIND(통칭대상:LCOUNT, "_")-1)%
NEXT

;一時的にNAMEを入れる
LOCALS = %NAME:ARG%
$NAMELESS_LOOP
;통칭대상にいる場合
IF MATCH(통칭대상, LOCALS)
	FOR LCOUNT, 0, 100
		IF 통칭대상:LCOUNT == LOCALS
			LOCALS = %통칭내역:LCOUNT%
			BREAK
		ENDIF
	NEXT
;대요정・소악마の場合
ELSEIF LOCALS == "대요정" || LOCALS == "소악마"
	;そのままでは呼べないので당신にしてもう一度回す
	LOCALS = 당신
	GOTO NAMELESS_LOOP
;기본경칭の処理
ELSE
	;CALLNAMEにする
	LOCALS = %CALLNAME:ARG%
	;경칭대상検索
	FOR LCOUNT, 0, 100
		SELECTCASE 경칭대상:LCOUNT
			CASE ""
				BREAK
			CASE "基本"
				LOCALS = %경칭내역:LCOUNT%
			CASEELSE
				;오류 수정 불가로 주석처리함
				;SIF TALENT:ARG:(경칭대상:LCOUNT)
					;LOCALS = %경칭내역:LCOUNT%
		ENDSELECT
	NEXT
ENDIF
;RESULTを復元
RESULT = LOCAL
RETURNF LOCALS

;-------------------------------------------------
;페니스判定関数@PENIS
;式中で使用する関数です。페니스がある場合1を返します
;引数0は대상の등록번호。しょうもない中身
;引数のキャラがいない場合0で返すようにしま했다
;
;↑の仕様は正直どうなんだろと思わなくもないけれど、とりあえず下限しか見てなかったので修正@revkoishi(14/04/20)
;-------------------------------------------------
@PENIS(ARG)
#FUNCTION
RETURNF INRANGE(ARG, 0, CHARANUM - 1) ? TALENT:ARG:후타나리 || TALENT:ARG:남자 # 0
;RETURNF ARG < 0 ? 0 # TALENT:ARG:후타나리 || TALENT:ARG:남자

;-------------------------------------------------
;페니스밴드判定関数@PENISBAND
;式中で使用する関数です。페니스밴드사용중1を返します
;破棄予定
;-------------------------------------------------
@PENISBAND(ARG)
#FUNCTION
RETURNF !(TALENT:ARG:후타나리 || TALENT:ARG:남자) && ITEM:페니스밴드

;-------------------------------------------------
;아라이멘도判定関数@ALI
;式中で使用する関数です。아라이멘도が引数以上なら真になります
;引数0は아라이멘도の数値。0ならば아라이멘도正扱い
;引数1を省略すればTARGET。指定すればそのキャラを見ます。(FLAG:주인님)と指定することでEV111等でも使えます
;-------------------------------------------------
@ALI(ARG, ARG:1 = -2)
#FUNCTION
SIF ARG:1 == -2
	ARG:1 = TARGET
RETURNF CFLAG:(ARG:1):아라이멘도 >= ARG

;-------------------------------------------------
;호감도判定関数@FAVOR
;式中で使用する関数です。호감도が指定以上なら真になります。ただし、0に했다場合は条件に含みません
;引数0は죠교대상から죠교자、引数1は죠교자から죠교대상の호감도です
;引数2を指定했다場合、죠교자の代わりにそのキャラ（主に조수）を見ます
;-------------------------------------------------
@FAVOR(ARG, ARG:1, ARG:2 = -2)
#FUNCTION
SIF ARG:2 == -2
	ARG:2 = TARGET
RETURNF (!ARG || CFLAG:(ARG:2):M호의 >= ARG) && (!ARG:1 || CFLAG:(ARG:2):호의 >= ARG:1)

;-------------------------------------------------
;호감도参照関数@FAVOR2
;式中で使用する関数です。호감도が指定以上なら真になります。ただし、省略(-123456)했다場合は호감도の数値自体を返します
;TARGET-ASSI間の호감도は存在しないため、引数にMASTERが含まれない場合は0で戻ります
;-------------------------------------------------
@FAVOR2(ARG, ARG:1, ARG:2 = -123456)
#FUNCTION
;引数不適
SIF ARG < 0 || ARG:1 < 0 || !GROUPMATCH(MASTER, ARG, ARG:1)
	RETURNF 0
;閾値がある
IF ARG:2 != -123456
	RETURNF ARG == MASTER ? CFLAG:(ARG:1):M호의 >= ARG:2 # CFLAG:ARG:호의 >= ARG:2
;閾値がない
ELSE
	RETURNF ARG == MASTER ? CFLAG:(ARG:1):M호의 # CFLAG:ARG:호의
ENDIF

;-------------------------------------------------
;ベース割合算出関数@BASERATIO
;式中で使用する関数です。ベース値がMAXBASEの何％あるか返します
;引数0は등록번호、引数1はベース번호、引数2を設定했다場合はその％以上なら真を返します
;-------------------------------------------------
@BASERATIO(ARG:0, ARG:1, ARG:2)
#FUNCTION
RETURNF ARG:2 ? BASE:(ARG:0):(ARG:1) * 100 / MAXBASE:(ARG:0):(ARG:1) >= ARG:2 # BASE:(ARG:0):(ARG:1) * 100 / MAXBASE:(ARG:0):(ARG:1)

;-------------------------------------------------
;素質検索関数@FINDTALENT
;式中で使用する関数です。指定했다素質をもつキャラを検索します。最初に見つかったキャラの등록번호を返します
;居なかった場合、-1を返します
;引数は文字列です。数値を使う場合はTALENTNAME:xxを引数にして呼んでください
;-------------------------------------------------
@FINDTALENT(ARGS)
#FUNCTION
#LOCALSIZE 1
;FINDCHARAが使いたい…けど真偽判定ができないのでFORを回す
FOR LOCAL, 0, CHARANUM
	SIF TALENT:LOCAL:ARGS
		RETURNF LOCAL
NEXT
RETURNF -1

;-------------------------------------------------
;조수번호検索関数@ASSISNO
;조수の誰かが指定했다キャラ번호なら、その조수の등록번호を返します。
;いない場合、-1になります
;-------------------------------------------------
@ASSISNO(ARG)
#FUNCTION
#LOCALSIZE 1
FOR LOCAL, 0, 4
	SIF ASSI:LOCAL >= 0 && NO:(ASSI:LOCAL) == ARG
		RETURNF ASSI:LOCAL
NEXT
RETURNF -1
;-------------------------------------------------
;조수素質検索関数@ASSISTALENT
;조수の誰かが指定했다TALENTを引数1の値以上で持っていれば、その조수の등록번호を返します。
;いない場合、-1になります
;-------------------------------------------------
@ASSISTALENT(ARG, ARG:1 = 1)
#FUNCTION
#LOCALSIZE 1
FOR LOCAL, 0, 4
	SIF ASSI:LOCAL >= 0 && TALENT:(ASSI:LOCAL):ARG >= ARG:1
		RETURNF ASSI:LOCAL
NEXT
RETURNF -1

;-------------------------------------------------
;조수能力検索関数@ASSISABL
;조수の誰かが指定했다ABLを引数1の値以上で持っていれば、その조수の등록번호を返します。
;いない場合、-1になります
;-------------------------------------------------
@ASSISABL(ARG, ARG:1 = 1)
#FUNCTION
#LOCALSIZE 1
FOR LOCAL, 0, 4
	SIF ASSI:LOCAL >= 0 && ABL:(ASSI:LOCAL):ARG >= ARG:1
		RETURNF ASSI:LOCAL
NEXT
RETURNF -1

;-------------------------------------------------
;関数名:ASSIID
;概　要:조수ID취득関数
;引　数:なし
;戻り値:ASSIとして扱われている조수のID(1～3)
;備  考:式中関数
;ASSIに入っているキャラ(＝구상主)が조수１か조수２か조수３かを判別する
;조수구상で使うかも
;-------------------------------------------------
@ASSIID
#FUNCTION
#LOCALSIZE 1
SIF ASSI < 0
	RETURNF 0
FOR LOCAL, 1, 4
	SIF ASSI == ASSI:LOCAL
		RETURNF LOCAL
NEXT

;-------------------------------------------------
;素質判定関数@GET_TALENT
;引数のキャラがが指定했다TALENTを持っていれば、TALENTの数値を返します。
;いない場合、0になります
;TALENTの指定は文字列で行いますが、번호でもできます。その場合""囲みで文字列として数字を入れること
;-------------------------------------------------
@GET_TALENT(ARG, ARGS)
#FUNCTION
#LOCALSIZE 1
IF GETNUM(TALENT, ARGS) >= 0
	LOCAL = GETNUM(TALENT, ARGS)
ELSE
	LOCAL = TOINT(ARGS)
ENDIF
RETURNF ARG >= 0 ? TALENT:(ASSI:1):LOCAL # 0


;-------------------------------------------------
;関数名:ABL_TYPE
;概　要:能力分類関数
;引　数:ARG:0…ABL번호
;戻り値:能力分類번호
;       (0.非表示/1.基礎/2.감각/3.性癖/4.中毒/5.죠교/6.未分類)
;備　考:式中関数
;能力分類テーブル。能力の分類번호を返す
;今のところ色分けにしか使っていない
;
;新規作成@revkoishi(14/05/26)
;-------------------------------------------------
@ABL_TYPE(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	;0.非表示(表示させない能力) ※特別な理由が無い限りは不要な枠
	;CASE -1
	;	RETURNF 0
	;1.基礎
	CASE 0 TO 2
		RETURNF 1
	;2.감각
	CASE 3 TO 6
		RETURNF 2
	;3.性癖
	CASE 7 TO 11
		RETURNF 3
	;4.中毒
	CASE 12 TO 16
		RETURNF 4
	;5.죠교
	CASE 20 TO 28
		RETURNF 5
ENDSELECT
;6.未分類(これがあるのは望ましくない)
RETURNF 6


;-------------------------------------------------
;関数名:EXP_TYPE
;概　要:경험分類関数
;引　数:ARG:0…EXP번호
;戻り値:경험分類번호
;       (0.非表示/1.쾌락/2.절정/3.状況/4.能動/5.受動/6.이상/7.未分類)
;備　考:式中関数
;경험分類テーブル。경험の分類번호を返す
;今のところ色分けにしか使っていない
;
;新規作成@revkoishi(14/05/26)
;-------------------------------------------------
@EXP_TYPE(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	;0.非表示(表示させない경험) ※特別な理由が無い限りは不要な枠
	;CASE -1
	;	RETURNF 0
	;1.쾌락
	CASE 0 TO 3, 21, 30, 31
		RETURNF 1
	;2.절정
	CASE 4 TO 6, 14
		RETURNF 2
	;3.状況
	CASE 7, 20, 25, 26, 32, 40, 41
		RETURNF 3
	;4.能動
	CASE 8, 10, 22 TO 24, 63
		RETURNF 4
	;5.受動
	CASE 11 TO 13, 51, 60 TO 62
		RETURNF 5
	;6.이상
	CASE 50, 52, 53, 55
		RETURNF 6
ENDSELECT
;7.未分類(これがあるのは望ましくない)
RETURNF 7


;-------------------------------------------------
;関数名:GET_SEX
;概　要:性別취득関数
;引　数:ARG:0…キャラ등록번호
;戻り値:性別を表す文字列
;備　考:式中関数
;
;GET_TALENTNAMEを使用するように変更@revkoishi(14/04/28)
;-------------------------------------------------
@GET_SEX(ARG)
#FUNCTIONS
SIF TALENT:ARG:후타나리
	RETURNF GET_TALENTNAME(ARG, GETNUM(TALENT, "후타나리"))
RETURNF @"\@ TALENT:ARG:남자 ? %GET_TALENTNAME(ARG, GETNUM(TALENT, "남자"))% # 여자 \@"


;-------------------------------------------------
;関数名:GET_TALENTNAME
;概　要:素質名취득関数
;引　数:ARG:0…キャラ등록번호
;　　　:ARG:1…TALENT번호
;戻り値:素質名
;備　考:式中関数
;素質の名前を返す。上位素質名の処理などを行う
;
;햇빛혐오と독심능력の処理を追加、SQR分をコメントアウト@revkoishi(14/04/20)
;-------------------------------------------------
@GET_TALENTNAME(ARG:0, ARG:1)
#FUNCTIONS
SELECTCASE ARG:1
	;CASE 0		;처녀/처녀(再生)
	;	RETURNF TALENTNAME:0 + \@ !INRANGE(TALENT:ARG:처녀, 0, 1) ? (再生) # \@
	;CASE 109	;거유/爆乳
	;	RETURNF \@ TALENT:ARG:거유 == 2 ? 爆乳 # %TALENTNAME:109% \@
	CASE 119	;햇빛혐오/日光苦손
		RETURNF "日光" + \@ TALENT:ARG:햇빛혐오 == 2 ? 苦손 # 嫌い \@
	CASE 132	;(독심능력) 空気を読む程度の能力/心を読む程度の能力
		RETURNF \@ TALENT:ARG:독심능력 == 2 ? 心 # 空気 \@ + "を読む程度の能力"
ENDSELECT
RETURNF TALENTNAME:(ARG:1)



;-------------------------------------------------
;関数名:TALENT_TYPE
;概　要:素質分類関数
;引　数:ARG…TALENT번호
;戻り値:素質分類번호
;       (0.非表示/1.性別/2.성격/3.体質/4.技能/5.後天素質/6.種族特性/7.未分類)
;備　考:式中関数
;素質分類テーブル。素質の分類번호を返す
;素質整頓表示に用いる
;
;輝바늘城分を追加、SQR分を削除、TALENT:220～222を暫定的に非表示に@revkoishi(14/04/20)
;-------------------------------------------------
@TALENT_TYPE(ARG)
#FUNCTION
SELECTCASE ARG
	;0.非表示(表示させない素質) ※基本的にはSQR由来枠なので、特別な理由が無い限りは不要な枠
	;CASE 220 TO 222	;TALENT:220～222にデータが入る問題が直ったのでコメントアウトで@revkoishi(14/05/19)
	;	RETURNF 0
	;1.性別
	CASE 0, 1, 121, 122
		RETURNF 1
	;2.성격
	CASE 10 TO 17, 20 TO 37, 63, 65, 80 TO 88, 90, 92, 93
		RETURNF 2
	;3.体質
	CASE 40 TO 43, 56, 60 TO 62, 64, 70, 71, 100 TO 114, 116, 118, 119, 123 TO 126
		RETURNF 3
	;4.技能
	CASE 50 TO 53, 55, 57 TO 59, 66, 91, 117, 130, 132, 133, 135
		RETURNF 4
	;5.後天素質
	CASE 2, 3, 72 TO 79, 89, 131, 140
		RETURNF 5
	;6.種族特性
	CASE 54, 115, 119, 134, 136 TO 138
		RETURNF 6
ENDSELECT
;7.未分類(これがあるのは望ましくない)
RETURNF 7

;-------------------------------------------------
;関数名:TALENT_TYPENAME
;概　要:素質分類名취득関数
;引　数:ARG…TALENT分類번호
;戻り値:素質分類を表す文字列
;       (0.非表示/1.性別/2.성격/3.体質/4.技能/5.後天素質/6.種族特性/7.未分類)
;備　考:式中関数
;素質の分類名を返す。素質整頓表示に用いる
;-------------------------------------------------
@TALENT_TYPENAME(ARG)
#FUNCTIONS
#LOCALSSIZE 10
SIF !STRLENS(LOCALS)
	SPLIT "非表示/性別/성격/体質/技能/後天素質/種族特性/未分類", "/", LOCALS, LOCAL
RETURNF LOCALS:ARG


;-------------------------------------------------
;주인님修飾関数@TARGET_DESCRIPTION
;式中で使用する関数です。TARGETがどのような상태かを描写します…とりあえず継続系にのみ対応
;引数は語尾。「、」「하면서」「하며 」「て」「つつ」「た」等に対応
;-------------------------------------------------
@TARGET_DESCRIPTION(ARGS)
#FUNCTIONS
VARSET LOCALS
;성교중(죠교자삽입)
IF TEQUIP:성교중
	IF TEQUIP:죠교자페니스밴드
		LOCALS += "길다란 모형을"
	ELSE
		LOCALS += @"\@ TCVAR:TARGET:가버려 ? 이제 가버릴 듯 한 # \@ 페니스를"
	ENDIF
	;体位によって分岐
	SELECTCASE TEQUIP:성교중
		;정상위
		CASE 1
			LOCALS += @"체중을 실어 %CALLNAME:MASTER%의 질내에 가득"
		;후배위
		CASE 2
			LOCALS += @"뒤에서 %CALLNAME:MASTER%의 질내에 가득"
		;기승위
		CASE 3
			LOCALS += @"%CALLNAME:MASTER%의 암컷 구멍에 끝까지 밀어넣어"
		;대면좌위
		CASE 4
			LOCALS += @"밀착하고 %CALLNAME:MASTER%의 질을 애무하며"
		;배면좌위
		CASE 5
			LOCALS += @"%CALLNAME:MASTER%에게 삽입하여 껴안고"
		;항문섹스
		CASE 6
			LOCALS += @"%CALLNAME:MASTER%의 의 항문에 넣어"
	ENDSELECT
;수음・애무継続中
ELSEIF TEQUIP:죠교대상Ｃ사용 == 1
	LOCALS += @"\@ TCVAR:MASTER:가버려 ? 이제 가버릴 듯 한 # \@ "
	LOCALS += @"%CALLNAME:MASTER%의 \@ PENIS(MASTER) ? 페니스 # \@"
	SIF !PENIS(MASTER)
		LOCALS += @"\@ TEQUIP:페니스밴드 ? 모형 # 클리토리스 \@"
	LOCALS += "를 애무"
;펠라・クンニ継続中
ELSEIF TEQUIP:죠교대상Ｃ사용 == 2
	LOCALS += @"\@ TCVAR:MASTER:가버려 ? 이제 가버릴 듯 한 # \@ %CALLNAME:MASTER%의 \@ PENIS(MASTER) ? 페니스 # 클리토리스 \@를 핥아"
;성교중(죠교대상삽입)
ELSEIF TEQUIP:성교봉사중
	IF TEQUIP:페니스밴드
		LOCALS += @"%CALLNAME:MASTER%의 길다란 모형을"
	ELSE
		LOCALS += @"%CALLNAME:MASTER%의 \@ TCVAR:MASTER:가버려 ? 이제 가버릴 듯 한 # \@ 페니스를"
	ENDIF
	;体位によって分岐
	SELECTCASE TEQUIP:성교봉사중
		;정상위
		;CASE 1
			;LOCALS += @"大きく開いた股の間に迎え入れ"
		;후배위
		;CASE 2
			;LOCALS += @"背後から질내に삽입され"
		;기승위
		;CASE 3
			;LOCALS += @"ぬるぬるの膣できゅうきゅうと絞り上げ"
		;대면좌위
		;CASE 4
			;LOCALS += @"体を密着させて膣奥に歓迎し"
		;배면좌위
		;CASE 5
			;LOCALS += @"背を預けて堪能し"
		;항문섹스
		;CASE 6
			;LOCALS += @"腸液にぬめる肛門で締め付け"
		;정상위
		CASE 1
			LOCALS += @"크게 벌어진 가랑이 사이에 영입"
		;후배위
		CASE 2
			LOCALS += @"뒤에서 질내에 삽입 된"
		;기승위
		CASE 3
			LOCALS += @"칙칙한 질에서 끈적하게 짜내"
		;대면 좌위
		CASE 4
			LOCALS += @"몸을 밀착시켜 질 안쪽에 들여"
		;배면 좌위
		CASE 5
			LOCALS += @"넣고 몸을 맡겨"
		;항문 섹스
		CASE 6
			LOCALS += @"장액으로 미끌미끌한 항문에 결합"
	ENDSELECT
;죠교자자위중
ELSEIF GETBIT(TEQUIP:자위중, 1)
	IF TEQUIP:죠교자페니스밴드
		LOCALS += "길다란 모형을"
	ELSE
		LOCALS += @"\@ TCVAR:TARGET:가버려 ? 이제 가버릴 듯 한 # \@ \@ PENIS(TARGET) ? 페니스 # 클리토리스 \@를 "
	ENDIF
	LOCALS += "스스로 자위하는 것을 과시"
ENDIF


SIF LOCALS != ""
	LOCALS += ARGS
RETURNF LOCALS

;-------------------------------------------------
;関数名:PENIS_DESCRIPTION
;概　要:페니스描写関数
;引　数:なし
;戻り値:페니스の상태を表す文字列
;備　考:式中関数
;なんとなくコードが煩雑になりそうな予感が했다ので関数可してみた
;使用例
;PRINTFORML %CALLNAME:MASTER%의 %PENIS_DESCRIPTION()%페니스が(以下略
;現状の規模ならAUTO_SPLITでも十分だけど、拡張可能性と保守性を考えてSTRDATAにしてみる@revkoishi
;-------------------------------------------------
@PENIS_DESCRIPTION(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
IF ARG == MASTER
	SELECTCASE TFLAG:ACT
		;애무系ACT
		CASE 10 TO 19
			;萎えてる
			IF TCVAR:MASTER:발기도 < 1000
				;사정直後
				IF TCVAR:MASTER:사정후경과턴 == 1
					STRDATA LOCALS:0
;OriginalString : イったばかりの
						DATA 이뿐인 
;OriginalString : イったばかりで민감な
						DATA 이것만으로도 민감한 
;OriginalString : 先程たっぷりと精を放った
						DATA 조금 전 충분히 정령을 발한 
;OriginalString : 
					ENDDATA
				;その他
				ELSE
					STRDATA LOCALS:0
;OriginalString : 萎えてしまった
						DATA 쇠약해진 
;OriginalString : 萎びた
						DATA 시들어버린 
;OriginalString : ピクリともしない
						DATA 꿈쩍도 하지 않는 
;OriginalString : 
					ENDDATA
				ENDIF
			;발기
			ELSE
				;사정直後
				IF TCVAR:MASTER:사정후경과턴 == 1
					STRDATA LOCALS:0
;OriginalString : ようやく사정が収まった
						DATA 간신히 사정을 멈춘 
;OriginalString : 衰えを知らない
						DATA 쇠약을 모르는 
;OriginalString : 脈動が収まらない
						DATA 맥동이 들어가지 않는 
;OriginalString : 
					ENDDATA
				;발기도の派生
				ELSEIF TCVAR:MASTER:발기도 >= 1500
					STRDATA LOCALS:0
;OriginalString : はちきれんばかりに怒張했다
						DATA 터질듯이 커진 
;OriginalString : 反り返った
						DATA 젖혀져 돌아간 
;OriginalString : 限界まで발기했다 
						DATA 한계까지 발기한 
;OriginalString : 
					ENDDATA
				ELSE
					STRDATA LOCALS:0
;OriginalString : 怒張했다
						DATA 커진 
;OriginalString : 屹立했다
						DATA 서있는 
;OriginalString : いきり立った
						DATA 격분한 
;OriginalString : 
					ENDDATA
				ENDIF
			ENDIF
	ENDSELECT
ELSE
	SELECTCASE TCVAR:ARG:발기
		CASE 0
			LOCALS:0 = 아직 부드러운 
		CASE 1
			LOCALS:0 = 서서히 단단해지는 
		CASE 2
			LOCALS:0 = 발기한 
		CASEELSE
			LOCALS:0 = 휘어 돌아간 
	ENDSELECT
ENDIF
RETURNF LOCALS:0


;-------------------------------------------------
;関数名:PENIS_DESCRIPTION2
;概　要:페니스描写関数
;引　数:なし
;戻り値:페니스の상태を表す文字列
;備　考:式中関数
;
;TFLAG:166=エナジードレイン
;被エナジードレイン中의 페니스の상태というモロにSQR仕様関数なのでコメントアウト
;関数定義だけ生きているのは現状で呼び出し箇所があるから손抜きという意味もあるのだけど、
;そのうち誰かがエナジードレインするよう되었다ら(あるいは他に利用方法あれば)
;その時にまた考えましょうってことで@revkoishi(14/04/20)
;-------------------------------------------------
@PENIS_DESCRIPTION2(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
[SKIPSTART]
ARG = ARG != -2 ? ARG # MASTER
LOCALS:0 = 
IF ARG == MASTER && TFLAG:166
	IF BASE:MASTER:사정
		STRDATA LOCALS:0
;OriginalString : イきっぱなし되었다
			DATA 이 오고 있을 뿐이 되었다
;OriginalString : 사정を続ける
			DATA 사정을 계속한다
;OriginalString : 정액が垂れ流し되었다
			DATA 정액이 대소변을 무의식중에 쌈이 되었다
;OriginalString : 
		ENDDATA
	ELSE
		STRDATA LOCALS:0
;OriginalString : 空撃ちを続ける
			DATA 공격를 계속한다
;OriginalString : イきっぱなし되었다
			DATA 이 오고 있을 뿐이 되었다
;OriginalString : 
		ENDDATA
	ENDIF
ENDIF
[SKIPEND]
RETURNF LOCALS:0


;-------------------------------------------------
;関数名:OPPAI_DESCRIPTION
;概　要:言葉でなく心で理解しろ
;引　数:ARG…キャラ등록번호
;戻り値:夢
;備　考:式中関数
;使用例:%OPPAI_DESCRIPTION(TARGET)%
;-------------------------------------------------
@OPPAI_DESCRIPTION(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
;SQR由来部分につきコメントアウト。爆乳は今後も無いと思われるが参考に残しておく@revkoishi(14/04/20)
;SIF TALENT:ARG:거유 == 2	;爆乳
;	RETURNF RAND_SPLIT("はちきれんばかりの가슴/大迫力のバスト/たっぷりと했다質感の가슴")
IF TALENT:ARG:거유	;거유
	STRDATA LOCALS:0
;OriginalString : 豊満な가슴
		DATA 풍만한 가슴
;OriginalString : 自慢のバスト
		DATA 자랑의 버스트
;OriginalString : 魅力的な豊かな膨らみ
		DATA 매력적인 풍부한 부푼 곳
;OriginalString : 瑞々しく揺れる双丘
		DATA 위험해보이는 유방
;OriginalString : たわわに揺れる果実
		DATA 휘어있게 흔들리는 과실
;OriginalString : 大きな乳房
		DATA 큰 유방
;OriginalString : ふくよかな가슴
		DATA 포근한 가슴
;OriginalString : 弾力に富んだ豊かな가슴
		DATA 탄력이 풍부한 풍부한 가슴
;OriginalString : 
	ENDDATA
ELSEIF TALENT:ARG:빈유	;빈유
	STRDATA LOCALS:0
;OriginalString : 控えめな가슴
		DATA 소극적인 가슴
;OriginalString : 可愛らしい가슴
		DATA 사랑스러운 가슴
;OriginalString : 可愛らしく발기시켰다乳首
		DATA 사랑스럽게 발기시킨 유두
;OriginalString : 掌に収まりそうな愛らしい乳房
		DATA 손바닥에 들어갈 것 같은 사랑스러운 유방
;OriginalString : 薄い乳房
		DATA 얇은 유방
;OriginalString : ささやかな膨らみ
		DATA 자그마한 부푼 곳
;OriginalString : 
	ENDDATA
ELSE					;並乳
	STRDATA LOCALS:0
;OriginalString : 柔らかい가슴
		DATA 부드러운 가슴
;OriginalString : 均整のとれた가슴
		DATA 균형이 좋은 가슴
;OriginalString : 綺麗な가슴
		DATA 깨끗한 가슴
;OriginalString : 瑞々しく張りのいい가슴
		DATA 봉긋하게 살짝 올라온 가슴
;OriginalString : バランスのとれた美しい乳房
		DATA 밸런스를 잡힌 아름다운 유방
;OriginalString : 美しい曲線の双丘
		DATA 아름다운 곡선의 쌍구
;OriginalString : 形よく均整美を保った乳房
		DATA 형태와 균정미를 유지한 유방
;OriginalString : 
	ENDDATA
ENDIF
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:VAGINA_DESCRIPTION
;引　数:ARG…キャラ등록번호
;戻り値:夢
;備　考:式中関数
;使用例:%VAGINA_DESCRIPTION(TARGET)%
;-------------------------------------------------
@VAGINA_DESCRIPTION(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
ARG = ARG != -2 ? ARG # MASTER
IF TALENT:ARG:작은체형	;작은체형体型
	STRDATA LOCALS:0
;OriginalString : 幼いワレメ
		DATA 어린 균열
;OriginalString : 幼い성기
		DATA 어린 성기
;OriginalString : 未発達の縦スジ
		DATA 미성숙된 균열
;OriginalString : 
	ENDDATA
ELSE				;一般
	STRDATA LOCALS:0
;OriginalString : 陰唇
		DATA 음순
;OriginalString : 女성기
		DATA 여성기
;OriginalString : 비순
		DATA 비순
;OriginalString : 
	ENDDATA
ENDIF
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:NIPPLE_DESCRIPTION
;概　要:乳首描写関数
;引　数:キャラ번호。省略すればMASTER
;戻り値:文字列
;備　考:式中関数
;使用例:%CALLNAME:MASTER%의 %NIPPLE_DESCRIPTION(MASTER)%乳首云々…
;-------------------------------------------------
@NIPPLE_DESCRIPTION(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
SELECTCASE PALAM:ARG:쾌Ｂ
	CASE IS >= 8500
		STRDATA LOCALS:0
;OriginalString : 절정への期待に震える
			DATA 절정의 기대에 떨린다
;OriginalString : ピーンと尖りきった
			DATA 뾰족하게 발기했다
;OriginalString : ビクビクと震える
			DATA 벌벌 떨린다
;OriginalString : 
		ENDDATA
	CASE IS >= 4000
		STRDATA LOCALS:0
;OriginalString : 膨らみきった
			DATA 다 부풀어 올랐다
;OriginalString : 硬くしこった
			DATA 딱딱하게 응어리졌다
;OriginalString : 弾けんばかりに膨らんだ
			DATA 튀듯이 부풀어 올랐다
;OriginalString : 
		ENDDATA
	CASEELSE
		STRDATA LOCALS:0
;OriginalString : 微かに膨らんだ
			DATA 희미하게 부풀어 올랐다
;OriginalString : 僅かに膨らみを増하면서ある
			DATA 불과에 부푼 곳을 늘리고 있다
;OriginalString : 未だ柔らかい
			DATA 아직도 부드럽다
;OriginalString : 
		ENDDATA
ENDSELECT
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:CLITORIS_DESCRIPTION
;概　要:Ｃ描写関数
;引　数:キャラ번호。省略すればMASTER
;戻り値:文字列
;備　考:式中関数
;使用例:%CALLNAME:MASTER%의 %CLITORIS_DESCRIPTION(MASTER)%陰核云々…
;-------------------------------------------------
@CLITORIS_DESCRIPTION(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
SELECTCASE PALAM:ARG:쾌Ｃ
	CASE IS >= 8500
		STRDATA LOCALS:0
;OriginalString : 절정への期待に震える
			DATA 절정에의 기대에 떨린다
;OriginalString : ヒクヒクと脈打つ
			DATA 맥박까지 띄고있다
;OriginalString : 
		ENDDATA
	CASE IS >= 4000
		STRDATA LOCALS:0
;OriginalString : 膨らみきった
			DATA 다 부풀어 올랐다
;OriginalString : 充血しきった
			DATA 피가 모인다
;OriginalString : 弾けんばかりに膨らんだ
			DATA 튀듯이 부풀어 올랐다
;OriginalString : 
		ENDDATA
	CASEELSE
		STRDATA LOCALS:0
;OriginalString : 微かに膨らんだ
			DATA 희미하게 부풀어 올랐다
;OriginalString : 僅かに膨らみつつある
			DATA 살짝 부풀어 오르고 있다
;OriginalString : ささやかに膨らんだ
			DATA 자그마하게 부풀어 올랐다
;OriginalString : 
		ENDDATA
ENDSELECT
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:WET_DESCRIPTION
;概　要:Ｖ描写関数
;引　数:キャラ번호。省略するとMASTER
;戻り値:文字列
;備　考:式中関数（v30601.001現在、MASTERのみ参照可能）
;使用例:%WET_DESCRIPTION(MASTER)%女성기(ry
;-------------------------------------------------
@WET_DESCRIPTION(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
SELECTCASE PALAM:ARG:윤활
	CASE IS >= 1500
		LOCALS : 0 = "뜨거운 꿀이 넘치는"
	CASE IS >= 1000
		LOCALS : 0 = "애액의 넘치는"
	CASE IS >= 500
		LOCALS : 0 = "흠뻑 젖은"
	CASEELSE
		LOCALS : 0 = "촉촉하게 젖은"
ENDSELECT
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:VAGINA_SMELL
;概　要:성기の匂い描写関数
;引　数:キャラ번호。省略するとMASTER
;戻り値:文字列
;備　考:式中関数（v30601.001現在、MASTERのみ参照可能）
;使用例:%VAGINA_SMELL(MASTER)%を漂わせる(ry
;-------------------------------------------------
@VAGINA_SMELL(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
SELECTCASE PALAM:ARG:윤활
	CASE IS >= 1000
		LOCALS : 0 = "진한 여인의 향기"
	CASE IS >= 500
		LOCALS : 0 = "향수 향기"
	CASEELSE
		LOCALS : 0 = "맑은 소녀의 향기"
ENDSELECT
RETURNF LOCALS:0
;eraWIZを見て作りたくなった
;と言うか、限定無し구상向けにMASTERの体格とかで分岐作ってもいいのかも
;작은체형体型だと幼い扱いだしねぇ

;-------------------------------------------------
;関数名:VAGINA_DESCRIPTION2
;概　要:Ｖ描写関数
;引　数:なし
;戻り値:文字列
;備　考:式中関数
;使用例:%VAGINA_DESCRIPTION2(MASTER)%
;-------------------------------------------------
@VAGINA_DESCRIPTION2(ARG)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
STRDATA LOCALS:0
;OriginalString : 비순
	DATA 비순
;OriginalString : 秘裂
	DATA 비렬
;OriginalString : 秘所
	DATA 비소
;OriginalString : 媚肉
	DATA 미육
;OriginalString : 花弁
	DATA 꽃잎
;OriginalString : 
ENDDATA
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:PANTY_DESCRIPTION
;概　要:팬티描写関数
;引　数:なし
;戻り値:文字列
;備　考:式中関数（v30601.001現在、MASTERのみ参照可能）
;使用例:%PANTY_DESCRIPTION(MASTER)%팬티(ry
;-------------------------------------------------
@PANTY_DESCRIPTION(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
SELECTCASE PALAM:ARG:윤활
	CASE IS >= 1500
		LOCALS:0 = "熱い花蜜でドロドロに젖음"
	CASE IS >= 1000
		LOCALS:0 = "蜜液でグッショリと젖음"
	CASE IS >= 500
		LOCALS:0 = "花蜜で汚れた"
	CASEELSE
		LOCALS:0 = "しとどに젖음"
ENDSELECT
RETURNF LOCALS:0
;ドロワ穿いたキャラの可能性に気付いたけど、出力上は関係ないから別にいいね

;-------------------------------------------------
;関数名:DHARNESS_DESCRIPTION
;概　要:페니스밴드描写関数
;引　数:ARG…キャラ등록번호
;戻り値:文字列
;備　考:式中関数
;使用例:%DHARNESS_DESCRIPTION(TARGET)%
;-------------------------------------------------
@DHARNESS_DESCRIPTION(ARG)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
STRDATA LOCALS:0
;OriginalString : 無機質な得物
	DATA 무기질인 무기
;OriginalString : 無粋な玩具
	DATA 멋없는 완구
;OriginalString : 偽りの剛直
	DATA 거짓의 강직
;OriginalString : 紛い物の楔
	DATA 유사품의 설
;OriginalString : 
ENDDATA
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:ANUS_DESCRIPTION
;概　要:엉덩이描写関数
;引　数:ARG…キャラ등록번호
;戻り値:文字列
;備　考:式中関数
;使用例:%ANUS_DESCRIPTION(TARGET)%
;-------------------------------------------------
@ANUS_DESCRIPTION(ARG)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
STRDATA LOCALS:0
;OriginalString : 不浄の花弁
	DATA 부정의 꽃잎
;OriginalString : 不浄の穴
	DATA 부정의 구멍
;OriginalString : 不浄の窄まり
	DATA 부정의 쇠퇴해져
;OriginalString : 엉덩이
	DATA 아누스
;OriginalString : 谷間の蕾
	DATA 골짜기의 뇌
;OriginalString : 禁断の肉穴
	DATA 금단의 육 혈
;OriginalString : 
ENDDATA
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:PLEASURE_DESCRIPTION
;概　要:쾌락상태描写関数
;引　数:ARG…キャラ등록번호
;戻り値:文字列
;備　考:式中関数
;使用例:%PLEASURE_DESCRIPTION(TARGET)%
;-------------------------------------------------
@PLEASURE_DESCRIPTION(ARG)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
STRDATA LOCALS:0
;OriginalString : 身体をビクビクと震わせながら
	DATA 신체를 벌벌진동시키면서
;OriginalString : 전신をガクガクと震わせながら
	DATA 전신을 가크가크와 진동시키면서
;OriginalString : 首を左右に振りながら
	DATA 목을 좌우에 거절하면서
;OriginalString : 손を唇にあてがい指を噛みながら
	DATA 손을 입술에 나누어주어 손가락을 씹면서
;OriginalString : 細い肩を震わせながら
	DATA 가는 어깨를 진동시키면서
;OriginalString : 
ENDDATA
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:Ｃ描写
;概　要:ARGのＣ描写関数
;戻り値:文字列
;備　考:式中関数
;使用例:%Ｃ描写(MASTER)%
;-------------------------------------------------
@Ｃ描写(ARG = -2)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
ARG = ARG != -2 ? ARG # MASTER
IF PENIS(ARG)
	STRDATA LOCALS:0
;OriginalString : 페니스
		DATA 페니스
;OriginalString : くさび
		DATA 쐐기
;OriginalString : 怒張
		DATA 노장
;OriginalString : 
	ENDDATA
ELSE
	STRDATA LOCALS:0
;OriginalString : 클리토리스
		DATA 클리토리스
;OriginalString : 陰核
		DATA 음핵
;OriginalString : 肉芽
		DATA 육아
;OriginalString : 性感の急所
		DATA 성감의 급소
;OriginalString : 
	ENDDATA
ENDIF
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:SEMEN_DESCRIPTION
;概　要:SPERMではなくSEMENなんだよねっていう
;引　数:ARG…キャラ등록번호
;戻り値:文字列
;備　考:式中関数
;使用例:%SEMEN_DESCRIPTION(MASTER)%
;-------------------------------------------------
@SEMEN_DESCRIPTION(ARG)
#FUNCTIONS
#LOCALSSIZE 1
LOCALS:0 = 
STRDATA LOCALS:0
;OriginalString : 官能のトロミ
	DATA 관능의 트로미
;OriginalString : 白い吐液
	DATA 흰 토액
;OriginalString : 汚濁の液体
	DATA 오탁의 액체
;OriginalString : 白い精
	DATA 흰 정령
;OriginalString : 白濁液
	DATA 백탁액
;OriginalString : 青臭い粘液
	DATA 미숙한 점액
;OriginalString : 
ENDDATA
RETURNF LOCALS:0

;-------------------------------------------------
;関数名:AFFECTION
;概　要:ARGS:0でMASTERとARG:0との호의、호감도を参照する
;引　数:ARGS:0…文字列
;引　数:ARG :0…キャラ번호。省略するとTARGET
;-------------------------------------------------
@AFFECTION(ARGS:0, ARG:0 = -2)
#FUNCTION
ARG:0 = ARG:0 != -2 ? ARG:0 # TARGET
SELECTCASE ARGS:0
	CASE "INFINITE"
		RETURNF FAVOR(10000, 10000, ARG:0) ;호의・호감도10000
	CASE "상사상애"
		RETURNF FAVOR(3000, 3000, ARG:0) ;호의・호감도3000
	CASE "盲愛", "망신", "망애"
		RETURNF FAVOR(0, 3000, ARG:0) ;호감도3000
	CASE "익애"
		RETURNF FAVOR(0, 2000, ARG:0) ;호감도2000
	CASE "권애"
		RETURNF FAVOR(0, 1000, ARG:0) ;호감도1000
	CASE "傀儡", "괴뢰"
		RETURNF FAVOR(2500, 0, ARG:0) ;호의2500
	CASE "죠교完了", "조교 완료", "조교완료"
		RETURNF FAVOR(2000, 0, ARG:0) ;호의2000
	CASE "죠교済み", "조교 된"
		RETURNF FAVOR(1000, 0, ARG:0) ;호의1000
	CASE "目覚め", "각성"
		RETURNF FAVOR(500, 0, ARG:0) ;호의500
	CASE "공포"
		RETURNF !FAVOR(200, 0, ARG:0) && MARK:MASTER:트라우마 >= 3 ;호의200未満・트라우마Lv3以上
	CASE "順応", "순응"
		RETURNF FAVOR(100, 100, ARG:0) ;호의・호감도100
	CASE "흥미"
		RETURNF FAVOR(0, 500, ARG:0) ;호감도500
	CASE "반항"
		RETURNF !FAVOR(1, 0, ARG:0) && MARK:(ARG:0):반항각인 >= 1 ;호의0以下・반항각인Lv1以上
	CASE "暴君", "폭군"
		RETURNF !FAVOR(-100, 0, ARG:0) && FAVOR(0, 1000, ARG:0) ;호의-100・호감도1000
	CASE "嫌悪", "혐오"
		RETURNF !FAVOR(-100, 0, ARG:0) ;호의-100
	CASE "不倶戴天", "불구대천"
		RETURNF !FAVOR(-500, 0, ARG:0) ;호의-500
	CASE "天敵", "천적"
		RETURNF !FAVOR(-1000, 0, ARG:0) ;호의-1000
	CASEELSE
		CALLF PRINT_ERRORMESSAGE(@"@AFFECTIONに無効な定義(%ARGS%)が渡されま했다")
		RETURNF -1
ENDSELECT

;--------------------------------------------------
;相性検索関数@RELATION_QUERY
;	引数0：대상のキャラ번호（등록번호ではない。손元に存在している필요はない）
;	引数1：検索条件（0=指定しない, 1=손元にいないキャラのみ選ぶ, 2=손元にいるキャラのみ選ぶ）
;대상キャラと全キャラとの相性を検索して、最も相性の良い相손を抽出します
;--------------------------------------------------
;戻り値一覧
;	RESULT：発見당했다キャラとの相性（0=発見不可, 1=대상への相性101～199, 2=대상への相性200以上）
;	RESULT:1：発見했다キャラのキャラ번호（発見不可の場合=-1）
;	RESULT:2：発見했다キャラの등록번호（손元にいない場合=-1）
;	RESULTS：発見했다キャラの呼び名
;	RESULTS:1：発見했다キャラの名前
;--------------------------------------------------
@RELATION_QUERY(ARG, ARG:1)
#DIM LCOUNT, 1
#LOCALSIZE 7
;検索대상の등록번호を抽出
LOCAL = GETCHARA(ARG, 1)
LOCAL:6 = 0
IF LOCAL == -1
	ADDCHARA ARG
	LOCAL = CHARANUM - 1
	LOCAL:6 = 1
ENDIF
LOCAL:1 = -1
IF ARG:1 == 2
	;손元から検索
	FOR LCOUNT, 0, CHARANUM
		LOCAL:2 = LOCAL:1 < 0 ? 100 # RELATION:LOCAL:(LOCAL:1)
		LOCAL:3 = NO:LCOUNT < 0 || NO:LCOUNT >= VARSIZE("RELATION") ? 100 # RELATION:LOCAL:(NO:LCOUNT)
		SIF LOCAL:2 == 0
			LOCAL:2 = 100
		SIF LOCAL:3 == 0
			LOCAL:3 = 100
		;同値の場合ランダムで残す
		;後に引いたほうが大きい場合それを保存
		SIF (LOCAL:2 == LOCAL:3 && RAND:2 && LOCAL:1 >= 0) || LOCAL:2 < LOCAL:3
			LOCAL:1 = NO:LCOUNT
	NEXT
ELSE
	;全体から検索
	;相性を総検索しキャラ번호と相性値を抽出
	FOR LCOUNT, 0, VARSIZE("RELATION")
		;そもそもCSVがないなら見る필요なし
		SIF EXISTCSV(LCOUNT, 0)  == 0
			CONTINUE
		;キャラがいるか確認して、いるかつ検索条件=1なら次へ飛ぶ
		SIF GETCHARA(LCOUNT, 1) != -1 && ARG:1 == 1
			CONTINUE
		LOCAL:2 = LOCAL:1 < 0 ? 100 # RELATION:LOCAL:(LOCAL:1)
		LOCAL:3 = RELATION:LOCAL:LCOUNT
		SIF LOCAL:2 == 0
			LOCAL:2 = 100
		SIF LOCAL:3 == 0
			LOCAL:3 = 100
		;同値の場合ランダムで残す
		;後に引いたほうが大きい場合それを保存
		SIF ((LOCAL:2 == LOCAL:3 && RAND:2 && LOCAL:1 >= 0) || LOCAL:2 < LOCAL:3) && LCOUNT < 149
			LOCAL:1 = LCOUNT
	NEXT
ENDIF
SIF LOCAL:6
	DELCHARA CHARANUM - 1

;名前と등록번호を취득
RESULT:1 = LOCAL:1
IF LOCAL:1 >= 0
	RESULT:2 = GETCHARA(LOCAL:1, 1)
	IF RESULT:2 >= 0
		RESULTS = %CALLNAME:(RESULT:2)%
		RESULTS:1 = %NAME:(RESULT:2)%
	ELSE
		RESULTS = %CSVCALLNAME(LOCAL:1, 0)%
		RESULTS:1 = %CSVNAME(LOCAL:1, 0)%
	ENDIF
ENDIF
;数値に応じてRETURN
SIF RELATION:LOCAL:(LOCAL:1) > 199
	RETURN 2
SIF RELATION:LOCAL:(LOCAL:1) > 100
	RETURN 1
RETURN 0
